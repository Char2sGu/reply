"use strict";(self.webpackChunkreply=self.webpackChunkreply||[]).push([[104],{8104:(Gt,N,r)=>{r.r(N),r.d(N,{MailsModule:()=>Et});var p=r(6895),g=r(4859),h=r(3238),v=r(7392),q=r(4971),tt=r(8268),_=r(1012),S=r(7234),m=r(9132),f=r(4004),t=r(4650),y=r(1372),L=r(190);let O=(()=>{class e{constructor(n,i){this.element=n,this.measurer=i,this.id="anonymous-"+e.idNext++,this.activated=!1,this.children=new Set}identifyAs(n){this.id=n}activate(){this.activated=!0}deactivate(){this.activated=!1}attach(n){this.parent=n,n.children.add(this)}detach(){if(!this.parent)throw new Error("Missing parent");this.parent.children.delete(this),this.parent=void 0}traverse(n,i={}){i.includeSelf??(i.includeSelf=!1),i.includeDeactivated??(i.includeDeactivated=!1),i.includeSelf&&n(this),this.children.forEach(o=>{!i.includeDeactivated&&!o.activated||o.traverse(n,{...i,includeSelf:!0})})}reset(){this.element.style.transform="",this.element.style.borderRadius=""}measure(){this.reset(),this.traverse(n=>n.measure()),this.boundingBox=this.measurer.measureBoundingBox(this.element),this.borderRadiuses=this.measurer.measureBorderRadiuses(this.element,this.boundingBox)}calculate(n){if(!this.boundingBox)throw new Error("Missing bounding box");const i=this.calibrate(this.boundingBox),o=i.midpoint(),s=n.midpoint();this.boundingBoxTransform={x:new L.A({origin:o.x,scale:n.width()/i.width(),translate:s.x-o.x}),y:new L.A({origin:s.y,scale:n.height()/i.height(),translate:s.y-o.y})},isNaN(this.boundingBoxTransform.x.scale)&&(this.boundingBoxTransform.x.scale=1),isNaN(this.boundingBoxTransform.y.scale)&&(this.boundingBoxTransform.y.scale=1)}calibrate(n){for(const i of this.getAncestors()){if(!i.boundingBox||!i.boundingBoxTransform)continue;const o=i.boundingBoxTransform;n=new L.g({top:o.y.apply(n.top),left:o.x.apply(n.left),right:o.x.apply(n.right),bottom:o.y.apply(n.bottom)})}return n}project(){if(!this.boundingBoxTransform)throw new Error("Missing transform");if(!this.borderRadiuses)throw new Error("Missing border radiuses");const n={x:1,y:1},i=this.getAncestors();for(const d of i)!d.boundingBoxTransform||(n.x*=d.boundingBoxTransform.x.scale,n.y*=d.boundingBoxTransform.y.scale);const o=this.element.style,s=this.boundingBoxTransform;o.transform=[`translate3d(${s.x.translate/n.x}px, ${s.y.translate/n.y}px, 0)`,`scale(${s.x.scale}, ${s.y.scale})`].join(" ");const x_x=n.x*this.boundingBoxTransform.x.scale,x_y=n.y*this.boundingBoxTransform.y.scale,b=this.borderRadiuses,A=d=>`${d.x/x_x}px ${d.y/x_y}px`;o.borderTopLeftRadius=A(b.topLeft),o.borderTopRightRadius=A(b.topRight),o.borderBottomLeftRadius=A(b.bottomLeft),o.borderBottomRightRadius=A(b.bottomRight),this.traverse(d=>d.project())}getAncestors(){const n=[];let i=this.parent;for(;i;)n.unshift(i),i=i.parent;return n}}return e.idNext=1,e})();var B=r(5158);let C=(()=>{class e extends O{constructor(n,i,o){super(n.nativeElement,i),o&&this.attach(o)}set rplLayoutProjectionNode(n){"string"==typeof n?(n&&this.identifyAs(n),this.activate()):this.deactivate()}ngOnDestroy(){this.parent&&this.detach()}}return e.\u0275fac=function(n){return new(n||e)(t.Y36(t.SBq),t.Y36(B.Z),t.Y36(O,12))},e.\u0275dir=t.lG2({type:e,selectors:[["","rplLayoutProjectionNode",""]],inputs:{rplLayoutProjectionNode:"rplLayoutProjectionNode"},features:[t._Bn([{provide:O,useExisting:e}]),t.qOj]}),e})();var M=r(8505),T=r(3900),R=r(9841),nt=r(598),w=r(3661);let et=(()=>{class e{constructor(n){this.contactService=n}getUser$(){return this.contactService.getContact$ById("user")}}return e.\u0275fac=function(n){return new(n||e)(t.LFG(w.y))},e.\u0275prov=t.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var P=r(9902);let $=(()=>{class e{constructor(){}ngOnInit(){}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275cmp=t.Xpm({type:e,selectors:[["rpl-mail-avatar"]],inputs:{src:"src"},decls:1,vars:1,consts:[["alt","Avatar",3,"src"]],template:function(n,i){if(1&n&&t._UZ(0,"img",0),2&n){let o;t.Q6J("src",null!==(o=i.src)&&void 0!==o?o:"assets/avatar-express.png",t.LSH)}},styles:["[_nghost-%COMP%]{display:inline-block;width:40px;height:40px;border-radius:50%}img[_ngcontent-%COMP%]{width:inherit;height:inherit;border-radius:inherit}"],changeDetection:0}),e})();var D=r(1135),Y=r(9300);let j=(()=>{class e{constructor(n){this.mailService=n,this.click$=new t.vpe,this.busy$=new D.X(!1)}ngOnInit(){this.click$.pipe((0,Y.h)(()=>!this.busy$.value),(0,M.b)(()=>this.busy$.next(!0)),(0,M.b)(()=>{this.mailService.updateMail(this.mail.id,this.mail.isStarred?{isStarred:!1}:{isStarred:!0})}),(0,M.b)(()=>this.busy$.next(!1))).subscribe()}}return e.\u0275fac=function(n){return new(n||e)(t.Y36(P.Y))},e.\u0275cmp=t.Xpm({type:e,selectors:[["rpl-mail-star-button"]],inputs:{mail:"mail"},decls:3,vars:4,consts:[["mat-icon-button","",3,"disabled","color","click"],["svgIcon","star"]],template:function(n,i){1&n&&(t.TgZ(0,"button",0),t.NdJ("click",function(){return i.click$.emit()}),t.ALo(1,"async"),t._UZ(2,"mat-icon",1),t.qZA()),2&n&&t.Q6J("disabled",t.lcZ(1,2,i.busy$))("color",i.mail.isStarred?"accent":void 0)},dependencies:[g.lW,v.Hw,p.Ov],styles:["[_nghost-%COMP%]{display:inline-block;width:40px;height:40px}"],changeDetection:0}),e})(),Q=(()=>{class e{constructor(n){this.mailService=n,this.click$=new t.vpe}ngOnInit(){this.click$.subscribe(()=>{"Trash"===this.mail.mailboxName?this.mailService.deleteMail(this.mail.id):this.mailService.updateMail(this.mail.id,{mailboxName:"Trash"})})}}return e.\u0275fac=function(n){return new(n||e)(t.Y36(P.Y))},e.\u0275cmp=t.Xpm({type:e,selectors:[["rpl-mail-delete-button"]],inputs:{mail:"mail"},decls:2,vars:0,consts:[["mat-icon-button","",3,"click"],["svgIcon","delete"]],template:function(n,i){1&n&&(t.TgZ(0,"button",0),t.NdJ("click",function(){return i.click$.emit()}),t._UZ(1,"mat-icon",1),t.qZA())},dependencies:[g.lW,v.Hw],styles:["[_nghost-%COMP%]{display:inline-block;width:40px;height:40px}"],changeDetection:0}),e})();var U=r(6752);let it=(()=>{class e{transform(n){return n.length?1===n.length?n[0]:2===n.length?`${n[0]} and ${n[1]}`:`${n.slice(0,-1).join(", ")}, and ${n.at(-1)}`:""}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275pipe=t.Yjl({name:"readableStrings",type:e,pure:!0,standalone:!0}),e})();const ot=["replyIcon"],at=["bottomActions"];function rt(e,a){if(1&e&&(t._UZ(0,"rpl-mail-star-button",15)(1,"rpl-mail-delete-button",16),t.TgZ(2,"button",17),t._UZ(3,"mat-icon",18),t.qZA()),2&e){const n=t.oxw(3).ngIf;t.Q6J("mail",n),t.xp6(1),t.Q6J("mail",n)}}const st=function(e){return{prev:e}};function ct(e,a){if(1&e&&(t.ynx(0),t.TgZ(1,"div",2)(2,"div",3)(3,"h1",4),t._uU(4),t.qZA(),t.TgZ(5,"a",5),t._UZ(6,"mat-icon",6),t.qZA()(),t.TgZ(7,"div",7)(8,"div",8)(9,"div",9)(10,"span"),t._uU(11),t.qZA(),t._uU(12," - "),t.TgZ(13,"span"),t._uU(14),t.ALo(15,"readableDate"),t.qZA()(),t.TgZ(16,"div",10)(17,"span"),t._uU(18),t.ALo(19,"readableStrings"),t.qZA()()(),t.TgZ(20,"div",11),t._UZ(21,"rpl-mail-avatar",12),t.qZA()(),t.TgZ(22,"div",13),t._uU(23),t.qZA()(),t.YNc(24,rt,4,2,"ng-template",null,14,t.W1O),t.BQk()),2&e){const n=a.ngIf,i=t.oxw().ngIf,o=t.oxw().ngIf;t.xp6(4),t.hij(" ",o.subject," "),t.xp6(1),t.Q6J("queryParams",t.VKq(12,st,o.id)),t.xp6(6),t.Oqu(i.name),t.xp6(3),t.Oqu(t.lcZ(15,8,o.sentAt)),t.xp6(4),t.hij("To ",t.lcZ(19,10,n),""),t.xp6(3),t.MGl("rplLayoutProjectionNode","mail-",o.id,"-avatar"),t.Q6J("src",i.avatarUrl),t.xp6(2),t.Oqu(o.content)}}function lt(e,a){if(1&e&&(t.ynx(0),t.YNc(1,ct,26,14,"ng-container",0),t.ALo(2,"async"),t.BQk()),2&e){const n=t.oxw(2);t.xp6(1),t.Q6J("ngIf",t.lcZ(2,1,n.mailRecipientNames$))}}function pt(e,a){if(1&e&&(t.ynx(0),t.YNc(1,lt,3,3,"ng-container",0),t.ALo(2,"async"),t.BQk()),2&e){const n=t.oxw();t.xp6(1),t.Q6J("ngIf",t.lcZ(2,1,n.mailSender$))}}function mt(e,a){1&e&&t._UZ(0,"mat-icon",19)}let ut=(()=>{class e{constructor(n,i,o,s,c,l){this.route=n,this.layoutContext=i,this.authService=o,this.mailService=s,this.contactService=c,this.changeDetector=l,this.navFabConfigBackup=this.layoutContext.navFabConfig,this.navBottomActionsBackup=this.layoutContext.navBottomActions}ngOnInit(){this.route.params.subscribe(n=>{this.mail$=this.mailService.getMail$ById(n.mailId).pipe((0,M.b)(s=>{s.isRead||this.mailService.updateMail(s.id,{isRead:!0})})),this.mailSender$=this.mail$.pipe((0,T.w)(s=>this.contactService.getContact$ById(s.sender)));const o=this.mail$.pipe((0,T.w)(s=>(0,R.a)(s.recipients.map(c=>this.contactService.getContact$ById(c)))));this.mailRecipientNames$=(0,R.a)([o,this.authService.getUser$()]).pipe((0,f.U)(([s,c])=>s.map(l=>l.id===c.id?"me":l.name).sort((l,x)=>"me"===l?-1/0:"me"===x?1/0:l.localeCompare(x)))),this.changeDetector.markForCheck()})}ngAfterViewInit(){this.layoutContext.navFabConfig={text:"Reply",icon:this.navFabIconTemplate,link:"/compose",linkParams:{reply:this.route.snapshot.params.mailId}},this.layoutContext.navBottomActions=this.navBottomActionsTemplate}ngOnDestroy(){this.layoutContext.navFabConfig=this.navFabConfigBackup,this.layoutContext.navBottomActions=this.navBottomActionsBackup}}return e.\u0275fac=function(n){return new(n||e)(t.Y36(m.gz),t.Y36(nt.V),t.Y36(et),t.Y36(P.Y),t.Y36(w.y),t.Y36(t.sBO))},e.\u0275cmp=t.Xpm({type:e,selectors:[["rpl-mail"]],viewQuery:function(n,i){if(1&n&&(t.Gf(ot,5),t.Gf(at,5)),2&n){let o;t.iGM(o=t.CRH())&&(i.navFabIconTemplate=o.first),t.iGM(o=t.CRH())&&(i.navBottomActionsTemplate=o.first)}},decls:4,vars:3,consts:[[4,"ngIf"],["replyIcon",""],[1,"wrapper"],["rplLayoutProjectionNode","",1,"title-line"],[1,"mat-display-1"],["mat-icon-button","","routerLink","..",3,"queryParams"],["fontSet","filled","fontIcon","expand_more"],["rplLayoutProjectionNode","",1,"info-line"],[1,"left-group"],[1,"mat-body-1"],[1,"mat-small"],[1,"right-group"],[3,"rplLayoutProjectionNode","src"],["rplLayoutProjectionNode","",1,"content"],["bottomActions",""],[3,"mail"],["routerLink","..",3,"mail"],["mat-icon-button",""],["fontSet","filled","fontIcon","more_vert"],["svgIcon","reply"]],template:function(n,i){1&n&&(t.YNc(0,pt,3,3,"ng-container",0),t.ALo(1,"async"),t.YNc(2,mt,1,0,"ng-template",null,1,t.W1O)),2&n&&t.Q6J("ngIf",t.lcZ(1,1,i.mail$))},dependencies:[p.O5,m.rH,m.yS,g.lW,g.zs,v.Hw,C,$,j,Q,p.Ov,U.G,it],styles:["[_nghost-%COMP%]{display:block;background-color:#fff;overflow:hidden}.wrapper[_ngcontent-%COMP%]{height:100%;padding:16px}.tablet-portrait[_nghost-%COMP%]   .wrapper[_ngcontent-%COMP%], .tablet-portrait   [_nghost-%COMP%]   .wrapper[_ngcontent-%COMP%]{padding:32px 16px}.title-line[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}.title-line[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin-bottom:0}.info-line[_ngcontent-%COMP%]{margin-top:8px;display:flex;align-items:center}.info-line[_ngcontent-%COMP%]   .left-group[_ngcontent-%COMP%]{flex-grow:1}.content[_ngcontent-%COMP%]{margin-top:16px;white-space:pre-line}"],changeDetection:0}),e})(),dt=(()=>{class e{constructor(n,i){this.route=n,this.layoutAnimator=i,this.mailId$=this.route.params.pipe((0,f.U)(o=>o.mailId))}ngOnInit(){}ngAfterViewInit(){this.layoutAnimator.animate(300,h.yN.STANDARD_CURVE)}}return e.\u0275fac=function(n){return new(n||e)(t.Y36(m.gz),t.Y36(y.t))},e.\u0275cmp=t.Xpm({type:e,selectors:[["rpl-mail-detail-layout"]],decls:3,vars:3,consts:[[3,"rplLayoutProjectionNode"]],template:function(n,i){1&n&&(t.TgZ(0,"rpl-content"),t._UZ(1,"rpl-mail",0),t.ALo(2,"async"),t.qZA()),2&n&&(t.xp6(1),t.MGl("rplLayoutProjectionNode","mail-",t.lcZ(2,1,i.mailId$),""))},dependencies:[C,_.S,ut,p.Ov],styles:["[_nghost-%COMP%]{display:contents}rpl-content[_ngcontent-%COMP%]{grid-row:1;grid-column:1/-1;z-index:1}.tablet-portrait[_nghost-%COMP%]   rpl-content[_ngcontent-%COMP%], .tablet-portrait   [_nghost-%COMP%]   rpl-content[_ngcontent-%COMP%]{grid-column:span 7/-2}.tablet-landscape[_nghost-%COMP%]   rpl-content[_ngcontent-%COMP%], .tablet-landscape   [_nghost-%COMP%]   rpl-content[_ngcontent-%COMP%]{grid-column:span 11/-2}.laptop[_nghost-%COMP%]   rpl-content[_ngcontent-%COMP%], .laptop   [_nghost-%COMP%]   rpl-content[_ngcontent-%COMP%]{grid-column:span 9/-2}rpl-mail[_ngcontent-%COMP%]{padding:4px;min-height:calc(100% - 8px)}"],changeDetection:0}),e})();var F=r(5861),u=r(7340),k=r(4193),gt=r(2682),J=r(2090),ht=r(515),E=r(9751),ft=r(8675),G=r(9646),z=r(8421),yt=r(4482),X=r(5403);function H(e,a){return a?n=>n.pipe(H((i,o)=>(0,z.Xf)(e(i,o)).pipe((0,f.U)((s,c)=>a(i,s,o,c))))):(0,yt.e)((n,i)=>{let o=0,s=null,c=!1;n.subscribe((0,X.x)(i,l=>{s||(s=(0,X.x)(i,void 0,()=>{s=null,c&&i.complete()}),(0,z.Xf)(e(l,o++)).subscribe(s))},()=>{c=!0,!s&&i.complete()}))})}var Ct=r(4671);function vt(){return H(Ct.y)}var Mt=r(5684);const V={now:()=>(V.delegate||performance).now(),delegate:void 0};var W=r(3399);function K(e){return new E.y(a=>{const n=e||V,i=n.now();let o=0;const s=()=>{a.closed||(o=W.l.requestAnimationFrame(c=>{o=0;const l=n.now();a.next({timestamp:e?l:c,elapsed:l-i}),s()}))};return s(),()=>{o&&W.l.cancelAnimationFrame(o)}})}const _t=K();var Ot=r(590);let I=(()=>{class e extends y.t{constructor(n,i,o){super(n,i,o),this.animateLayoutOn$=new D.X(ht.E),this.animationDuration=225,this.animationEasing="ease-in-out"}set animateLayoutOn(n){const i=n instanceof E.y?n.pipe((0,ft.O)((0,G.of)(n))):(0,G.of)(n);this.animateLayoutOn$.next(i)}ngOnInit(){this.animateLayoutOn$.pipe(vt(),(0,Mt.T)(1),(0,M.b)(()=>this.snapshot()),(0,T.w)(()=>function xt(e){return e?K(e):_t}().pipe((0,Ot.P)()))).subscribe(()=>this.animate())}animate(n=this.animationDuration,i=this.animationEasing){var o=()=>super.animate,s=this;return(0,F.Z)(function*(){return o().call(s,n,i)})()}}return e.\u0275fac=function(n){return new(n||e)(t.Y36(O,2),t.Y36(B.Z),t.Y36(y.L))},e.\u0275dir=t.lG2({type:e,selectors:[["","rplLayoutProjectionNode","","rplLayoutAnimation",""],["","rplLayoutProjectionNode","","animateLayoutOn",""]],inputs:{animateLayoutOn:"animateLayoutOn",animationDuration:"animationDuration",animationEasing:"animationEasing"},features:[t._Bn([{provide:y.t,useExisting:e}]),t.qOj]}),e})(),Pt=(()=>{class e{constructor(n,i){this.viewContainer=n,this.templateRef=i,this.initialized=!1}set value(n){if(n!==this.valueCurrent){if(this.valueCurrent=n,!this.initialized)return this.viewContainer.createEmbeddedView(this.templateRef),void(this.initialized=!0);this.viewContainer.clear(),this.viewContainer.createEmbeddedView(this.templateRef)}}}return e.\u0275fac=function(n){return new(n||e)(t.Y36(t.s_b),t.Y36(t.Rgc))},e.\u0275dir=t.lG2({type:e,selectors:[["","rplReattachOnChange",""]],inputs:{value:["rplReattachOnChange","value"]},standalone:!0}),e})();const bt=["anchor"];function At(e,a){if(1&e&&(t.ynx(0),t._UZ(1,"rpl-mail-star-button",13)(2,"rpl-mail-delete-button",13),t.TgZ(3,"button",14),t._UZ(4,"mat-icon",15),t.qZA(),t.BQk()),2&e){const n=t.oxw(3);t.xp6(1),t.Q6J("mail",n.mail),t.xp6(1),t.Q6J("mail",n.mail)}}function Lt(e,a){if(1&e&&(t.TgZ(0,"div",16),t._uU(1),t.qZA()),2&e){const n=t.oxw(3);t.xp6(1),t.Oqu(n.mail.content)}}function Tt(e,a){if(1&e&&(t.ynx(0),t._UZ(1,"div",1)(2,"div",2),t.TgZ(3,"div",3)(4,"div",4)(5,"h5",5)(6,"span"),t._uU(7),t.qZA(),t._uU(8," - "),t.TgZ(9,"span"),t._uU(10),t.ALo(11,"readableDate"),t.qZA()(),t.TgZ(12,"h1",6)(13,"a",7,8),t._uU(15),t.qZA()()(),t.TgZ(16,"div",9),t.NdJ("click",function(i){return i.stopPropagation()}),t.YNc(17,At,5,2,"ng-container",0),t.TgZ(18,"button",10),t._UZ(19,"rpl-mail-avatar",11),t.qZA()()(),t.YNc(20,Lt,2,1,"div",12),t.BQk()),2&e){const n=a.ngIf,i=t.oxw().ngIf,o=t.oxw();t.xp6(7),t.Oqu(n.name),t.xp6(3),t.Oqu(t.lcZ(11,8,o.mail.sentAt)),t.xp6(3),t.MGl("routerLink","./",o.mail.id,""),t.xp6(2),t.Oqu(o.mail.subject),t.xp6(2),t.Q6J("ngIf",i["tablet-portrait"]),t.xp6(1),t.MGl("rplLayoutProjectionNode","mail-",o.mail.id,"-avatar"),t.xp6(1),t.Q6J("src",n.avatarUrl),t.xp6(1),t.Q6J("ngIf",!o.mail.isRead)}}function wt(e,a){if(1&e&&(t.ynx(0),t.YNc(1,Tt,21,10,"ng-container",0),t.ALo(2,"async"),t.BQk()),2&e){const n=t.oxw();t.xp6(1),t.Q6J("ngIf",t.lcZ(2,1,n.mailSender$))}}let It=(()=>{class e{constructor(n,i){this.breakpointManager=n,this.contactService=i,this.breakpoints$=this.breakpointManager.breakpoints$}get mailIsRead(){return this.mail.isRead}ngOnInit(){this.mailSender$=this.contactService.getContact$ById(this.mail.sender)}onClick(){this.anchorElementRef.nativeElement.click()}}return e.\u0275fac=function(n){return new(n||e)(t.Y36(J.p),t.Y36(w.y))},e.\u0275cmp=t.Xpm({type:e,selectors:[["rpl-mail-card"]],viewQuery:function(n,i){if(1&n&&t.Gf(bt,5),2&n){let o;t.iGM(o=t.CRH())&&(i.anchorElementRef=o.first)}},hostVars:2,hostBindings:function(n,i){1&n&&t.NdJ("click",function(){return i.onClick()}),2&n&&t.ekj("read",i.mailIsRead)},inputs:{mail:"mail"},decls:2,vars:3,consts:[[4,"ngIf"],[1,"overlay"],["matRipple","",1,"ripple"],[1,"headline"],["rplLayoutProjectionNode","",1,"titles"],[1,"subtitle"],[1,"title"],[3,"routerLink"],["anchor",""],["rplLayoutProjectionNode","",1,"actions",3,"click"],["mat-icon-button","",1,"avatar-button",3,"rplLayoutProjectionNode"],[3,"src"],["class","overview",4,"ngIf"],[3,"mail"],["mat-icon-button",""],["fontSet","filled","fontIcon","more_vert"],[1,"overview"]],template:function(n,i){1&n&&(t.YNc(0,wt,3,3,"ng-container",0),t.ALo(1,"async")),2&n&&t.Q6J("ngIf",t.lcZ(1,1,i.breakpoints$))},dependencies:[p.O5,m.yS,g.lW,h.wG,v.Hw,C,$,j,Q,p.Ov,U.G],styles:["[_nghost-%COMP%]{display:block;padding:16px;background-color:#fff;cursor:pointer;position:relative}.tablet-portrait   [_nghost-%COMP%]{padding:24px}.ripple[_ngcontent-%COMP%], .overlay[_ngcontent-%COMP%]{position:absolute;inset:0}.overview[_ngcontent-%COMP%], .headline[_ngcontent-%COMP%]   .titles[_ngcontent-%COMP%]   .subtitle[_ngcontent-%COMP%]{overflow:hidden;white-space:nowrap;text-overflow:ellipsis}.overlay[_ngcontent-%COMP%]{background-color:#000;opacity:0}[_nghost-%COMP%]:hover   .overlay[_ngcontent-%COMP%]{opacity:.04}.headline[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.headline[_ngcontent-%COMP%]   .titles[_ngcontent-%COMP%]{width:0;flex-grow:1}.headline[_ngcontent-%COMP%]   .titles[_ngcontent-%COMP%]   .subtitle[_ngcontent-%COMP%], .headline[_ngcontent-%COMP%]   .titles[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{margin-bottom:0}.read[_nghost-%COMP%]   .headline[_ngcontent-%COMP%]   .titles[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{color:#0000008a}.headline[_ngcontent-%COMP%]   .titles[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:focus{text-decoration:underline}.headline[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]{display:flex;gap:8px}.read[_nghost-%COMP%]   .headline[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{color:#0000008a}[_nghost-%COMP%]:hover   .headline[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   .avatar-button[_ngcontent-%COMP%]{background-color:#fff}.overview[_ngcontent-%COMP%]{margin-top:8px;height:20px;white-space:pre}"],changeDetection:0}),e})();function Zt(e,a){if(1&e&&(t._UZ(0,"rpl-mail-card",3),t.ALo(1,"async")),2&e){const n=a.$implicit,i=t.oxw(2);t.Udp("z-index",t.lcZ(1,4,i.mailPrevId$)===n.id?1:null),t.MGl("rplLayoutProjectionNode","mail-",n.id,""),t.Q6J("mail",n)}}function Nt(e,a){if(1&e&&(t.ynx(0),t.TgZ(1,"div",1),t.YNc(2,Zt,2,6,"rpl-mail-card",2),t.qZA(),t.BQk()),2&e){const n=a.ngIf,i=t.oxw();t.xp6(1),t.Q6J("animateLayoutOn",n)("animationDuration",225)("animationEasing",i.AnimationCurves.STANDARD_CURVE),t.xp6(1),t.Q6J("ngForOf",n)("ngForTrackBy",i.mailTracker)}}let St=(()=>{class e{constructor(n,i,o){this.route=n,this.mailService=i,this.changeDetector=o,this.AnimationCurves=h.yN,this.mailTracker=(s,c)=>c.id,this.mailPrevId$=this.route.queryParams.pipe((0,f.U)(s=>s.prev))}ngOnInit(){this.route.params.subscribe(n=>{const i=n.mailboxName;this.mails$=("Starred"===i?this.mailService.getMails$Starred():this.mailService.getMails$ByMailbox(i)).pipe((0,f.U)(o=>o.sort((s,c)=>c.sentAt.getTime()-s.sentAt.getTime()))),this.changeDetector.markForCheck()})}}return e.\u0275fac=function(n){return new(n||e)(t.Y36(m.gz),t.Y36(P.Y),t.Y36(t.sBO))},e.\u0275cmp=t.Xpm({type:e,selectors:[["rpl-mail-card-list"]],decls:2,vars:3,consts:[[4,"ngIf"],["rplLayoutProjectionNode","",1,"wrapper",3,"animateLayoutOn","animationDuration","animationEasing"],[3,"mail","rplLayoutProjectionNode","zIndex",4,"ngFor","ngForOf","ngForTrackBy"],[3,"mail","rplLayoutProjectionNode"]],template:function(n,i){1&n&&(t.YNc(0,Nt,3,5,"ng-container",0),t.ALo(1,"async")),2&n&&t.Q6J("ngIf",t.lcZ(1,1,i.mails$))},dependencies:[p.sg,p.O5,C,I,It,p.Ov],styles:["[_nghost-%COMP%]{display:block}.wrapper[_ngcontent-%COMP%]{height:100%;display:flex;flex-direction:column;gap:4px}"],changeDetection:0}),e})();function Bt(e,a){if(1&e&&(t.TgZ(0,"div",8),t._uU(1),t.qZA()),2&e){const n=t.oxw(2).ngIf;t.xp6(1),t.hij(" Empty in ",n," ")}}function Rt(e,a){if(1&e&&(t.TgZ(0,"rpl-content",4),t._UZ(1,"rpl-mail-card-list",5,6),t.YNc(3,Bt,2,1,"div",7),t.ALo(4,"async"),t.qZA()),2&e){const n=t.MAs(2);let i;t.xp6(3),t.Q6J("ngIf",!(null!=(i=t.lcZ(4,1,n.mails$))&&i.length))}}function $t(e,a){1&e&&(t.TgZ(0,"div",9),t._UZ(1,"rpl-search-button"),t.qZA())}function Dt(e,a){if(1&e&&(t.ynx(0),t.TgZ(1,"div",1),t.YNc(2,Rt,5,3,"rpl-content",2),t.qZA(),t.YNc(3,$t,2,0,"div",3),t.BQk()),2&e){const n=a.ngIf,i=t.oxw().ngIf,o=t.oxw().ngIf,s=t.oxw();t.xp6(1),t.Q6J("@content",i.latestMailboxIndex)("animateLayoutOn",n)("animationDuration",300)("animationEasing",s.AnimationCurves.STANDARD_CURVE),t.xp6(1),t.Q6J("rplReattachOnChange",n),t.xp6(1),t.Q6J("ngIf",o["tablet-portrait"])}}function Yt(e,a){if(1&e&&(t.ynx(0),t.YNc(1,Dt,4,6,"ng-container",0),t.ALo(2,"async"),t.BQk()),2&e){const n=t.oxw(2);t.xp6(1),t.Q6J("ngIf",t.lcZ(2,1,n.mailboxName$))}}function jt(e,a){if(1&e&&(t.ynx(0),t.YNc(1,Yt,3,3,"ng-container",0),t.ALo(2,"async"),t.BQk()),2&e){const n=t.oxw();t.xp6(1),t.Q6J("ngIf",t.lcZ(2,1,n.navigationContext.value$))}}let Z=0,Qt=(()=>{class e{constructor(n,i,o,s){this.navigationContext=n,this.route=i,this.breakpointManager=o,this.layoutAnimator=s,this.AnimationCurves=h.yN,this.breakpoints$=this.breakpointManager.breakpoints$,this.mailboxName$=this.route.params.pipe((0,f.U)(c=>c.mailboxName))}ngOnInit(){}ngAfterViewInit(){var n=this;return(0,F.Z)(function*(){n.content.fakeScroll(Z),yield n.layoutAnimator.animate(250,h.yN.STANDARD_CURVE),n.content.setScrollTop(Z)})()}ngOnDestroy(){Z=this.content.getScrollTop()}}return e.\u0275fac=function(n){return new(n||e)(t.Y36(gt.k),t.Y36(m.gz),t.Y36(J.p),t.Y36(y.t))},e.\u0275cmp=t.Xpm({type:e,selectors:[["rpl-mail-list-layout"]],viewQuery:function(n,i){if(1&n&&t.Gf(_.S,5),2&n){let o;t.iGM(o=t.CRH())&&(i.content=o.first)}},decls:2,vars:3,consts:[[4,"ngIf"],["rplLayoutProjectionNode","",1,"content-wrapper",3,"animateLayoutOn","animationDuration","animationEasing"],["class","content",4,"rplReattachOnChange"],["class","actions",4,"ngIf"],[1,"content"],[1,"list"],["list",""],["class","empty-prompt",4,"ngIf"],[1,"empty-prompt"],[1,"actions"]],template:function(n,i){1&n&&(t.YNc(0,jt,3,3,"ng-container",0),t.ALo(1,"async")),2&n&&t.Q6J("ngIf",t.lcZ(1,1,i.breakpoints$))},dependencies:[p.O5,C,I,S.P,_.S,Pt,St,p.Ov],styles:["[_nghost-%COMP%]{display:contents}.content-wrapper[_ngcontent-%COMP%]{position:relative;grid-row:1;grid-column:1/-1}.tablet-portrait[_nghost-%COMP%]   .content-wrapper[_ngcontent-%COMP%], .tablet-portrait   [_nghost-%COMP%]   .content-wrapper[_ngcontent-%COMP%]{grid-column:span 7/-2}.tablet-landscape[_nghost-%COMP%]   .content-wrapper[_ngcontent-%COMP%], .tablet-landscape   [_nghost-%COMP%]   .content-wrapper[_ngcontent-%COMP%]{grid-column:span 9/-3}.laptop[_nghost-%COMP%]   .content-wrapper[_ngcontent-%COMP%], .laptop   [_nghost-%COMP%]   .content-wrapper[_ngcontent-%COMP%]{grid-column:span 7/-3}.content-wrapper[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{position:relative;width:100%;height:100%}.content-wrapper[_ngcontent-%COMP%]   .list[_ngcontent-%COMP%]{margin:4px}.tablet-portrait[_nghost-%COMP%]   .content-wrapper[_ngcontent-%COMP%]   .list[_ngcontent-%COMP%], .tablet-portrait   [_nghost-%COMP%]   .content-wrapper[_ngcontent-%COMP%]   .list[_ngcontent-%COMP%]{margin:32px 0}.content-wrapper[_ngcontent-%COMP%]   .empty-prompt[_ngcontent-%COMP%]{position:absolute;left:50%;top:50%;transform:translate(-50%) translateY(-50%)}.tablet-portrait[_nghost-%COMP%]   .actions[_ngcontent-%COMP%], .tablet-portrait   [_nghost-%COMP%]   .actions[_ngcontent-%COMP%]{position:absolute;top:16px;right:0}.tablet-landscape[_nghost-%COMP%]   .actions[_ngcontent-%COMP%], .tablet-landscape   [_nghost-%COMP%]   .actions[_ngcontent-%COMP%]{position:initial;grid-row:1;grid-column:-3/-2;padding:16px 0}"],data:{animation:[(0,u.X$)("content",[(0,u.eR)(":increment",[(0,u.IO)(":leave",(0,u.oB)({position:"absolute"})),k.Pm.apply("y","forward")]),(0,u.eR)(":decrement",[(0,u.IO)(":leave",(0,u.oB)({position:"absolute"})),k.Pm.apply("y","backward")])])]},changeDetection:0}),e})();var Ut=r(2722),Ft=r(4);const kt=[{path:"",component:(()=>{class e extends Ft.f{constructor(n){super(),this.router=n,this.destroy$=new t.vpe}ngOnInit(){}ngAfterViewInit(){this.router.events.pipe((0,Ut.R)(this.destroy$),(0,Y.h)(n=>n instanceof m.OD)).subscribe(()=>this.layoutAnimator.snapshot())}ngOnDestroy(){this.destroy$.emit()}}return e.\u0275fac=function(n){return new(n||e)(t.Y36(m.F0))},e.\u0275cmp=t.Xpm({type:e,selectors:[["rpl-mails"]],viewQuery:function(n,i){if(1&n&&t.Gf(y.t,5),2&n){let o;t.iGM(o=t.CRH())&&(i.layoutAnimator=o.first)}},features:[t.qOj],decls:2,vars:1,consts:[["rplLayoutProjectionNode","","rplLayoutAnimation","",1,"wrapper"]],template:function(n,i){1&n&&(t.TgZ(0,"div",0),t._UZ(1,"router-outlet"),t.qZA()),2&n&&t.Q6J("@route",i.getChildRouteAnimationId())},dependencies:[m.lC,C,I],styles:["[_nghost-%COMP%]{display:contents}.wrapper[_ngcontent-%COMP%]{display:contents}"],data:{animation:[(0,u.X$)("route",[(0,u.eR)("list => detail",[(0,u.IO)(":leave",[(0,u.jt)("500ms")])])])]},changeDetection:0}),e})(),title:(()=>{class e{resolve(n){return n.params.mailboxName}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=t.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),children:[{path:"",component:Qt,data:{animationId:"list"}},{path:":mailId",component:dt,data:{animationId:"detail"}}]}];let Jt=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[m.Bz.forChild(kt),m.Bz]}),e})(),Et=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[p.ez,Jt,g.ot,h.si,v.Ps,tt.r,q.Cl,S.P,_.S]}),e})()}}]);