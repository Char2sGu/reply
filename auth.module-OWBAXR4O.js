import{a as Re,b as Fe}from"./chunk-W76OJUUD.js";import{a as Xe,b as H}from"./chunk-VDY3TAVN.js";import"./chunk-CAKSPPV6.js";import{a as Y}from"./chunk-YIXMBH62.js";import{a as $}from"./chunk-X5PYH2NV.js";import{f as W,k as De,l as G}from"./chunk-FKHCC5JH.js";import{a as Ne,b as Ve,d as je,e as Be,f as qe,g as Ue}from"./chunk-MO5QYGRS.js";import{d as ze}from"./chunk-DZA5LO2U.js";import{i as Le}from"./chunk-NKPKU52J.js";import{$b as Ce,Aa as S,Ab as be,Ba as w,Bb as ge,Ca as p,Cb as fe,Da as a,Db as _e,Ea as n,Fa as s,Gb as xe,Hb as U,Ja as he,Jc as O,K as P,La as A,Lc as Ae,M as D,N as v,Na as I,Ob as ve,Q as f,Qc as Ee,R as Z,Rb as ye,Sa as R,Ta as N,U as ne,V as k,Va as d,Wa as pe,Wc as Te,X as m,Xa as ke,Xb as X,Y as u,Z as b,a as oe,da as ae,dd as Se,ea as de,eb as V,ed as Oe,fa as T,fb as j,fd as we,hb as _,hd as Ie,j as C,ja as se,m as g,ma as me,na as le,pa as z,pd as Pe,ra as l,rb as B,sc as Me,t as F,tb as q,ua as h,ud as J,v as K,wb as ue,xa as L,y as re,za as M}from"./chunk-3QVC2YGB.js";import"./chunk-OIPWLAE3.js";var ee=(()=>{let e=class{},c=e;return(()=>{e.\u0275fac=function(i){return new(i||e)}})(),(()=>{e.\u0275mod=b({type:e})})(),(()=>{e.\u0275inj=k({})})(),c})();var We=(()=>{let e=class{},c=e;return(()=>{e.\u0275fac=function(i){return new(i||e)}})(),(()=>{e.\u0275mod=b({type:e})})(),(()=>{e.\u0275inj=k({imports:[Te,O,Ce,ee,O,ee]})})(),c})();var Ge=new se("mat-progress-spinner-default-options",{providedIn:"root",factory:dt});function dt(){return{diameter:st}}var st=100;function mt(c,e){if(c&1&&(T(),s(0,"circle",4)),c&2){let o=I(),t=w(1);R("animation-name","mat-progress-spinner-stroke-rotate-"+o._spinnerAnimationLabel)("stroke-dashoffset",o._getStrokeDashOffset(),"px")("stroke-dasharray",o._getStrokeCircumference(),"px")("stroke-width",o._getCircleStrokeWidth(),"%")("transform-origin",o._getCircleTransformOrigin(t)),M("r",o._getCircleRadius())}}function lt(c,e){if(c&1&&(T(),s(0,"circle",4)),c&2){let o=I(),t=w(1);R("stroke-dashoffset",o._getStrokeDashOffset(),"px")("stroke-dasharray",o._getStrokeCircumference(),"px")("stroke-width",o._getCircleStrokeWidth(),"%")("transform-origin",o._getCircleTransformOrigin(t)),M("r",o._getCircleRadius())}}var $e=100,ht=10,pt=Ae(class{constructor(c){this._elementRef=c}},"primary"),kt=`
 @keyframes mat-progress-spinner-stroke-rotate-DIAMETER {
    0%      { stroke-dashoffset: START_VALUE;  transform: rotate(0); }
    12.5%   { stroke-dashoffset: END_VALUE;    transform: rotate(0); }
    12.5001%  { stroke-dashoffset: END_VALUE;    transform: rotateX(180deg) rotate(72.5deg); }
    25%     { stroke-dashoffset: START_VALUE;  transform: rotateX(180deg) rotate(72.5deg); }

    25.0001%   { stroke-dashoffset: START_VALUE;  transform: rotate(270deg); }
    37.5%   { stroke-dashoffset: END_VALUE;    transform: rotate(270deg); }
    37.5001%  { stroke-dashoffset: END_VALUE;    transform: rotateX(180deg) rotate(161.5deg); }
    50%     { stroke-dashoffset: START_VALUE;  transform: rotateX(180deg) rotate(161.5deg); }

    50.0001%  { stroke-dashoffset: START_VALUE;  transform: rotate(180deg); }
    62.5%   { stroke-dashoffset: END_VALUE;    transform: rotate(180deg); }
    62.5001%  { stroke-dashoffset: END_VALUE;    transform: rotateX(180deg) rotate(251.5deg); }
    75%     { stroke-dashoffset: START_VALUE;  transform: rotateX(180deg) rotate(251.5deg); }

    75.0001%  { stroke-dashoffset: START_VALUE;  transform: rotate(90deg); }
    87.5%   { stroke-dashoffset: END_VALUE;    transform: rotate(90deg); }
    87.5001%  { stroke-dashoffset: END_VALUE;    transform: rotateX(180deg) rotate(341.5deg); }
    100%    { stroke-dashoffset: START_VALUE;  transform: rotateX(180deg) rotate(341.5deg); }
  }
`,x=class extends pt{get diameter(){return this._diameter}set diameter(e){this._diameter=X(e),this._spinnerAnimationLabel=this._getSpinnerAnimationLabel(),this._styleRoot&&this._attachStyleNode()}get strokeWidth(){return this._strokeWidth||this.diameter/10}set strokeWidth(e){this._strokeWidth=X(e)}get value(){return this.mode==="determinate"?this._value:0}set value(e){this._value=Math.max(0,Math.min(100,X(e)))}constructor(e,o,t,i,r,E,te,ce,tt){super(e),this._document=t,this._nonce=tt,this._diameter=$e,this._value=0,this._resizeSubscription=oe.EMPTY,this.mode="determinate";let ie=x._diameters;this._spinnerAnimationLabel=this._getSpinnerAnimationLabel(),ie.has(t.head)||ie.set(t.head,new Set([$e])),this._noopAnimations=i==="NoopAnimations"&&!!r&&!r._forceAnimations,e.nativeElement.nodeName.toLowerCase()==="mat-spinner"&&(this.mode="indeterminate"),r&&(r.color&&(this.color=this.defaultColor=r.color),r.diameter&&(this.diameter=r.diameter),r.strokeWidth&&(this.strokeWidth=r.strokeWidth)),o.isBrowser&&o.SAFARI&&te&&E&&ce&&(this._resizeSubscription=te.change(150).subscribe(()=>{this.mode==="indeterminate"&&ce.run(()=>E.markForCheck())}))}ngOnInit(){let e=this._elementRef.nativeElement;this._styleRoot=ye(e)||this._document.head,this._attachStyleNode(),e.classList.add("mat-progress-spinner-indeterminate-animation")}ngOnDestroy(){this._resizeSubscription.unsubscribe()}_getCircleRadius(){return(this.diameter-ht)/2}_getViewBox(){let e=this._getCircleRadius()*2+this.strokeWidth;return`0 0 ${e} ${e}`}_getStrokeCircumference(){return 2*Math.PI*this._getCircleRadius()}_getStrokeDashOffset(){return this.mode==="determinate"?this._getStrokeCircumference()*(100-this._value)/100:null}_getCircleStrokeWidth(){return this.strokeWidth/this.diameter*100}_getCircleTransformOrigin(e){let o=(e.currentScale??1)*50;return`${o}% ${o}%`}_attachStyleNode(){let e=this._styleRoot,o=this._diameter,t=x._diameters,i=t.get(e);if(!i||!i.has(o)){let r=this._document.createElement("style");this._nonce&&(r.nonce=this._nonce),r.setAttribute("mat-spinner-animation",this._spinnerAnimationLabel),r.textContent=this._getAnimationText(),e.appendChild(r),i||(i=new Set,t.set(e,i)),i.add(o)}}_getAnimationText(){let e=this._getStrokeCircumference();return kt.replace(/START_VALUE/g,`${.95*e}`).replace(/END_VALUE/g,`${.2*e}`).replace(/DIAMETER/g,`${this._spinnerAnimationLabel}`)}_getSpinnerAnimationLabel(){return this.diameter.toString().replace(".","_")}},He=x;(()=>{x._diameters=new WeakMap})(),(()=>{x.\u0275fac=function(o){return new(o||x)(h(z),h(ve),h(ue,8),h(me,8),h(Ge),h(q),h(Me),h(B),h(le,8))}})(),(()=>{x.\u0275cmp=u({type:x,selectors:[["mat-progress-spinner"],["mat-spinner"]],hostAttrs:["role","progressbar","tabindex","-1",1,"mat-progress-spinner","mat-spinner"],hostVars:10,hostBindings:function(o,t){o&2&&(M("aria-valuemin",t.mode==="determinate"?0:null)("aria-valuemax",t.mode==="determinate"?100:null)("aria-valuenow",t.mode==="determinate"?t.value:null)("mode",t.mode),R("width",t.diameter,"px")("height",t.diameter,"px"),N("_mat-animation-noopable",t._noopAnimations))},inputs:{color:"color",diameter:"diameter",strokeWidth:"strokeWidth",mode:"mode",value:"value"},exportAs:["matProgressSpinner"],features:[L],decls:4,vars:8,consts:[["preserveAspectRatio","xMidYMid meet","focusable","false","aria-hidden","true",3,"ngSwitch"],["svg",""],["cx","50%","cy","50%",3,"animation-name","stroke-dashoffset","stroke-dasharray","stroke-width","transform-origin",4,"ngSwitchCase"],["cx","50%","cy","50%",3,"stroke-dashoffset","stroke-dasharray","stroke-width","transform-origin",4,"ngSwitchCase"],["cx","50%","cy","50%"]],template:function(o,t){o&1&&(T(),a(0,"svg",0,1),S(2,mt,1,11,"circle",2),S(3,lt,1,9,"circle",3),n()),o&2&&(R("width",t.diameter,"px")("height",t.diameter,"px"),p("ngSwitch",t.mode==="indeterminate"),M("viewBox",t._getViewBox()),l(2),p("ngSwitchCase",!0),l(1),p("ngSwitchCase",!1))},dependencies:[fe,_e],styles:[".mat-progress-spinner{display:block;position:relative;overflow:hidden}.mat-progress-spinner svg{position:absolute;transform:rotate(-90deg);top:0;left:0;transform-origin:center;overflow:visible}.mat-progress-spinner circle{fill:rgba(0,0,0,0);transition:stroke-dashoffset 225ms linear}.cdk-high-contrast-active .mat-progress-spinner circle{stroke:CanvasText}.mat-progress-spinner[mode=indeterminate] svg{animation:mat-progress-spinner-linear-rotate 2000ms linear infinite}.mat-progress-spinner[mode=indeterminate] circle{transition-property:stroke;animation-duration:4000ms;animation-timing-function:cubic-bezier(0.35, 0, 0.25, 1);animation-iteration-count:infinite}.mat-progress-spinner._mat-animation-noopable svg,.mat-progress-spinner._mat-animation-noopable circle{animation:none;transition:none}@keyframes mat-progress-spinner-linear-rotate{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}@keyframes mat-progress-spinner-stroke-rotate-100{0%{stroke-dashoffset:268.606171575px;transform:rotate(0)}12.5%{stroke-dashoffset:56.5486677px;transform:rotate(0)}12.5001%{stroke-dashoffset:56.5486677px;transform:rotateX(180deg) rotate(72.5deg)}25%{stroke-dashoffset:268.606171575px;transform:rotateX(180deg) rotate(72.5deg)}25.0001%{stroke-dashoffset:268.606171575px;transform:rotate(270deg)}37.5%{stroke-dashoffset:56.5486677px;transform:rotate(270deg)}37.5001%{stroke-dashoffset:56.5486677px;transform:rotateX(180deg) rotate(161.5deg)}50%{stroke-dashoffset:268.606171575px;transform:rotateX(180deg) rotate(161.5deg)}50.0001%{stroke-dashoffset:268.606171575px;transform:rotate(180deg)}62.5%{stroke-dashoffset:56.5486677px;transform:rotate(180deg)}62.5001%{stroke-dashoffset:56.5486677px;transform:rotateX(180deg) rotate(251.5deg)}75%{stroke-dashoffset:268.606171575px;transform:rotateX(180deg) rotate(251.5deg)}75.0001%{stroke-dashoffset:268.606171575px;transform:rotate(90deg)}87.5%{stroke-dashoffset:56.5486677px;transform:rotate(90deg)}87.5001%{stroke-dashoffset:56.5486677px;transform:rotateX(180deg) rotate(341.5deg)}100%{stroke-dashoffset:268.606171575px;transform:rotateX(180deg) rotate(341.5deg)}}"],encapsulation:2,changeDetection:0})})();var Qe=(()=>{let e=class{},c=e;return(()=>{e.\u0275fac=function(i){return new(i||e)}})(),(()=>{e.\u0275mod=b({type:e})})(),(()=>{e.\u0275inj=k({imports:[O,U,O]})})(),c})();var Ke=(()=>{let e=class{},c=e;return(()=>{e.\u0275fac=function(i){return new(i||e)}})(),(()=>{e.\u0275cmp=u({type:e,selectors:[["rpl-auth"]],decls:9,vars:0,consts:[[1,"positioner"],["data-route-animation-target","",1,"container"],[1,"main"],[1,"header"],[1,"logo"],[1,"body"],[1,"decoration"]],template:function(i,r){i&1&&(a(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),s(4,"rpl-logo",4)(5,"rpl-text-logo"),n(),a(6,"div",5),s(7,"router-outlet"),n()(),s(8,"div",6),n()())},dependencies:[Pe,$,Y],styles:["[_nghost-%COMP%]{display:contents}[_nghost-%COMP%]   .positioner[_ngcontent-%COMP%]{grid-row:1;grid-column:margin-left/margin-right;display:flex;flex-direction:column;justify-content:center}[_nghost-%COMP%]   .container[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:100%;align-items:stretch;background:var(--color-surface)}[_nghost-%COMP%]   .main[_ngcontent-%COMP%]{order:2;flex:1;display:flex;flex-direction:column;align-items:stretch;background:var(--color-primary)}[_nghost-%COMP%]   .main[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]{display:none}[_nghost-%COMP%]   .main[_ngcontent-%COMP%]   .body[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column;align-items:center;padding:0 8px 16px;overflow:hidden}[_nghost-%COMP%]   .decoration[_ngcontent-%COMP%]{order:1;height:240px;background-image:url(./reply-overview.V6AXGEZG.png);background-size:100% auto;background-repeat:no-repeat}.tablet-portrait[_nghost-%COMP%]   .container[_ngcontent-%COMP%], .tablet-portrait   [_nghost-%COMP%]   .container[_ngcontent-%COMP%]{flex-direction:row}.tablet-portrait[_nghost-%COMP%]   .main[_ngcontent-%COMP%], .tablet-portrait   [_nghost-%COMP%]   .main[_ngcontent-%COMP%]{order:1;flex:none;width:384px}.tablet-portrait[_nghost-%COMP%]   .main[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%], .tablet-portrait   [_nghost-%COMP%]   .main[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]{display:flex;align-items:center;gap:16px;padding:24px;color:var(--color-on-primary)}.tablet-portrait[_nghost-%COMP%]   .main[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%], .tablet-portrait   [_nghost-%COMP%]   .main[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]{height:32px}.tablet-portrait[_nghost-%COMP%]   .decoration[_ngcontent-%COMP%], .tablet-portrait   [_nghost-%COMP%]   .decoration[_ngcontent-%COMP%]{order:2;flex:1;height:100%;background-size:auto 100%}.laptop[_nghost-%COMP%]   .positioner[_ngcontent-%COMP%], .laptop   [_nghost-%COMP%]   .positioner[_ngcontent-%COMP%]{grid-column:col-3/col-10}.laptop[_nghost-%COMP%]   .container[_ngcontent-%COMP%], .laptop   [_nghost-%COMP%]   .container[_ngcontent-%COMP%]{height:72%}"],changeDetection:0})})(),c})();var Q=(()=>{let e=class{constructor(){this.backend=m(Re),this.authService=m(De)}requestAuthorization(t){return this.backend.requestAuthorization(t).pipe(g(i=>this.authService.setAuthorization(i)),re(i=>{if(i instanceof Fe)return C(!1);throw i}))}revokeAuthorization(){return this.authService.authorization$.pipe(v(t=>t?this.backend.revokeAuthorization(t):C(void 0)),f(()=>this.authService.setAuthorization(null)))}},c=e;return(()=>{e.\u0275fac=function(i){return new(i||e)}})(),(()=>{e.\u0275prov=ne({token:e,factory:e.\u0275fac,providedIn:"root"})})(),c})();var Ze=(()=>{let e=class{constructor(){this.authService=m(G),this.authConductor=m(Q),this.buttonClick=new _,this.requestAuthorization=new _,this.requestAuthorizationResult=new _,this.busy$=this.authService.authorized$.pipe(v(t=>t?C(!0):F(this.requestAuthorization.pipe(g(()=>!0)),this.requestAuthorizationResult.pipe(g(()=>!1)))),D(!1),P(1)),this.buttonClick.pipe(f(()=>this.requestAuthorization.emit())).subscribe(),this.requestAuthorization.pipe(v(()=>this.authConductor.requestAuthorization()),f(t=>this.requestAuthorizationResult.emit(t))).subscribe()}},c=e;return(()=>{e.\u0275fac=function(i){return new(i||e)}})(),(()=>{e.\u0275cmp=u({type:e,selectors:[["rpl-auth-no-account"]],decls:18,vars:3,consts:[[1,"text"],["href","https://github.com/TheNightmareX/reply"],["href","https://m2.material.io/design/material-studies/reply.html"],["mat-flat-button","","color","accent",1,"action",3,"disabled","click"]],template:function(i,r){i&1&&(a(0,"div",0)(1,"p")(2,"a",1),d(3,"Reply"),n(),d(4," is an open source Gmail web client inspired by the "),a(5,"a",2),d(6,'"Reply"'),n(),d(7," Material Design example by Google. "),n(),a(8,"p"),d(9,` This application is completely client-side, which means that there doesn't exist a "backend" and the data will be fetched directly from Google and stored in your local browser. `),n(),a(10,"p"),d(11," To continue, permission of "),a(12,"b"),d(13,"full control"),n(),d(14," of your Gmail data needs to be authorized. The developer is not responsible for any data damage caused by the use of this application. "),n()(),a(15,"button",3),A("click",function(){return r.buttonClick.emit()}),V(16,"async"),d(17,` Continue
`),n()),i&2&&(l(15),p("disabled",j(16,1,r.busy$)))},dependencies:[we,xe],styles:["[_nghost-%COMP%]{display:flex;width:288px;height:392px;flex-direction:column;padding:48px 0}.tablet-portrait   [_nghost-%COMP%]{padding:16px 0}.text[_ngcontent-%COMP%]{flex:1;color:var(--color-on-primary-1)}.text[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:underline}.action[_ngcontent-%COMP%]{text-transform:uppercase}"],changeDetection:0})})(),c})();function ut(c,e){c&1&&s(0,"mat-divider",8)}function bt(c,e){if(c&1){let o=he();a(0,"button",3),A("click",function(){let r=ae(o).$implicit,E=I();return de(E.itemButtonClick.emit(r))}),s(1,"mat-icon",6),a(2,"div",5),d(3),n(),a(4,"div",5),d(5),V(6,"dateDistance"),n(),S(7,ut,1,0,"mat-divider",7),n()}if(c&2){let o=e.$implicit,t=e.index,i=e.last;l(3),pe(o.id),l(2),ke(" ",t===0?"Last used account":j(6,3,o.authorizedAt)," "),l(2),p("ngIf",!i)}}var Je=(()=>{let e=class{constructor(){this.accountRepo=m(W),this.authService=m(G),this.authConductor=m(Q),this.itemButtonClick=new _,this.addButtonClick=new _,this.requestAuthorization=new _,this.requestAuthorizationResult=new _,this.busy$=this.authService.authorized$.pipe(v(t=>t?C(!0):F(this.requestAuthorization.pipe(g(()=>!0)),this.requestAuthorizationResult.pipe(g(()=>!1)))),D(!1),P(1)),this.accounts=ze(this.queryAccountsAndSort(),{requireSync:!0}),this.itemButtonClick.pipe(Z(this.busy$),K(([,t])=>!t),f(([t])=>this.requestAuthorization.emit(t.id))).subscribe(),this.addButtonClick.pipe(Z(this.busy$),K(([,t])=>!t),f(()=>this.requestAuthorization.emit(void 0))).subscribe(),this.requestAuthorization.pipe(v(t=>this.authConductor.requestAuthorization(t)),f(t=>this.requestAuthorizationResult.emit(t))).subscribe()}queryAccountsAndSort(){return this.accountRepo.query().pipe(g(t=>t.sort((i,r)=>r.authorizedAt.getTime()-i.authorizedAt.getTime())))}},c=e;return(()=>{e.\u0275fac=function(i){return new(i||e)}})(),(()=>{e.\u0275cmp=u({type:e,selectors:[["rpl-auth-select-account"]],decls:10,vars:1,consts:[[1,"account-list"],["mat-list-item","",3,"click",4,"ngFor","ngForOf"],[1,"action-list"],["mat-list-item","",3,"click"],["matListIcon","","fontSet","filled","fontIcon","add"],["matLine",""],["matListIcon","","fontSet","filled","fontIcon","mail_outlined"],["class","divider","inset","",4,"ngIf"],["inset","",1,"divider"]],template:function(i,r){i&1&&(a(0,"rpl-scrollable-area",0)(1,"mat-action-list"),S(2,bt,8,5,"button",1),n()(),a(3,"mat-action-list",2)(4,"button",3),A("click",function(){return r.addButtonClick.emit()}),s(5,"mat-icon",4),a(6,"div",5),d(7,"Add account"),n(),a(8,"div",5),d(9,"Grant access to your data to Reply"),n()()()),i&2&&(l(2),p("ngForOf",r.accounts()))},dependencies:[be,ge,je,qe,Ee,Be,Ne,Se,H,Xe],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;width:100%;height:100%;padding:16px 0}.tablet-portrait   [_nghost-%COMP%]{padding:0}.account-list[_ngcontent-%COMP%]{flex:1;overflow:auto}mat-action-list[_ngcontent-%COMP%]{padding:initial}mat-action-list[_ngcontent-%COMP%]   [mat-list-item][_ngcontent-%COMP%]{color:var(--color-on-primary-1)}mat-action-list[_ngcontent-%COMP%]   [mat-list-item][_ngcontent-%COMP%]   [matLine][_ngcontent-%COMP%]:nth-child(2){color:var(--color-on-primary-2)}mat-action-list[_ngcontent-%COMP%]   [mat-list-item][_ngcontent-%COMP%]   mat-divider[_ngcontent-%COMP%]{border-top-color:var(--color-on-primary-9)}"],changeDetection:0})})(),c})();var ft=()=>!!m(W).query().snapshot.length,_t=[{path:"",component:Ke,children:[{path:"",canMatch:[ft],component:Je},{path:"",component:Ze}]}],et=(()=>{let e=class{},c=e;return(()=>{e.\u0275fac=function(i){return new(i||e)}})(),(()=>{e.\u0275mod=b({type:e})})(),(()=>{e.\u0275inj=k({imports:[J.forChild(_t),J]})})(),c})();var bi=(()=>{let e=class{},c=e;return(()=>{e.\u0275fac=function(i){return new(i||e)}})(),(()=>{e.\u0275mod=b({type:e})})(),(()=>{e.\u0275inj=k({imports:[U,Le,et,We,Ie,Qe,Ue,Ve,Oe,$,Y,H]})})(),c})();export{bi as AuthModule};
