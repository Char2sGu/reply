"use strict";(self.webpackChunkreply=self.webpackChunkreply||[]).push([[730],{5730:(G,g,o)=>{o.r(g),o.d(g,{SearchModule:()=>Y});var l=o(6895),c=o(4006),m=o(4859),f=o(7676),p=o(7392),e=(o(3353),o(4650));let v=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({}),i})();var _=o(3238);let S=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({providers:[_.rD],imports:[v,f.lN,_.BQ,v,f.lN]}),i})();var u=o(4633),x=o(1012),y=o(3786),h=o(9132),C=o(1135),T=o(7272),F=o(590),R=o(8372),M=o(4004),b=o(3900),w=o(2682),H=o(9902),L=o(1764),E=o.n(L),O=o(3661);let N=(()=>{class i{constructor(t){this.contactService=t}transform(t){return this.contactService.getContact$ById(t)}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(O.y,16))},i.\u0275pipe=e.Yjl({name:"contactRef",type:i,pure:!0,standalone:!0}),i})();var k=o(6752);function P(i,n){if(1&i&&(e.TgZ(0,"a",4),e._UZ(1,"mat-icon",5),e.TgZ(2,"div",6),e._uU(3),e.qZA(),e.TgZ(4,"div",6)(5,"span"),e._uU(6),e.ALo(7,"async"),e.ALo(8,"contactRef"),e.qZA(),e._uU(9," - "),e.TgZ(10,"span"),e._uU(11),e.ALo(12,"readableDate"),e.qZA()()()),2&i){const t=n.$implicit;let s;e.hYB("routerLink","/mailboxes/",t.mailboxName,"/mails/",t.id,""),e.xp6(3),e.Oqu(t.subject),e.xp6(3),e.Oqu(null==(s=e.lcZ(7,5,e.lcZ(8,7,t.sender)))?null:s.name),e.xp6(5),e.Oqu(e.lcZ(12,9,t.sentAt))}}function B(i,n){if(1&i&&(e.ynx(0),e.TgZ(1,"div",2),e._uU(2),e.qZA(),e.YNc(3,P,13,11,"a",3),e.BQk()),2&i){const t=e.oxw().$implicit;e.xp6(2),e.Oqu(t.name),e.xp6(1),e.Q6J("ngForOf",t.items)}}function Z(i,n){if(1&i&&(e.ynx(0),e.YNc(1,B,4,2,"ng-container",0),e.BQk()),2&i){const t=n.$implicit;e.xp6(1),e.Q6J("ngIf",t.items.length)}}function D(i,n){if(1&i&&(e.TgZ(0,"mat-nav-list"),e.YNc(1,Z,2,1,"ng-container",1),e.qZA()),2&i){const t=n.ngIf;e.xp6(1),e.Q6J("ngForOf",t)}}let j=(()=>{class i{constructor(){this.mails$=new C.X([])}set mails(t){this.mails$.next(t)}ngOnInit(){this.mailsGroups$=this.mails$.pipe((0,M.U)(t=>{const s={Yesterday:[],"This Week":[],Earlier:[]};return t.forEach(r=>{E()().subtract(1,"day").isBefore(r.sentAt)?s.Yesterday.push(r):E()().subtract(1,"week").isBefore(r.sentAt)?s["This Week"].push(r):s.Earlier.push(r)}),[{name:"Yesterday",items:s.Yesterday},{name:"This Week",items:s["This Week"]},{name:"Earlier",items:s.Earlier}]}))}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=e.Xpm({type:i,selectors:[["rpl-search-result-list"]],inputs:{mails:"mails"},decls:2,vars:3,consts:[[4,"ngIf"],[4,"ngFor","ngForOf"],[1,"subheader"],["mat-list-item","",3,"routerLink",4,"ngFor","ngForOf"],["mat-list-item","",3,"routerLink"],["matListIcon","","fontSet","filled","fontIcon","schedule"],["matLine",""]],template:function(t,s){1&t&&(e.YNc(0,D,2,1,"mat-nav-list",0),e.ALo(1,"async")),2&t&&e.Q6J("ngIf",e.lcZ(1,1,s.mailsGroups$))},dependencies:[l.sg,l.O5,h.yS,p.Hw,u.Hk,u.Tg,_.X2,u.Nh,l.Ov,N,k.G],styles:[".subheader[_ngcontent-%COMP%]{margin:12px 20px;text-transform:uppercase}"],changeDetection:0}),i})();function z(i,n){if(1&i){const t=e.EpF();e.ynx(0),e.TgZ(1,"rpl-header",1)(2,"a",2),e._UZ(3,"mat-icon",3),e.qZA(),e.TgZ(4,"input",4),e.NdJ("ngModelChange",function(r){e.CHM(t);const a=e.oxw(2);return e.KtG(a.searchText$.next(r))}),e.qZA(),e.TgZ(5,"button",5),e._UZ(6,"mat-icon",6),e.qZA()(),e.TgZ(7,"rpl-content",7),e._UZ(8,"rpl-search-result-list",8),e.qZA(),e.BQk()}if(2&i){const t=n.ngIf,s=e.oxw().ngIf,r=e.oxw();let a;e.xp6(2),e.Q6J("routerLink",null!==(a=s.latestMailboxUrl)&&void 0!==a?a:"/"),e.xp6(2),e.Q6J("ngModel",r.searchText$.value),e.xp6(4),e.Q6J("mails",t)}}function V(i,n){if(1&i&&(e.ynx(0),e.YNc(1,z,9,3,"ng-container",0),e.ALo(2,"async"),e.BQk()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",e.lcZ(2,1,t.mails$))}}const U=[{path:"",component:(()=>{class i{constructor(t,s){this.navigationContext=t,this.mailService=s,this.searchText$=new C.X("")}ngOnInit(){this.mails$=(0,T.z)(this.searchText$.pipe((0,F.P)()),this.searchText$.pipe((0,R.b)(200))).pipe((0,M.U)(t=>t.split(" ")),(0,b.w)(t=>this.mailService.getMails$ByKeywords(t)))}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(w.k),e.Y36(H.Y))},i.\u0275cmp=e.Xpm({type:i,selectors:[["rpl-search"]],decls:2,vars:3,consts:[[4,"ngIf"],["ngForm","",1,"search-bar"],["mat-icon-button","",3,"routerLink"],["fontSet","filled","fontIcon","arrow_back"],["name","search","type","text","placeholder","Search emails",3,"ngModel","ngModelChange"],["mat-icon-button",""],["fontSet","filled","fontIcon","mic"],[1,"search-result"],[3,"mails"]],template:function(t,s){1&t&&(e.YNc(0,V,3,3,"ng-container",0),e.ALo(1,"async")),2&t&&e.Q6J("ngIf",e.lcZ(1,1,s.navigationContext.value$))},dependencies:[l.O5,c.Fj,c.JJ,c.JL,c.On,c.F,h.yS,m.lW,m.zs,p.Hw,x.S,y.G,j,l.Ov],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;height:100%}.search-bar[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:0;flex-grow:1;font:400 18px/24px Work Sans,sans-serif;letter-spacing:normal}.search-result[_ngcontent-%COMP%]{height:0;flex-grow:1}"],changeDetection:0}),i})(),title:"Search",data:{animationId:"search"}}];let $=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[h.Bz.forChild(U),h.Bz]}),i})(),Y=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[l.ez,c.u5,$,m.ot,p.Ps,f.lN,S,u.ie,x.S,y.G]}),i})()}}]);