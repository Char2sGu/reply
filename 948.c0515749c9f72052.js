"use strict";(self.webpackChunkreply=self.webpackChunkreply||[]).push([[948],{8948:(U,x,s)=>{s.r(x),s.d(x,{SearchModule:()=>J});var l=s(6895),c=s(4006),d=s(7392),m=s(9818),f=s(8455),e=s(4650);let v=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({}),n})();var g=s(3238);let F=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({providers:[g.rD],imports:[v,f.wp,g.BQ,v,f.wp]}),n})();var u=s(2903),_=s(1012),y=s(3786),h=s(9132),M=s(1135),T=s(7272),R=s(590),E=s(8372),C=s(4004),H=s(3900),I=s(2682),w=s(1889),A=s(6909),S=s(4386);let Z=(()=>{class n{constructor(t){this.contactRepo=t}transform(t){return this.contactRepo.retrieve(t)}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(S.m,16))},n.\u0275pipe=e.Yjl({name:"contactRef",type:n,pure:!0,standalone:!0}),n})();var k=s(6752);function O(n,i){if(1&n&&(e.TgZ(0,"a",4),e._UZ(1,"mat-icon",5),e.TgZ(2,"div",6),e._uU(3),e.qZA(),e.TgZ(4,"div",6)(5,"span"),e._uU(6),e.ALo(7,"async"),e.ALo(8,"contactRef"),e.qZA(),e._uU(9," - "),e.TgZ(10,"span"),e._uU(11),e.ALo(12,"readableDate"),e.qZA()()()),2&n){const t=i.$implicit;let o;e.hYB("routerLink","/mailboxes/",t.mailboxName,"/mails/",t.id,""),e.xp6(3),e.Oqu(t.subject),e.xp6(3),e.Oqu(null==(o=e.lcZ(7,5,e.lcZ(8,7,t.sender)))?null:o.name),e.xp6(5),e.Oqu(e.lcZ(12,9,t.sentAt))}}function B(n,i){if(1&n&&(e.ynx(0),e.TgZ(1,"div",2),e._uU(2),e.qZA(),e.YNc(3,O,13,11,"a",3),e.BQk()),2&n){const t=e.oxw().$implicit;e.xp6(2),e.Oqu(t.name),e.xp6(1),e.Q6J("ngForOf",t.items)}}function P(n,i){if(1&n&&(e.ynx(0),e.YNc(1,B,4,2,"ng-container",0),e.BQk()),2&n){const t=i.$implicit;e.xp6(1),e.Q6J("ngIf",t.items.length)}}function z(n,i){if(1&n&&(e.TgZ(0,"mat-nav-list"),e.YNc(1,P,2,1,"ng-container",1),e.qZA()),2&n){const t=i.ngIf;e.xp6(1),e.Q6J("ngForOf",t)}}let b=(()=>{class n{set mails(t){this.mails$.next(t)}constructor(){this.mails$=new M.X([])}ngOnInit(){this.mailsGroups$=this.mails$.pipe((0,C.U)(t=>{const o={Yesterday:[],"This Week":[],Earlier:[]};return t.forEach(a=>{(0,A.Z)().subtract(1,"day").isBefore(a.sentAt)?o.Yesterday.push(a):(0,A.Z)().subtract(1,"week").isBefore(a.sentAt)?o["This Week"].push(a):o.Earlier.push(a)}),[{name:"Yesterday",items:o.Yesterday},{name:"This Week",items:o["This Week"]},{name:"Earlier",items:o.Earlier}]}))}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=e.Xpm({type:n,selectors:[["rpl-search-result-list"]],inputs:{mails:"mails"},decls:2,vars:3,consts:[[4,"ngIf"],[4,"ngFor","ngForOf"],[1,"subheader"],["mat-list-item","",3,"routerLink",4,"ngFor","ngForOf"],["mat-list-item","",3,"routerLink"],["matListIcon","","fontSet","filled","fontIcon","schedule"],["matLine",""]],template:function(t,o){1&t&&(e.YNc(0,z,2,1,"mat-nav-list",0),e.ALo(1,"async")),2&t&&e.Q6J("ngIf",e.lcZ(1,1,o.mailsGroups$))},dependencies:[l.sg,l.O5,h.rH,d.Hw,u.U,u.oh,g.X2,u.ap,l.Ov,Z,k.G],styles:[".subheader[_ngcontent-%COMP%]{margin:12px 20px;text-transform:uppercase}"],changeDetection:0}),n})();function D(n,i){if(1&n){const t=e.EpF();e.ynx(0),e.TgZ(1,"rpl-header",1)(2,"a",2),e._UZ(3,"mat-icon",3),e.qZA(),e.TgZ(4,"input",4),e.NdJ("ngModelChange",function(a){e.CHM(t);const r=e.oxw(2);return e.KtG(r.searchText$.next(a))}),e.qZA(),e.TgZ(5,"button",5),e._UZ(6,"mat-icon",6),e.qZA()(),e.TgZ(7,"rpl-content",7),e._UZ(8,"rpl-search-result-list",8),e.qZA(),e.BQk()}if(2&n){const t=i.ngIf,o=e.oxw().ngIf,a=e.oxw();let r;e.xp6(2),e.Q6J("routerLink",null!==(r=o.latestMailboxUrl)&&void 0!==r?r:"/"),e.xp6(2),e.Q6J("ngModel",a.searchText$.value),e.xp6(4),e.Q6J("mails",t)}}function j(n,i){if(1&n&&(e.ynx(0),e.YNc(1,D,9,3,"ng-container",0),e.ALo(2,"async"),e.BQk()),2&n){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",e.lcZ(2,1,t.mails$))}}const N=[{path:"",component:(()=>{class n{constructor(t,o){this.navigationContext=t,this.mailRepo=o,this.searchText$=new M.X("")}ngOnInit(){this.mails$=(0,T.z)(this.searchText$.pipe((0,R.P)()),this.searchText$.pipe((0,E.b)(200))).pipe((0,C.U)(t=>t.split(" ")),(0,H.w)(t=>this.mailRepo.listByKeywords(t)))}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(I.k),e.Y36(w.w))},n.\u0275cmp=e.Xpm({type:n,selectors:[["rpl-search"]],decls:2,vars:3,consts:[[4,"ngIf"],["ngForm","",1,"search-bar"],["mat-icon-button","",3,"routerLink"],["fontSet","filled","fontIcon","arrow_back"],["name","search","type","text","placeholder","Search emails",3,"ngModel","ngModelChange"],["mat-icon-button",""],["fontSet","filled","fontIcon","mic"],[1,"search-result"],[3,"mails"]],template:function(t,o){1&t&&(e.YNc(0,j,3,3,"ng-container",0),e.ALo(1,"async")),2&t&&e.Q6J("ngIf",e.lcZ(1,1,o.navigationContext.value$))},dependencies:[l.O5,c.Fj,c.JJ,c.JL,c.On,c.F,h.rH,m.eB,m.Nr,d.Hw,_.S,y.G,b,l.Ov],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;height:100%}.search-bar[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:0;flex-grow:1;font:400 18px/24px Work Sans,sans-serif;letter-spacing:normal}.search-result[_ngcontent-%COMP%]{height:0;flex-grow:1}"],changeDetection:0}),n})(),title:"Search",data:{animationId:"search"}}];let $=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[h.Bz.forChild(N),h.Bz]}),n})(),J=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[l.ez,c.u5,$,m.yu,d.Ps,f.wp,F,u.gR,_.S,y.G]}),n})()}}]);