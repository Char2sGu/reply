import{b as Ii,c as Pi,d as Di,e as Ue,f as wi,g as Ri,i as Oi,j as Ti,l as ki}from"./chunk-XNJQK6I7.js";import{a as _e,b as Me,c as ye}from"./chunk-HEOSXQPU.js";import{b as Rt}from"./chunk-AU4JPHGC.js";import{c as Vi}from"./chunk-YA3EPBC6.js";import{a as he,b as Wi,c as ge,d as Zi,e as tn,f as Yt}from"./chunk-3XHZALXV.js";import{a as Ai,b as Qe,c as Ei,d as Qt,e as Li,f as Fi,g as H,h as Ni,i as ji,j as Bi,k as F,l as $i,q as qe,s as ct}from"./chunk-2RQBRIQY.js";import"./chunk-ZMQYB2K7.js";import{a as Ki,b as mt}from"./chunk-YEIXP5GM.js";import{d as qi,f as zi,g as Gi}from"./chunk-DIVIKHCZ.js";import{b as fe,c as Qi,d as Yi}from"./chunk-NOLSZMK5.js";import{a as W,b as Xi,c as K,d as Ji}from"./chunk-GXODNAUO.js";import{b as _i,f as Mi,i as le,l as $e,m as st,n as lt}from"./chunk-U2U3BLDG.js";import"./chunk-OPXFRAQS.js";import{$a as ai,Aa as l,B as _t,Ba as p,Bc as ce,Ca as u,Cc as vi,Da as h,Dc as bi,Ea as w,Eb as $,F as N,Fa as R,Fb as Y,Fc as gt,G as Ee,Ga as ni,Ha as J,Hc as me,I as Mt,Ic as Ci,Ja as I,K as ie,Kc as xi,L as M,La as f,M as it,Ma as $t,Na as bt,Nb as mi,Oa as tt,Ra as Ct,S as k,T as ut,Ta as C,Tb as pi,Tc as St,U as ti,Ua as z,Ub as je,Uc as Ut,V as s,Va as E,W as g,X as dt,Y as Bt,Ya as oi,Z as yt,Za as ae,_a as xt,a as Kt,aa as ei,ab as ri,ba as j,bd as V,c as ke,ca as B,cb as v,cd as pe,d as pt,da as ne,db as P,dd as X,ea as vt,eb as at,ec as ui,ed as Si,f as Zt,fb as L,fd as ue,g as Ae,gb as si,ha as ft,hb as Fe,hc as di,hd as Hi,ib as It,ic as fi,j as et,jb as O,kb as A,kc as Be,kd as de,l as Jt,lb as re,m as _,mb as T,mc as hi,n as te,na as nt,nb as Vt,od as Ui,pa as c,pb as Ht,pd as wt,qd as Ye,ra as Le,rb as ht,rc as gi,sa as b,t as Q,tc as Pt,ub as li,uc as Dt,v as x,va as ot,vc as Ve,wa as ii,wb as Ne,wc as G,x as jt,xa as Z,xb as ci,xc as He,ya as d,yb as se,yc as rt,z as ee,za as oe,zb as D,zc as yi}from"./chunk-GLFUZ6DN.js";import{a as Je,f as Te}from"./chunk-OPXGAHDX.js";var Qn=["mat-menu-item",""];function Yn(o,i){o&1&&(ne(),p(0,"svg",3),h(1,"polygon",4),u())}var qn=[[["mat-icon"],["","matMenuItemIcon",""]],"*"],zn=["mat-icon, [matMenuItemIcon]","*"];var ve=new ft("MAT_MENU_PANEL"),Gn=xi(Ci(class{})),Tt=(()=>{let i=class extends Gn{constructor(t,e,n,a,m){super(),this._elementRef=t,this._document=e,this._focusMonitor=n,this._parentMenu=a,this._changeDetectorRef=m,this.role="menuitem",this._hovered=new pt,this._focused=new pt,this._highlighted=!1,this._triggersSubmenu=!1,a?.addItem?.(this)}focus(t,e){this._focusMonitor&&t?this._focusMonitor.focusVia(this._getHostElement(),t,e):this._getHostElement().focus(e),this._focused.next(this)}ngAfterViewInit(){this._focusMonitor&&this._focusMonitor.monitor(this._elementRef,!1)}ngOnDestroy(){this._focusMonitor&&this._focusMonitor.stopMonitoring(this._elementRef),this._parentMenu&&this._parentMenu.removeItem&&this._parentMenu.removeItem(this),this._hovered.complete(),this._focused.complete()}_getTabIndex(){return this.disabled?"-1":"0"}_getHostElement(){return this._elementRef.nativeElement}_checkDisabled(t){this.disabled&&(t.preventDefault(),t.stopPropagation())}_handleMouseEnter(){this._hovered.next(this)}getLabel(){let t=this._elementRef.nativeElement.cloneNode(!0),e=t.querySelectorAll("mat-icon, .material-icons");for(let n=0;n<e.length;n++)e[n].remove();return t.textContent?.trim()||""}_setHighlighted(t){this._highlighted=t,this._changeDetectorRef?.markForCheck()}_setTriggersSubmenu(t){this._triggersSubmenu=t,this._changeDetectorRef?.markForCheck()}_hasFocus(){return this._document&&this._document.activeElement===this._getHostElement()}},o=i;return(()=>{i.\u0275fac=function(e){return new(e||i)(b(nt),b(li),b(Be),b(ve,8),b(ht))}})(),(()=>{i.\u0275cmp=g({type:i,selectors:[["","mat-menu-item",""]],hostAttrs:[1,"mat-mdc-menu-item","mat-mdc-focus-indicator","mdc-list-item"],hostVars:8,hostBindings:function(e,n){e&1&&I("click",function(m){return n._checkDisabled(m)})("mouseenter",function(){return n._handleMouseEnter()}),e&2&&(Z("role",n.role)("tabindex",n._getTabIndex())("aria-disabled",n.disabled)("disabled",n.disabled||null),Ct("mat-mdc-menu-item-highlighted",n._highlighted)("mat-mdc-menu-item-submenu-trigger",n._triggersSubmenu))},inputs:{disabled:"disabled",disableRipple:"disableRipple",role:"role"},exportAs:["matMenuItem"],features:[ot],attrs:Qn,ngContentSelectors:zn,decls:5,vars:3,consts:[[1,"mdc-list-item__primary-text"],["matRipple","",1,"mat-mdc-menu-ripple",3,"matRippleDisabled","matRippleTrigger"],["class","mat-mdc-menu-submenu-icon","viewBox","0 0 5 10","focusable","false","aria-hidden","true",4,"ngIf"],["viewBox","0 0 5 10","focusable","false","aria-hidden","true",1,"mat-mdc-menu-submenu-icon"],["points","0,0 5,5 0,10"]],template:function(e,n){e&1&&($t(qn),bt(0),p(1,"span",0),bt(2,1),u(),h(3,"div",1),d(4,Yn,2,0,"svg",2)),e&2&&(c(3),l("matRippleDisabled",n.disableRipple||n.disabled)("matRippleTrigger",n._getHostElement()),c(1),l("ngIf",n._triggersSubmenu))},dependencies:[D,St],encapsulation:2,changeDetection:0})})(),o})();var rn=new ft("MatMenuContent");var qt={transformMenu:Pt("transformMenu",[He("void",G({opacity:0,transform:"scale(0.8)"})),rt("void => enter",Dt("120ms cubic-bezier(0, 0, 0.2, 1)",G({opacity:1,transform:"scale(1)"}))),rt("* => void",Dt("100ms 25ms linear",G({opacity:0})))]),fadeInItems:Pt("fadeInItems",[He("showing",G({opacity:1})),rt("void => *",[G({opacity:0}),Dt("400ms 100ms cubic-bezier(0.55, 0, 0.55, 0.2)")])])},wa=qt.fadeInItems,Ra=qt.transformMenu,Xn=0,ze=new ft("mat-menu-default-options",{providedIn:"root",factory:Wn});function Wn(){return{overlapTrigger:!1,xPosition:"after",yPosition:"below",backdropClass:"cdk-overlay-transparent-backdrop"}}var Ot=(()=>{let i=class{get xPosition(){return this._xPosition}set xPosition(t){this._xPosition=t,this.setPositionClasses()}get yPosition(){return this._yPosition}set yPosition(t){this._yPosition=t,this.setPositionClasses()}get overlapTrigger(){return this._overlapTrigger}set overlapTrigger(t){this._overlapTrigger=je(t)}get hasBackdrop(){return this._hasBackdrop}set hasBackdrop(t){this._hasBackdrop=je(t)}set panelClass(t){let e=this._previousPanelClass;e&&e.length&&e.split(" ").forEach(n=>{this._classList[n]=!1}),this._previousPanelClass=t,t&&t.length&&(t.split(" ").forEach(n=>{this._classList[n]=!0}),this._elementRef.nativeElement.className="")}get classList(){return this.panelClass}set classList(t){this.panelClass=t}constructor(t,e,n,a){this._elementRef=t,this._ngZone=e,this._changeDetectorRef=a,this._directDescendantItems=new si,this._classList={},this._panelAnimationState="void",this._animationDone=new pt,this.closed=new L,this.close=this.closed,this.panelId=`mat-menu-panel-${Xn++}`,this.overlayPanelClass=n.overlayPanelClass||"",this._xPosition=n.xPosition,this._yPosition=n.yPosition,this.backdropClass=n.backdropClass,this._overlapTrigger=n.overlapTrigger,this._hasBackdrop=n.hasBackdrop}ngOnInit(){this.setPositionClasses()}ngAfterContentInit(){this._updateDirectDescendants(),this._keyManager=new ui(this._directDescendantItems).withWrap().withTypeAhead().withHomeAndEnd(),this._keyManager.tabOut.subscribe(()=>this.closed.emit("tab")),this._directDescendantItems.changes.pipe(ie(this._directDescendantItems),M(t=>Q(...t.map(e=>e._focused)))).subscribe(t=>this._keyManager.updateActiveItem(t)),this._directDescendantItems.changes.subscribe(t=>{let e=this._keyManager;if(this._panelAnimationState==="enter"&&e.activeItem?._hasFocus()){let n=t.toArray(),a=Math.max(0,Math.min(n.length-1,e.activeItemIndex||0));n[a]&&!n[a].disabled?e.setActiveItem(a):e.setNextItemActive()}})}ngOnDestroy(){this._keyManager?.destroy(),this._directDescendantItems.destroy(),this.closed.complete(),this._firstItemFocusSubscription?.unsubscribe()}_hovered(){return this._directDescendantItems.changes.pipe(ie(this._directDescendantItems),M(e=>Q(...e.map(n=>n._hovered))))}addItem(t){}removeItem(t){}_handleKeydown(t){let e=t.keyCode,n=this._keyManager;switch(e){case 27:pi(t)||(t.preventDefault(),this.closed.emit("keydown"));break;case 37:this.parentMenu&&this.direction==="ltr"&&this.closed.emit("keydown");break;case 39:this.parentMenu&&this.direction==="rtl"&&this.closed.emit("keydown");break;default:(e===38||e===40)&&n.setFocusOrigin("keyboard"),n.onKeydown(t);return}t.stopPropagation()}focusFirstItem(t="program"){this._firstItemFocusSubscription?.unsubscribe(),this._firstItemFocusSubscription=this._ngZone.onStable.pipe(ee(1)).subscribe(()=>{let e=null;if(this._directDescendantItems.length&&(e=this._directDescendantItems.first._getHostElement().closest('[role="menu"]')),!e||!e.contains(document.activeElement)){let n=this._keyManager;n.setFocusOrigin(t).setFirstItemActive(),!n.activeItem&&e&&e.focus()}})}resetActiveItem(){this._keyManager.setActiveItem(-1)}setElevation(t){let e=Math.min(this._baseElevation+t,24),n=`${this._elevationPrefix}${e}`,a=Object.keys(this._classList).find(m=>m.startsWith(this._elevationPrefix));(!a||a===this._previousElevation)&&(this._previousElevation&&(this._classList[this._previousElevation]=!1),this._classList[n]=!0,this._previousElevation=n)}setPositionClasses(t=this.xPosition,e=this.yPosition){let n=this._classList;n["mat-menu-before"]=t==="before",n["mat-menu-after"]=t==="after",n["mat-menu-above"]=e==="above",n["mat-menu-below"]=e==="below",this._changeDetectorRef?.markForCheck()}_startAnimation(){this._panelAnimationState="enter"}_resetAnimation(){this._panelAnimationState="void"}_onAnimationDone(t){this._animationDone.next(t),this._isAnimating=!1}_onAnimationStart(t){this._isAnimating=!0,t.toState==="enter"&&this._keyManager.activeItemIndex===0&&(t.element.scrollTop=0)}_updateDirectDescendants(){this._allItems.changes.pipe(ie(this._allItems)).subscribe(t=>{this._directDescendantItems.reset(t.filter(e=>e._parentMenu===this)),this._directDescendantItems.notifyOnChanges()})}},o=i;return(()=>{i.\u0275fac=function(e){return new(e||i)(b(nt),b(Ht),b(ze),b(ht))}})(),(()=>{i.\u0275dir=Bt({type:i,contentQueries:function(e,n,a){if(e&1&&(re(a,rn,5),re(a,Tt,5),re(a,Tt,4)),e&2){let m;O(m=T())&&(n.lazyContent=m.first),O(m=T())&&(n._allItems=m),O(m=T())&&(n.items=m)}},viewQuery:function(e,n){if(e&1&&A(Fe,5),e&2){let a;O(a=T())&&(n.templateRef=a.first)}},inputs:{backdropClass:"backdropClass",ariaLabel:["aria-label","ariaLabel"],ariaLabelledby:["aria-labelledby","ariaLabelledby"],ariaDescribedby:["aria-describedby","ariaDescribedby"],xPosition:"xPosition",yPosition:"yPosition",overlapTrigger:"overlapTrigger",hasBackdrop:"hasBackdrop",panelClass:["class","panelClass"],classList:"classList"},outputs:{closed:"closed",close:"close"}})})(),o})();var sn=new ft("mat-menu-scroll-strategy");function Kn(o){return()=>o.scrollStrategies.reposition()}var ln={provide:sn,deps:[le],useFactory:Kn},en=mi({passive:!0});var cn=(()=>{let i=class{get _deprecatedMatMenuTriggerFor(){return this.menu}set _deprecatedMatMenuTriggerFor(t){this.menu=t}get menu(){return this._menu}set menu(t){t!==this._menu&&(this._menu=t,this._menuCloseSubscription.unsubscribe(),t&&(this._parentMaterialMenu,this._menuCloseSubscription=t.close.subscribe(e=>{this._destroyMenu(e),(e==="click"||e==="tab")&&this._parentMaterialMenu&&this._parentMaterialMenu.closed.emit(e)})),this._menuItemInstance?._setTriggersSubmenu(this.triggersSubmenu()))}constructor(t,e,n,a,m,S,At,Et,Lt){this._overlay=t,this._element=e,this._viewContainerRef=n,this._menuItemInstance=S,this._dir=At,this._focusMonitor=Et,this._ngZone=Lt,this._overlayRef=null,this._menuOpen=!1,this._closingActionsSubscription=Kt.EMPTY,this._hoverSubscription=Kt.EMPTY,this._menuCloseSubscription=Kt.EMPTY,this._changeDetectorRef=s(ht),this._handleTouchStart=Ft=>{fi(Ft)||(this._openedBy="touch")},this._openedBy=void 0,this.restoreFocus=!0,this.menuOpened=new L,this.onMenuOpen=this.menuOpened,this.menuClosed=new L,this.onMenuClose=this.menuClosed,this._scrollStrategy=a,this._parentMaterialMenu=m instanceof Ot?m:void 0,e.nativeElement.addEventListener("touchstart",this._handleTouchStart,en)}ngAfterContentInit(){this._handleHover()}ngOnDestroy(){this._overlayRef&&(this._overlayRef.dispose(),this._overlayRef=null),this._element.nativeElement.removeEventListener("touchstart",this._handleTouchStart,en),this._menuCloseSubscription.unsubscribe(),this._closingActionsSubscription.unsubscribe(),this._hoverSubscription.unsubscribe()}get menuOpen(){return this._menuOpen}get dir(){return this._dir&&this._dir.value==="rtl"?"rtl":"ltr"}triggersSubmenu(){return!!(this._menuItemInstance&&this._parentMaterialMenu&&this.menu)}toggleMenu(){return this._menuOpen?this.closeMenu():this.openMenu()}openMenu(){let t=this.menu;if(this._menuOpen||!t)return;let e=this._createOverlay(t),n=e.getConfig(),a=n.positionStrategy;this._setPosition(t,a),n.hasBackdrop=t.hasBackdrop==null?!this.triggersSubmenu():t.hasBackdrop,e.attach(this._getPortal(t)),t.lazyContent&&t.lazyContent.attach(this.menuData),this._closingActionsSubscription=this._menuClosingActions().subscribe(()=>this.closeMenu()),this._initMenu(t),t instanceof Ot&&(t._startAnimation(),t._directDescendantItems.changes.pipe(it(t.close)).subscribe(()=>{a.withLockedPosition(!1).reapplyLastPosition(),a.withLockedPosition(!0)}))}closeMenu(){this.menu?.close.emit()}focus(t,e){this._focusMonitor&&t?this._focusMonitor.focusVia(this._element,t,e):this._element.nativeElement.focus(e)}updatePosition(){this._overlayRef?.updatePosition()}_destroyMenu(t){if(!this._overlayRef||!this.menuOpen)return;let e=this.menu;this._closingActionsSubscription.unsubscribe(),this._overlayRef.detach(),this.restoreFocus&&(t==="keydown"||!this._openedBy||!this.triggersSubmenu())&&this.focus(this._openedBy),this._openedBy=void 0,e instanceof Ot?(e._resetAnimation(),e.lazyContent?e._animationDone.pipe(x(n=>n.toState==="void"),ee(1),it(e.lazyContent._attached)).subscribe({next:()=>e.lazyContent.detach(),complete:()=>this._setIsMenuOpen(!1)}):this._setIsMenuOpen(!1)):(this._setIsMenuOpen(!1),e?.lazyContent?.detach())}_initMenu(t){t.parentMenu=this.triggersSubmenu()?this._parentMaterialMenu:void 0,t.direction=this.dir,this._setMenuElevation(t),t.focusFirstItem(this._openedBy||"program"),this._setIsMenuOpen(!0)}_setMenuElevation(t){if(t.setElevation){let e=0,n=t.parentMenu;for(;n;)e++,n=n.parentMenu;t.setElevation(e)}}_setIsMenuOpen(t){t!==this._menuOpen&&(this._menuOpen=t,this._menuOpen?this.menuOpened.emit():this.menuClosed.emit(),this.triggersSubmenu()&&this._menuItemInstance._setHighlighted(t),this._changeDetectorRef.markForCheck())}_createOverlay(t){if(!this._overlayRef){let e=this._getOverlayConfig(t);this._subscribeToPositions(t,e.positionStrategy),this._overlayRef=this._overlay.create(e),this._overlayRef.keydownEvents().subscribe()}return this._overlayRef}_getOverlayConfig(t){return new Mi({positionStrategy:this._overlay.position().flexibleConnectedTo(this._element).withLockedPosition().withGrowAfterOpen().withTransformOriginOn(".mat-menu-panel, .mat-mdc-menu-panel"),backdropClass:t.backdropClass||"cdk-overlay-transparent-backdrop",panelClass:t.overlayPanelClass,scrollStrategy:this._scrollStrategy(),direction:this._dir})}_subscribeToPositions(t,e){t.setPositionClasses&&e.positionChanges.subscribe(n=>{let a=n.connectionPair.overlayX==="start"?"after":"before",m=n.connectionPair.overlayY==="top"?"below":"above";this._ngZone?this._ngZone.run(()=>t.setPositionClasses(a,m)):t.setPositionClasses(a,m)})}_setPosition(t,e){let[n,a]=t.xPosition==="before"?["end","start"]:["start","end"],[m,S]=t.yPosition==="above"?["bottom","top"]:["top","bottom"],[At,Et]=[m,S],[Lt,Ft]=[n,a],Nt=0;if(this.triggersSubmenu()){if(Ft=n=t.xPosition==="before"?"start":"end",a=Lt=n==="end"?"start":"end",this._parentMaterialMenu){if(this._parentInnerPadding==null){let Ze=this._parentMaterialMenu.items.first;this._parentInnerPadding=Ze?Ze._getHostElement().offsetTop:0}Nt=m==="bottom"?this._parentInnerPadding:-this._parentInnerPadding}}else t.overlapTrigger||(At=m==="top"?"bottom":"top",Et=S==="top"?"bottom":"top");e.withPositions([{originX:n,originY:At,overlayX:Lt,overlayY:m,offsetY:Nt},{originX:a,originY:At,overlayX:Ft,overlayY:m,offsetY:Nt},{originX:n,originY:Et,overlayX:Lt,overlayY:S,offsetY:-Nt},{originX:a,originY:Et,overlayX:Ft,overlayY:S,offsetY:-Nt}])}_menuClosingActions(){let t=this._overlayRef.backdropClick(),e=this._overlayRef.detachments(),n=this._parentMaterialMenu?this._parentMaterialMenu.closed:et(),a=this._parentMaterialMenu?this._parentMaterialMenu._hovered().pipe(x(m=>m!==this._menuItemInstance),x(()=>this._menuOpen)):et();return Q(t,n,a,e)}_handleMousedown(t){di(t)||(this._openedBy=t.button===0?"mouse":void 0,this.triggersSubmenu()&&t.preventDefault())}_handleKeydown(t){let e=t.keyCode;(e===13||e===32)&&(this._openedBy="keyboard"),this.triggersSubmenu()&&(e===39&&this.dir==="ltr"||e===37&&this.dir==="rtl")&&(this._openedBy="keyboard",this.openMenu())}_handleClick(t){this.triggersSubmenu()?(t.stopPropagation(),this.openMenu()):this.toggleMenu()}_handleHover(){!this.triggersSubmenu()||!this._parentMaterialMenu||(this._hoverSubscription=this._parentMaterialMenu._hovered().pipe(x(t=>t===this._menuItemInstance&&!t.disabled),_t(0,Ae)).subscribe(()=>{this._openedBy="mouse",this.menu instanceof Ot&&this.menu._isAnimating?this.menu._animationDone.pipe(ee(1),_t(0,Ae),it(this._parentMaterialMenu._hovered())).subscribe(()=>this.openMenu()):this.openMenu()}))}_getPortal(t){return(!this._portal||this._portal.templateRef!==t.templateRef)&&(this._portal=new _i(t.templateRef,this._viewContainerRef)),this._portal}},o=i;return(()=>{i.\u0275fac=function(e){return new(e||i)(b(le),b(nt),b(It),b(sn),b(ve,8),b(Tt,10),b(hi,8),b(Be),b(Ht))}})(),(()=>{i.\u0275dir=Bt({type:i,hostVars:3,hostBindings:function(e,n){e&1&&I("click",function(m){return n._handleClick(m)})("mousedown",function(m){return n._handleMousedown(m)})("keydown",function(m){return n._handleKeydown(m)}),e&2&&Z("aria-haspopup",n.menu?"menu":null)("aria-expanded",n.menuOpen)("aria-controls",n.menuOpen?n.menu.panelId:null)},inputs:{_deprecatedMatMenuTriggerFor:["mat-menu-trigger-for","_deprecatedMatMenuTriggerFor"],menu:["matMenuTriggerFor","menu"],menuData:["matMenuTriggerData","menuData"],restoreFocus:["matMenuTriggerRestoreFocus","restoreFocus"]},outputs:{menuOpened:"menuOpened",onMenuOpen:"onMenuOpen",menuClosed:"menuClosed",onMenuClose:"onMenuClose"}})})(),o})();function Zn(o,i){if(o&1){let r=J();p(0,"div",0),I("keydown",function(e){j(r);let n=f();return B(n._handleKeydown(e))})("click",function(){j(r);let e=f();return B(e.closed.emit("click"))})("@transformMenu.start",function(e){j(r);let n=f();return B(n._onAnimationStart(e))})("@transformMenu.done",function(e){j(r);let n=f();return B(n._onAnimationDone(e))}),p(1,"div",1),bt(2),u()()}if(o&2){let r=f();l("id",r.panelId)("ngClass",r._classList)("@transformMenu",r._panelAnimationState),Z("aria-label",r.ariaLabel||null)("aria-labelledby",r.ariaLabelledby||null)("aria-describedby",r.ariaDescribedby||null)}}var mn=["*"],Jn=["mat-menu-item",""];function to(o,i){o&1&&(ne(),p(0,"svg",2),h(1,"polygon",3),u())}var be=(()=>{let i=class extends Ot{constructor(t,e,n,a){super(t,e,n,a),this._elevationPrefix="mat-elevation-z",this._baseElevation=4}},o=i;return(()=>{i.\u0275fac=function(e){return new(e||i)(b(nt),b(Ht),b(ze),b(ht))}})(),(()=>{i.\u0275cmp=g({type:i,selectors:[["mat-menu"]],hostAttrs:["ngSkipHydration",""],hostVars:3,hostBindings:function(e,n){e&2&&Z("aria-label",null)("aria-labelledby",null)("aria-describedby",null)},exportAs:["matMenu"],features:[ae([{provide:ve,useExisting:i}]),ot],ngContentSelectors:mn,decls:1,vars:0,consts:[["tabindex","-1","role","menu",1,"mat-menu-panel",3,"id","ngClass","keydown","click"],[1,"mat-menu-content"]],template:function(e,n){e&1&&($t(),d(0,Zn,3,6,"ng-template"))},dependencies:[Ne],styles:['mat-menu{display:none}.mat-menu-panel{min-width:112px;max-width:280px;overflow:auto;-webkit-overflow-scrolling:touch;max-height:calc(100vh - 48px);border-radius:4px;outline:0;min-height:64px;position:relative}.mat-menu-panel.ng-animating{pointer-events:none}.cdk-high-contrast-active .mat-menu-panel{outline:solid 1px}.mat-menu-content:not(:empty){padding-top:8px;padding-bottom:8px}.mat-menu-item{-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:rgba(0,0,0,0);white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:block;line-height:48px;height:48px;padding:0 16px;text-align:left;text-decoration:none;max-width:100%;position:relative}.mat-menu-item::-moz-focus-inner{border:0}.mat-menu-item[disabled]{cursor:default}[dir=rtl] .mat-menu-item{text-align:right}.mat-menu-item .mat-icon{margin-right:16px;vertical-align:middle}.mat-menu-item .mat-icon svg{vertical-align:top}[dir=rtl] .mat-menu-item .mat-icon{margin-left:16px;margin-right:0}.mat-menu-item[disabled]::after{display:block;position:absolute;content:"";top:0;left:0;bottom:0;right:0}.cdk-high-contrast-active .mat-menu-item{margin-top:1px}.mat-menu-item-submenu-trigger{padding-right:32px}[dir=rtl] .mat-menu-item-submenu-trigger{padding-right:16px;padding-left:32px}.mat-menu-submenu-icon{position:absolute;top:50%;right:16px;transform:translateY(-50%);width:5px;height:10px;fill:currentColor}[dir=rtl] .mat-menu-submenu-icon{right:auto;left:16px;transform:translateY(-50%) scaleX(-1)}.cdk-high-contrast-active .mat-menu-submenu-icon{fill:CanvasText}button.mat-menu-item{width:100%}.mat-menu-item .mat-menu-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}'],encapsulation:2,data:{animation:[qt.transformMenu,qt.fadeInItems]},changeDetection:0})})(),o})(),pn=(()=>{let i=class extends Tt{},o=i;return(()=>{i.\u0275fac=function(){let t;return function(n){return(t||(t=vt(i)))(n||i)}}()})(),(()=>{i.\u0275cmp=g({type:i,selectors:[["","mat-menu-item",""]],hostAttrs:[1,"mat-focus-indicator"],hostVars:20,hostBindings:function(e,n){e&2&&(Z("role",n.role)("tabindex",n._getTabIndex())("aria-disabled",n.disabled.toString())("disabled",n.disabled||null),Ct("mat-menu-item",!0)("mat-menu-item-highlighted",n._highlighted)("mat-menu-item-submenu-trigger",n._triggersSubmenu)("mat-mdc-menu-item",!1)("mat-mdc-focus-indicator",!1)("mdc-list-item",!1)("mat-mdc-menu-item-highlighted",!1)("mat-mdc-menu-item-submenu-trigger",!1))},inputs:{disabled:"disabled",disableRipple:"disableRipple"},exportAs:["matMenuItem"],features:[ae([{provide:Tt,useExisting:i}]),ot],attrs:Jn,ngContentSelectors:mn,decls:3,vars:3,consts:[["matRipple","",1,"mat-menu-ripple",3,"matRippleDisabled","matRippleTrigger"],["class","mat-menu-submenu-icon","viewBox","0 0 5 10","focusable","false","aria-hidden","true",4,"ngIf"],["viewBox","0 0 5 10","focusable","false","aria-hidden","true",1,"mat-menu-submenu-icon"],["points","0,0 5,5 0,10"]],template:function(e,n){e&1&&($t(),bt(0),h(1,"div",0),d(2,to,2,0,"svg",1)),e&2&&(c(1),l("matRippleDisabled",n.disableRipple||n.disabled)("matRippleTrigger",n._getHostElement()),c(1),l("ngIf",n._triggersSubmenu))},dependencies:[D,St],encapsulation:2,changeDetection:0})})(),o})(),un=(()=>{let i=class extends cn{},o=i;return(()=>{i.\u0275fac=function(){let t;return function(n){return(t||(t=vt(i)))(n||i)}}()})(),(()=>{i.\u0275dir=Bt({type:i,selectors:[["","mat-menu-trigger-for",""],["","matMenuTriggerFor",""]],hostAttrs:[1,"mat-menu-trigger"],exportAs:["matMenuTrigger"],features:[ot]})})(),o})();var dn=(()=>{let i=class{},o=i;return(()=>{i.\u0275fac=function(e){return new(e||i)}})(),(()=>{i.\u0275mod=dt({type:i})})(),(()=>{i.\u0275inj=ut({providers:[ln],imports:[Y,me,Ut,$e,gi,me]})})(),o})();var hn=(()=>{let i=class{transform(t,e){return t.sort((n,a)=>n.id===e?-1/0:a.id===e?1/0:n.name?a.name?n.name.localeCompare(a.name):-1:1)}},o=i;return(()=>{i.\u0275fac=function(e){return new(e||i)}})(),(()=>{i.\u0275pipe=yt({name:"contactSort",type:i,pure:!0,standalone:!0})})(),o})();var gn=(()=>{let i=class{transform(t,e){let a=(Array.isArray(t)?t:[t]).map(m=>m.id===e?"me":m.name??m.email);if(a.length){if(a.length===1)return a[0];if(a.length===2)return`${a[0]} and ${a[1]}`}else return"";return`${a.slice(0,-1).join(", ")}, and ${a.at(-1)}`}},o=i;return(()=>{i.\u0275fac=function(e){return new(e||i)}})(),(()=>{i.\u0275pipe=yt({name:"contactStringify",type:i,pure:!0,standalone:!0})})(),o})();var _n=(()=>{let i=class{transform(t){return t.snippet??this.generateSnippetFromContent(t.content)}generateSnippetFromContent(t){return t.replace(/\s+/gu," ").slice(0,100)}},o=i;return(()=>{i.\u0275fac=function(e){return new(e||i)}})(),(()=>{i.\u0275pipe=yt({name:"mailSnippet",type:i,pure:!0,standalone:!0})})(),o})();var Ce=(()=>{let i=class{constructor(){this.element=s(nt).nativeElement}ngOnChanges(){let t=this.element.shadowRoot;if(!t)throw new Error("Missing ShadowRoot");t.innerHTML=this.content}},o=i;return(()=>{i.\u0275fac=function(e){return new(e||i)}})(),(()=>{i.\u0275cmp=g({type:i,selectors:[["rpl-html-renderer"]],inputs:{content:"content"},standalone:!0,features:[ei,xt],decls:0,vars:0,template:function(e,n){},dependencies:[Y],styles:[`:host{display:contents;contain:content}
`],encapsulation:3,changeDetection:0})})(),o})();function co(o,i){if(o&1&&(w(0),C(1),R()),o&2){let r=f();c(1),E(" ",r.mail.content," ")}}function mo(o,i){if(o&1&&(w(0),h(1,"rpl-html-renderer",14),R()),o&2){let r=f();c(1),l("content",r.mail.content)}}var yn=(()=>{let i=class{},o=i;return(()=>{i.\u0275fac=function(e){return new(e||i)}})(),(()=>{i.\u0275cmp=g({type:i,selectors:[["rpl-mail"]],inputs:{user:"user",mail:"mail",sender:"sender",recipients:"recipients"},decls:26,vars:16,consts:[["rplLayoutContent",""],[1,"wrapper"],["lpjNode","",1,"title-line"],[1,"subject"],["mat-icon-button","","routerLink","..","matTooltip","Back"],["fontSet","filled","fontIcon","expand_more"],["lpjNode","",1,"info-line"],[1,"left-group"],[1,"mat-body-1"],[1,"mat-small"],[1,"right-group"],[3,"lpjNode","contact"],["lpjNode","",1,"content"],[4,"ngIf"],[3,"content"]],template:function(e,n){if(e&1&&(p(0,"rpl-scrollable-area",0)(1,"div",1)(2,"div",2)(3,"div",3),C(4),u(),p(5,"a",4),h(6,"mat-icon",5),u()(),p(7,"div",6)(8,"div",7)(9,"div",8)(10,"span"),C(11),u(),C(12," - "),p(13,"span"),C(14),v(15,"readableDate"),u()(),p(16,"div",9)(17,"span"),C(18),v(19,"contactStringify"),v(20,"contactSort"),u()()(),p(21,"div",10),h(22,"rpl-avatar",11),u()(),p(23,"div",12),d(24,co,2,1,"ng-container",13),d(25,mo,2,1,"ng-container",13),u()()()),e&2){let a;c(4),E(" ",n.mail.subject," "),c(7),z((a=n.sender.name)!==null&&a!==void 0?a:n.sender.email),c(3),z(P(15,8,n.mail.sentAt)),c(4),E(" To ",at(19,10,at(20,13,n.recipients,n.user.id),n.user.id)," "),c(4),tt("lpjNode","mail-",n.mail.id,"-avatar"),l("contact",n.sender),c(2),l("ngIf",n.mail.contentType==="plain-text"),c(1),l("ngIf",n.mail.contentType==="html")}},dependencies:[D,wt,Si,W,V,F,H,Rt,Me,he,Ce,ye,hn,gn],styles:["[_nghost-%COMP%]{display:block;background-color:#fff}rpl-scrollable-area[_ngcontent-%COMP%]{height:100%}.wrapper[_ngcontent-%COMP%]{height:100%;padding:16px}.tablet-portrait[_nghost-%COMP%]   .wrapper[_ngcontent-%COMP%], .tablet-portrait   [_nghost-%COMP%]   .wrapper[_ngcontent-%COMP%]{padding:32px 16px}.title-line[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}.title-line[_ngcontent-%COMP%]   .subject[_ngcontent-%COMP%]{font-size:24px;font-weight:700;line-height:32px;font-family:Work Sans,sans-serif;letter-spacing:normal}.info-line[_ngcontent-%COMP%]{margin-top:8px;display:flex;align-items:center}.info-line[_ngcontent-%COMP%]   .left-group[_ngcontent-%COMP%]{flex-grow:1}.content[_ngcontent-%COMP%]{margin-top:16px;white-space:pre-line}"],changeDetection:0})})(),o})();function U(o){let i=s(o);return i.execute.bind(i)}function uo(o,i){if(o&1){let r=J();p(0,"button",4),I("click",function(){j(r);let e=f();return B(e.snackbarRef.dismissWithAction())}),C(1),u()}if(o&2){let r=f();c(1),E(" ",r.context.action,`
`)}}var vn=(()=>{let i=class{constructor(){this.context=s(Ti),this.snackbarRef=s(Oi)}},o=i;return(()=>{i.\u0275fac=function(e){return new(e||i)}})(),(()=>{i.\u0275cmp=g({type:i,selectors:[["rpl-snackbar-content"]],standalone:!0,features:[xt],decls:5,vars:2,consts:[[1,"text"],["mat-button","","color","accent",3,"click",4,"ngIf"],["mat-icon-button","",3,"click"],["fontSet","filled","fontIcon","close"],["mat-button","","color","accent",3,"click"]],template:function(e,n){e&1&&(p(0,"div",0),C(1),u(),d(2,uo,2,1,"button",1),p(3,"button",2),I("click",function(){return n.snackbarRef.dismiss()}),h(4,"mat-icon",3),u()),e&2&&(c(1),z(n.context.message),c(1),l("ngIf",n.context.action))},dependencies:[Y,D,ue,X,pe,V],styles:["[_nghost-%COMP%]{display:flex;align-items:center;gap:8px}.text[_ngcontent-%COMP%]{flex:1}button[_ngcontent-%COMP%]{text-transform:uppercase}"],changeDetection:0})})(),o})();var bn=(()=>{let i=class{constructor(){this.snackbarService=s(ki),this.breakpoints=ct()}notify(t,e){let n=this.snackbarService.openFromComponent(vn,Je({data:{message:t,action:e},duration:3e4},this.breakpoints()["tablet-portrait"]?{verticalPosition:"bottom",horizontalPosition:"right",panelClass:["snackbar-notification-panel"]}:{verticalPosition:"bottom",horizontalPosition:"center",panelClass:["snackbar-notification-panel","centered"]}));return{event$:Q(n.afterOpened().pipe(_(()=>({type:"display"}))),n.afterDismissed().pipe(_(()=>({type:"dismiss"}))),n.onAction().pipe(_(()=>({type:"action"})))),dismiss(){n.dismiss()}}}},o=i;return(()=>{i.\u0275fac=function(e){return new(e||i)}})(),(()=>{i.\u0275prov=k({token:i,factory:i.\u0275fac,providedIn:"root"})})(),o})();var Wt=(()=>{let i=class{},o=i;return(()=>{i.\u0275fac=function(e){return new(e||i)}})(),(()=>{i.\u0275prov=k({token:i,factory:function(e){let n=null;return e?n=new(e||i):n=ti(bn),n},providedIn:"root"})})(),o})();var kt=new ft("POPUP_REF"),Ie=class{constructor(){this.popupRef=s(kt)}};var Cn=(()=>{let i=class{fromDialogRef(t,e){let n=new pt;return{input:t.input,appearance:"dialog",event$:Q(e.afterClosed().pipe(_(()=>({type:"close"}))),e.afterOpened().pipe(_(()=>({type:"display"}))),n.pipe(_(a=>({type:"output",payload:a})))),output:a=>{n.next(a)},close:()=>{n.complete(),e.close()}}}fromBottomSheetRef(t,e){let n=new pt;return{input:t.input,appearance:"bottom-sheet",event$:Q(e.afterDismissed().pipe(_(()=>({type:"close"}))),e.afterOpened().pipe(_(()=>({type:"display"}))),n.pipe(_(a=>({type:"output",payload:a})))),output:a=>{n.next(a)},close:()=>{n.complete(),e.dismiss()}}}},o=i;return(()=>{i.\u0275fac=function(e){return new(e||i)}})(),(()=>{i.\u0275prov=k({token:i,factory:i.\u0275fac,providedIn:"root"})})(),o})();function fo(o,i){o&1&&ni(0)}var Ge=(()=>{let i=class{constructor(){this.viewContainer=s(It),this.context=s(wi,{optional:!0})??s(Ii),this.dialogOrBottomSheetRef=s(Ue,{optional:!0})??s(Pi),this.popupRefFactory=s(Cn),this.popupRef=this.createPopupRef(),this.contentType=this.context.content,this.contentInjector=this.createContentInjector()}createContentInjector(){return Le.create({parent:this.viewContainer.injector,providers:[{provide:kt,useValue:this.popupRef}]})}createPopupRef(){return this.dialogOrBottomSheetRef instanceof Ue?this.popupRefFactory.fromDialogRef(this.context,this.dialogOrBottomSheetRef):this.popupRefFactory.fromBottomSheetRef(this.context,this.dialogOrBottomSheetRef)}},o=i;return(()=>{i.\u0275fac=function(e){return new(e||i)}})(),(()=>{i.\u0275cmp=g({type:i,selectors:[["rpl-popup-container"]],hostVars:1,hostBindings:function(e,n){e&2&&Z("data-appearance",n.popupRef.appearance)},standalone:!0,features:[xt],decls:1,vars:2,consts:[[4,"ngComponentOutlet","ngComponentOutletInjector"]],template:function(e,n){e&1&&d(0,fo,1,0,"ng-container",0),e&2&&l("ngComponentOutlet",n.contentType)("ngComponentOutletInjector",n.contentInjector)},dependencies:[Y,ci],styles:["[_nghost-%COMP%]{display:contents}"],changeDetection:0})})(),o})();var xn=(()=>{let i=class{constructor(){this.dialogService=s(Ri),this.bottomSheetService=s(Di),this.breakpoints=ct()}popup(t,e){return this.breakpoints()["tablet-portrait"]?this.popupDialog(t,e):this.popupBottomSheet(t,e)}popupDialog(t,e){return this.dialogService.open(Ge,{data:{content:t,input:e}}).componentInstance.contentInjector.get(kt)}popupBottomSheet(t,e){return this.bottomSheetService.open(Ge,{data:{content:t,input:e}}).instance.contentInjector.get(kt)}},o=i;return(()=>{i.\u0275fac=function(e){return new(e||i)}})(),(()=>{i.\u0275prov=k({token:i,factory:i.\u0275fac,providedIn:"root"})})(),o})();function ho(o,i){if(o&1&&(p(0,"h2"),C(1),u()),o&2){let r=f(),t;c(1),E(" ",(t=r.popupRef.input.title)!==null&&t!==void 0?t:"Mailboxes",`
`)}}function go(o,i){if(o&1){let r=J();p(0,"button",2),I("click",function(){let n=j(r).$implicit,a=f();return a.popupRef.output(n),B(a.popupRef.close())}),C(1),u()}if(o&2){let r=i.$implicit;c(1),E(" ",r.name," ")}}var In=(()=>{let i=class extends Ie{constructor(){super(...arguments),this.mailboxRepo=s(K),this.mailboxes$=this.queryMailboxes()}queryMailboxes(){let t=this.popupRef.input.current;return t?this.mailboxRepo.query(e=>e.id!==t.id):this.mailboxRepo.query()}},o=i;return(()=>{i.\u0275fac=function(){let t;return function(n){return(t||(t=vt(i)))(n||i)}}()})(),(()=>{i.\u0275cmp=g({type:i,selectors:[["rpl-mailbox-selection-popup"]],features:[ot],decls:4,vars:4,consts:[[4,"ngIf"],["mat-list-item","",3,"click",4,"ngFor","ngForOf"],["mat-list-item","",3,"click"]],template:function(e,n){e&1&&(d(0,ho,2,1,"h2",0),p(1,"mat-action-list"),d(2,go,2,1,"button",1),v(3,"async"),u()),e&2&&(l("ngIf",n.popupRef.appearance==="dialog"),c(2),l("ngForOf",P(3,2,n.mailboxes$)))},dependencies:[se,D,qi,zi,$],styles:["[_nghost-%COMP%]{display:block}[data-appearance=dialog]   [_nghost-%COMP%]{width:240px}"],changeDetection:0})})(),o})();var Pn=(()=>{let i=class{constructor(){this.mailConductor=s(Yt),this.notifier=s(Wt)}execute(t){return(t.mail.isStarred?this.mailConductor.markMailAsNotStarred(t.mail):this.mailConductor.markMailAsStarred(t.mail)).pipe(jt((n,a)=>this.notifier.notify("Failed to update starred status","Retry").event$.pipe(x(m=>m.type==="action"),M(()=>a))))}},o=i;return(()=>{i.\u0275fac=function(e){return new(e||i)}})(),(()=>{i.\u0275prov=k({token:i,factory:i.\u0275fac,providedIn:"root"})})(),o})(),Pe=(()=>{let i=class{constructor(){this.mailConductor=s(Yt),this.notifier=s(Wt)}execute(t){let e=t.to??(t.mail.isRead?"unread":"read");return(e==="read"?this.mailConductor.markMailAsRead(t.mail):this.mailConductor.markMailAsUnread(t.mail)).pipe(jt((a,m)=>this.notifier.notify(`Failed to mark mail as ${e}`,"Retry").event$.pipe(x(S=>S.type==="action"),M(()=>m))))}},o=i;return(()=>{i.\u0275fac=function(e){return new(e||i)}})(),(()=>{i.\u0275prov=k({token:i,factory:i.\u0275fac,providedIn:"root"})})(),o})(),Dn=(()=>{let i=class{constructor(){this.popupService=s(xn),this.moveMailToMailbox=U(Xe)}execute(t){return this.popupService.popupDialog(In,{title:"Move to",current:t.currentMailbox}).event$.pipe(_(n=>n.type==="output"?n.payload:null),x(Boolean),M(n=>this.moveMailToMailbox({mail:t.mail,mailbox:n})))}},o=i;return(()=>{i.\u0275fac=function(e){return new(e||i)}})(),(()=>{i.\u0275prov=k({token:i,factory:i.\u0275fac,providedIn:"root"})})(),o})(),Xe=(()=>{let i=class{constructor(){this.mailRepo=s(mt),this.mailboxRepo=s(K),this.mailConductor=s(Yt),this.notifier=s(Wt)}execute(t){let e=t.mail.mailbox?this.mailboxRepo.retrieve(t.mail.mailbox).pipe(N()):et(null),n=e.pipe(_(a=>this.generateActionMessage(a,t.mailbox)),_(a=>this.notifier.notify(a,"Undo")),M(a=>a.event$),x(a=>a.type==="action"));return Q(this.mailConductor.moveMail(t.mail,t.mailbox).pipe(jt((a,m)=>e.pipe(_(S=>this.generateErrorMessage(S,t.mailbox)),M(S=>this.notifier.notify(S,"Retry").event$),x(S=>S.type==="action"),M(()=>m))),it(n)),n.pipe(M(()=>te([this.mailRepo.retrieve(t.mail.id),e]).pipe(N())),M(([a,m])=>this.execute({mail:a,mailbox:m}))))}generateActionMessage(t,e){return e?`Mail moved to ${e.name}`:t?`Mail removed from ${t.name}`:"Mail moved"}generateErrorMessage(t,e){return e?`Failed to move mail to ${e.name}`:t?`Failed to remove mail from ${t.name}`:"Failed to move mail"}},o=i;return(()=>{i.\u0275fac=function(e){return new(e||i)}})(),(()=>{i.\u0275prov=k({token:i,factory:i.\u0275fac,providedIn:"root"})})(),o})(),Sn=(()=>{let i=class{constructor(){this.mailConductor=s(Yt),this.notifier=s(Wt)}execute(t){return this.notifier.notify("Mail deleted permanently"),this.mailConductor.deleteMail(t.mail).pipe(jt((e,n)=>this.notifier.notify("Failed to delete mail","Retry").event$.pipe(x(a=>a.type==="action"),M(()=>n))))}},o=i;return(()=>{i.\u0275fac=function(e){return new(e||i)}})(),(()=>{i.\u0275prov=k({token:i,factory:i.\u0275fac,providedIn:"root"})})(),o})();var wn=(()=>{let i=class{constructor(){this.moveMail=U(Dn),this.toggleMailReadStatus=U(Pe)}},o=i;return(()=>{i.\u0275fac=function(e){return new(e||i)}})(),(()=>{i.\u0275cmp=g({type:i,selectors:[["rpl-mail-action-menu-def"]],viewQuery:function(e,n){if(e&1&&A(be,5),e&2){let a;O(a=T())&&(n.menuRef=a.first)}},inputs:{mail:"mail",currentMailbox:"currentMailbox"},decls:5,vars:1,consts:[["mat-menu-item","",3,"click"]],template:function(e,n){e&1&&(p(0,"mat-menu")(1,"button",0),I("click",function(){return n.moveMail({mail:n.mail,currentMailbox:n.currentMailbox}).subscribe()}),C(2," Move to... "),u(),p(3,"button",0),I("click",function(){return n.toggleMailReadStatus({mail:n.mail}).subscribe()}),C(4),u()()),e&2&&(c(4),E(" ",n.mail.isRead?"Mark as unread":"Mark as read"," "))},dependencies:[be,pn],styles:["[_nghost-%COMP%]{display:contents}"],changeDetection:0})})(),o})();var De=(()=>{let i=class{},o=i;return(()=>{i.\u0275fac=function(e){return new(e||i)}})(),(()=>{i.\u0275cmp=g({type:i,selectors:[["rpl-mail-action-menu-button"]],inputs:{mail:"mail",currentMailbox:"currentMailbox"},decls:4,vars:3,consts:[["mat-icon-button","","matTooltip","More actions",3,"matMenuTriggerFor"],["fontSet","filled","fontIcon","more_vert"],[3,"mail","currentMailbox"],["menuDef",""]],template:function(e,n){if(e&1&&(p(0,"button",0),h(1,"mat-icon",1),u(),h(2,"rpl-mail-action-menu-def",2,3)),e&2){let a=oe(3);l("matMenuTriggerFor",a.menuRef),c(2),l("mail",n.mail)("currentMailbox",n.currentMailbox)}},dependencies:[X,W,un,V,wn],styles:["[_nghost-%COMP%]{display:inline-block;width:40px;height:40px}"],changeDetection:0})})(),o})();var Se=(()=>{let i=class{constructor(){this.toggleStarred=U(Pn),this.click=new L,this.click.pipe(M(()=>this.toggleStarred({mail:this.mail})),Qi()).subscribe()}},o=i;return(()=>{i.\u0275fac=function(e){return new(e||i)}})(),(()=>{i.\u0275cmp=g({type:i,selectors:[["rpl-mail-star-button"]],inputs:{mail:"mail"},decls:2,vars:2,consts:[["mat-icon-button","",3,"color","matTooltip","click"],["svgIcon","star"]],template:function(e,n){e&1&&(p(0,"button",0),I("click",function(){return n.click.emit()}),h(1,"mat-icon",1),u()),e&2&&l("color",n.mail.isStarred?"accent":void 0)("matTooltip",n.mail.isStarred?"Mark as not starred":"Mark as starred")},dependencies:[X,W,V],styles:["[_nghost-%COMP%]{display:inline-block;width:40px;height:40px}"],changeDetection:0})})(),o})();function we(){let o=s(K),i=Object.values(st);return o.query(r=>i.includes(r.name)).pipe(x(r=>r.length===i.length),_(r=>{let t={};for(let e of Object.values(st)){let n=r.find(a=>a.name===e);if(!n)throw new We;t[e]=n}return t}),Mt(1))}var We=class extends Error{};function Mo(o,i){if(o&1){let r=J();p(0,"button",1),I("click",function(){j(r);let e=f();return B(e.click.emit())}),h(1,"mat-icon",2),u()}if(o&2){let r=i.ngIf;l("matTooltip",r==="delete"?"Delete permanently":"Move to Trash")}}var Re=(()=>{let i=class{constructor(){this.deleteMail=U(Sn),this.moveMail=U(Xe),this.systemMailboxes$=we(),this.trashMailbox$=this.systemMailboxes$.pipe(_(t=>t[st.Trash])),this.click=new L,this.action$=this.trashMailbox$.pipe(_(t=>this.mail.mailbox===t.id),_(t=>t?"delete":"move-to-trash")),this.click.pipe(M(()=>this.action$),M(t=>t==="delete"?this.deleteMail({mail:this.mail}):this.trashMailbox$.pipe(N(),M(e=>this.moveMail({mail:this.mail,mailbox:e}))))).subscribe()}},o=i;return(()=>{i.\u0275fac=function(e){return new(e||i)}})(),(()=>{i.\u0275cmp=g({type:i,selectors:[["rpl-mail-delete-button"]],inputs:{mail:"mail"},decls:2,vars:3,consts:[["mat-icon-button","",3,"matTooltip","click",4,"ngIf"],["mat-icon-button","",3,"matTooltip","click"],["svgIcon","delete"]],template:function(e,n){e&1&&(d(0,Mo,2,1,"button",0),v(1,"async")),e&2&&l("ngIf",P(1,1,n.action$))},dependencies:[D,X,W,V,$],styles:["[_nghost-%COMP%]{display:inline-block;width:40px;height:40px}"],changeDetection:0})})(),o})();var vo=["anchor"];function bo(o,i){if(o&1&&(w(0),h(1,"rpl-mail-star-button",14)(2,"rpl-mail-delete-button",14)(3,"rpl-mail-action-menu-button",15),R()),o&2){let r=f(2);c(1),l("mail",r.mail),c(1),l("mail",r.mail),c(1),l("mail",r.mail)("currentMailbox",r.currentMailbox)}}function Co(o,i){if(o&1&&(p(0,"div",16),C(1),v(2,"mailSnippet"),u()),o&2){let r=f(2);c(1),z(P(2,1,r.mail))}}function xo(o,i){if(o&1&&(w(0),h(1,"div",1)(2,"div",2),p(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6)(7,"span"),C(8),u(),C(9," - "),p(10,"span"),C(11),v(12,"readableDate"),u()(),p(13,"div",7)(14,"a",8,9),C(16),u()()(),p(17,"div",10),I("click",function(t){return t.stopPropagation()}),d(18,bo,4,4,"ng-container",0),p(19,"button",11),h(20,"rpl-avatar",12),u()()(),d(21,Co,3,3,"div",13),u(),R()),o&2){let r=i.ngIf,t=f(),e,n;c(8),z((e=r.name)!==null&&e!==void 0?e:r.email),c(3),z(P(12,8,t.mail.sentAt)),c(3),tt("routerLink","./",t.mail.id,""),c(2),z((n=t.mail.subject)!==null&&n!==void 0?n:"(no subject)"),c(2),l("ngIf",t.breakpoints()["tablet-portrait"]),c(1),tt("lpjNode","mail-",t.mail.id,"-avatar"),c(1),l("contact",r),c(1),l("ngIf",!t.mail.isRead)}}var Oe=(()=>{let i=class{constructor(){this.contactRepo=s(fe),this.breakpoints=ct()}get mailIsRead(){return this.mail.isRead}get mailIsStared(){return this.mail.isStarred}onClick(){this.anchorElementRef.nativeElement.click()}},o=i;return(()=>{i.\u0275fac=function(e){return new(e||i)}})(),(()=>{i.\u0275cmp=g({type:i,selectors:[["rpl-mail-card"]],viewQuery:function(e,n){if(e&1&&A(vo,5),e&2){let a;O(a=T())&&(n.anchorElementRef=a.first)}},hostVars:4,hostBindings:function(e,n){e&1&&I("click",function(){return n.onClick()}),e&2&&Ct("read",n.mailIsRead)("starred",n.mailIsStared)},inputs:{mail:"mail",currentMailbox:"currentMailbox"},decls:3,vars:6,consts:[[4,"ngIf"],[1,"overlay"],["matRipple","",1,"ripple"],[1,"content"],[1,"headline"],["lpjNode","",1,"titles"],[1,"subtitle"],[1,"title"],[3,"routerLink"],["anchor",""],["lpjNode","",1,"actions",3,"click"],["mat-icon-button","","matTooltip","Show details",1,"avatar-button",3,"lpjNode"],[3,"contact"],["class","overview",4,"ngIf"],[3,"mail"],[3,"mail","currentMailbox"],[1,"overview"]],template:function(e,n){e&1&&(d(0,xo,22,10,"ng-container",0),v(1,"async"),v(2,"resolveRef")),e&2&&l("ngIf",P(1,1,at(2,3,n.mail.sender,n.contactRepo)))},dependencies:[D,wt,X,W,St,F,H,he,Se,Re,De,$,ye,_e,_n],styles:["[_nghost-%COMP%]{display:block;position:relative;background-color:#f9aa33;cursor:pointer}.ripple[_ngcontent-%COMP%], .overlay[_ngcontent-%COMP%]{position:absolute;inset:0}.content[_ngcontent-%COMP%]   .overview[_ngcontent-%COMP%], .content[_ngcontent-%COMP%]   .headline[_ngcontent-%COMP%]   .titles[_ngcontent-%COMP%]   .subtitle[_ngcontent-%COMP%]{overflow:hidden;white-space:nowrap;text-overflow:ellipsis}.overlay[_ngcontent-%COMP%]{background-color:#000;opacity:0}[_nghost-%COMP%]:hover   .overlay[_ngcontent-%COMP%]{opacity:.04}.content[_ngcontent-%COMP%]{padding:16px;background-color:#fff}.tablet-portrait[_nghost-%COMP%]   .content[_ngcontent-%COMP%], .tablet-portrait   [_nghost-%COMP%]   .content[_ngcontent-%COMP%]{padding:24px}.starred[_nghost-%COMP%]   .content[_ngcontent-%COMP%]{border-top-left-radius:24px}.tablet-portrait   .starred[_nghost-%COMP%]   .content[_ngcontent-%COMP%]{border-top-left-radius:initial}.content[_ngcontent-%COMP%]   .headline[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.content[_ngcontent-%COMP%]   .headline[_ngcontent-%COMP%]   .titles[_ngcontent-%COMP%]{width:0;flex-grow:1;display:flex;flex-direction:column;gap:4px}.content[_ngcontent-%COMP%]   .headline[_ngcontent-%COMP%]   .titles[_ngcontent-%COMP%]   .subtitle[_ngcontent-%COMP%]{font-size:12px;font-weight:400;line-height:20px;font-family:Work Sans,sans-serif;letter-spacing:normal}.content[_ngcontent-%COMP%]   .headline[_ngcontent-%COMP%]   .titles[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-size:16px;font-weight:700;line-height:20px;font-family:Work Sans,sans-serif;letter-spacing:normal}.read[_nghost-%COMP%]   .content[_ngcontent-%COMP%]   .headline[_ngcontent-%COMP%]   .titles[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{color:#0000008a}.content[_ngcontent-%COMP%]   .headline[_ngcontent-%COMP%]   .titles[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:focus{text-decoration:underline}.content[_ngcontent-%COMP%]   .headline[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]{display:flex;gap:8px}.read[_nghost-%COMP%]   .content[_ngcontent-%COMP%]   .headline[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{color:#0000008a}[_nghost-%COMP%]:hover   .content[_ngcontent-%COMP%]   .headline[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   .avatar-button[_ngcontent-%COMP%]{background-color:#fff}.content[_ngcontent-%COMP%]   .overview[_ngcontent-%COMP%]{margin-top:8px;height:20px;white-space:pre}"],changeDetection:0})})(),o})();var An=(()=>{let i=class{constructor(){this.node$=new Zt(1)}set nodeInput(t){this.node$.next(t)}},o=i;return(()=>{i.\u0275fac=function(e){return new(e||i)}})(),(()=>{i.\u0275cmp=g({type:i,selectors:[["rpl-mail-card-animation-presence"]],viewQuery:function(e,n){if(e&1&&A(Qt,5),e&2){let a;O(a=T())&&(n.nodeInput=a.first)}},inputs:{mail:"mail"},decls:1,vars:1,consts:[["lpjNode","",3,"mail"]],template:function(e,n){e&1&&h(0,"rpl-mail-card",0),e&2&&l("mail",n.mail)},dependencies:[F,H,Oe],styles:["[_nghost-%COMP%]{display:block}rpl-mail-card[_ngcontent-%COMP%]{width:100%;height:100%}"],changeDetection:0})})(),o})();function Io(o,i){if(o&1&&(w(0),h(1,"rpl-mail-card",2),R()),o&2){let r=i.$implicit,t=f();c(1),tt("lpjNode","mail-",r.id,""),l("mail",r)("currentMailbox",t.currentMailbox)}}var Po=function(o){return{duration:250,easing:o}},En=(()=>{let i=class{constructor(){this.AnimationCurves=gt,this.mails=[],this.mailTracker=(t,e)=>e.id}},o=i;return(()=>{i.\u0275fac=function(e){return new(e||i)}})(),(()=>{i.\u0275cmp=g({type:i,selectors:[["rpl-mail-card-list"]],inputs:{mails:"mails",currentMailbox:"currentMailbox"},decls:2,vars:6,consts:[["lpjNode","mail-card-list",1,"content",3,"lpjAnimation","lpjAnimationTrigger"],[4,"ngFor","ngForOf","ngForTrackBy"],[3,"mail","currentMailbox","lpjNode"]],template:function(e,n){e&1&&(p(0,"div",0),d(1,Io,2,3,"ng-container",1),u()),e&2&&(l("lpjAnimation",ri(4,Po,n.AnimationCurves.STANDARD_CURVE))("lpjAnimationTrigger",n.mails),c(1),l("ngForOf",n.mails)("ngForTrackBy",n.mailTracker))},dependencies:[se,F,Li,H,Ni,ji,Bi,Oe],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;gap:4px}.content[_ngcontent-%COMP%]{display:contents}"],changeDetection:0})})(),o})();var So=["replyIcon"],wo=["bottomActions"];function Ro(o,i){if(o&1&&(w(0),h(1,"rpl-mail",3),R()),o&2){let r=i.ngIf,t=f().ngIf,e=f().ngIf,n=f();c(1),tt("lpjNode","mail-",n.mail.id,""),l("user",e)("mail",n.mail)("sender",t)("recipients",r)}}var Oo=function(){return[]};function To(o,i){if(o&1&&(w(0),d(1,Ro,2,5,"ng-container",0),v(2,"async"),v(3,"resolveRef"),R()),o&2){let r=f(2),t;c(1),l("ngIf",P(2,1,at(3,3,(t=r.mail.recipients)!==null&&t!==void 0?t:ai(6,Oo),r.contactRepo)))}}function ko(o,i){if(o&1&&(w(0),d(1,To,4,7,"ng-container",0),v(2,"async"),v(3,"resolveRef"),R()),o&2){let r=f();c(1),l("ngIf",P(2,1,at(3,3,r.mail.sender,r.contactRepo)))}}function Ao(o,i){if(o&1&&h(0,"rpl-mail-star-button",4)(1,"rpl-mail-delete-button",5)(2,"rpl-mail-action-menu-button",6),o&2){let r=f();l("mail",r.mail),c(1),l("mail",r.mail),c(1),l("mail",r.mail)("currentMailbox",r.mailboxAsEntity)}}function Eo(o,i){o&1&&h(0,"mat-icon",7)}var Ln=(()=>{let i=class{ngAfterViewInit(){this.viewInit.emit(),this.viewInit.complete()}ngOnDestroy(){this.destroy.emit(),this.destroy.complete()}get mailboxAsEntity(){return typeof this.mailbox=="object"?this.mailbox:void 0}constructor(){this.mailRepo=s(mt),this.contactRepo=s(fe),this.user=tn(),this.route=s(de),this.bottomNavService=s(Ki),this.navFabService=s(Zi),this.viewInit=new L,this.destroy=new L,this.viewInit.pipe(_t(0)).subscribe(()=>{this.bottomNavService.useActions(this.navBottomActionsTemplate),this.navFabService.useConfig({text:"Reply",icon:this.navFabIconTemplate,link:"/compose",linkParams:{reply:this.route.snapshot.params.mailId}})}),te([this.bottomNavService.actions$.pipe(N()),this.navFabService.config$.pipe(N()),this.destroy.pipe(_t(0))]).subscribe(([t,e])=>{this.bottomNavService.useActions(t),this.navFabService.useConfig(e)})}},o=i;return(()=>{i.\u0275fac=function(e){return new(e||i)}})(),(()=>{i.\u0275cmp=g({type:i,selectors:[["rpl-mail-detail-layout"]],viewQuery:function(e,n){if(e&1&&(A(So,5),A(wo,5)),e&2){let a;O(a=T())&&(n.navFabIconTemplate=a.first),O(a=T())&&(n.navBottomActionsTemplate=a.first)}},inputs:{mail:"mail",mailbox:"mailbox"},decls:5,vars:1,consts:[[4,"ngIf"],["bottomActions",""],["replyIcon",""],["data-route-animation-target","",3,"user","mail","sender","recipients","lpjNode"],[3,"mail"],["routerLink","..",3,"mail"],[3,"mail","currentMailbox"],["svgIcon","reply"]],template:function(e,n){e&1&&(d(0,ko,4,6,"ng-container",0),d(1,Ao,3,4,"ng-template",null,1,Vt),d(3,Eo,1,0,"ng-template",null,2,Vt)),e&2&&l("ngIf",n.user())},dependencies:[D,wt,V,F,H,yn,Se,Re,De,$,_e],styles:["[_nghost-%COMP%]{display:contents}rpl-mail[_ngcontent-%COMP%]{grid-row:1;grid-column:margin-left/margin-right;height:calc(100% - 8px);padding:4px;z-index:1}.tablet-portrait[_nghost-%COMP%]   rpl-mail[_ngcontent-%COMP%], .tablet-portrait   [_nghost-%COMP%]   rpl-mail[_ngcontent-%COMP%]{grid-column:col-2/col-8}.tablet-landscape[_nghost-%COMP%]   rpl-mail[_ngcontent-%COMP%], .tablet-landscape   [_nghost-%COMP%]   rpl-mail[_ngcontent-%COMP%]{grid-column:col-2/col-12}.laptop[_nghost-%COMP%]   rpl-mail[_ngcontent-%COMP%], .laptop   [_nghost-%COMP%]   rpl-mail[_ngcontent-%COMP%]{grid-column:col-4/col-12}"],changeDetection:0})})(),o})();function Fo(o,i){if(o&1&&(h(0,"rpl-mail-card-list",6),v(1,"async")),o&2){let r=f().ngIf,t=f(3),e;l("mails",r)("currentMailbox",(e=P(1,2,t.mailboxAsEntity$))!==null&&e!==void 0?e:void 0)}}function No(o,i){if(o&1&&(p(0,"div",7),C(1),u()),o&2){let r=f(3).ngIf;c(1),E("Empty in ",r,"")}}function jo(o,i){if(o&1&&(w(0),d(1,Fo,2,4,"rpl-mail-card-list",4),d(2,No,2,1,"ng-template",null,5,Vt),R()),o&2){let r=i.ngIf,t=oe(3);c(1),l("ngIf",r.length)("ngIfElse",t)}}function Bo(o,i){if(o&1&&(p(0,"rpl-scrollable-area",3),d(1,jo,4,2,"ng-container",0),v(2,"async"),u()),o&2){let r=f(2);c(1),l("ngIf",P(2,1,r.mails$))}}function $o(o,i){if(o&1&&(w(0),d(1,Bo,3,3,"rpl-scrollable-area",2),R()),o&2){let r=i.ngIf;c(1),l("rplReattachOnChange",r)}}function Vo(o,i){o&1&&(p(0,"div",8),h(1,"rpl-search-button"),u())}var Ke=yi([vi(":enter rpl-mail-card",[G({opacity:0}),G({transform:"scale(92%)"}),bi(25,[Dt(`225ms ${gt.DECELERATION_CURVE}`),G({opacity:1,transform:"scale(1)"})])],{optional:!0})]),Fn=(()=>{let i=class{constructor(){this.mailRepo=s(mt),this.navService=s(Ji),this.breakpoints=ct(),this.systemMailboxes$=we(),this.activeNavItemIndex=Yi(this.navService.activeItemIndex$,{requireSync:!0}),this.mailbox$=new Zt(1),this.mailboxName$=this.mailbox$.pipe(_(t=>typeof t=="string"?t:t.name)),this.mailboxAsEntity$=this.mailbox$.pipe(_(t=>typeof t=="string"?null:t)),this.mails$=this.mailbox$.pipe(M(t=>typeof t=="string"?this.queryVirtualMailboxMails(t):this.queryRegularMailboxMails(t)),_(t=>t.sort((e,n)=>n.sentAt.getTime()-e.sentAt.getTime())),Mt(1))}set mailbox(t){this.mailbox$.next(t)}queryVirtualMailboxMails(t){if(t===lt.Starred)return this.systemMailboxes$.pipe(M(e=>this.mailRepo.query(n=>n.isStarred&&n.mailbox!==e[st.Trash].id&&n.mailbox!==e[st.Spam].id)));if(t===lt.Sent)return this.mailRepo.query(e=>e.type==="sent");if(t===lt.Drafts)return this.mailRepo.query(e=>e.type==="draft");throw new Error(`Invalid virtual mailbox: ${t}`)}queryRegularMailboxMails(t){return this.mailRepo.query(e=>e.mailbox===t.id)}},o=i;return(()=>{i.\u0275fac=function(e){return new(e||i)}})(),(()=>{i.\u0275cmp=g({type:i,selectors:[["rpl-mail-list-layout"]],hostVars:2,hostBindings:function(e,n){e&2&&oi("@host-entrance",void 0)("@host-mailboxChange",n.activeNavItemIndex())},inputs:{mailbox:"mailbox"},decls:3,vars:4,consts:[[4,"ngIf"],["class","actions",4,"ngIf"],["class","content","rplLayoutContent","","data-route-animation-target","",4,"rplReattachOnChange"],["rplLayoutContent","","data-route-animation-target","",1,"content"],["class","list",3,"mails","currentMailbox",4,"ngIf","ngIfElse"],["empty",""],[1,"list",3,"mails","currentMailbox"],[1,"empty-prompt"],[1,"actions"]],template:function(e,n){e&1&&(d(0,$o,2,1,"ng-container",0),v(1,"async"),d(2,Vo,2,0,"div",1)),e&2&&(l("ngIf",P(1,2,n.mailboxName$)),c(2),l("ngIf",n.breakpoints()["tablet-portrait"]))},dependencies:[D,ge,Rt,Me,Wi,En,$],styles:["[_nghost-%COMP%]{display:contents}.content[_ngcontent-%COMP%]{position:relative;grid-row:1;grid-column:margin-left/margin-right}.tablet-portrait[_nghost-%COMP%]   .content[_ngcontent-%COMP%], .tablet-portrait   [_nghost-%COMP%]   .content[_ngcontent-%COMP%]{grid-column:col-2/col-8}.tablet-landscape[_nghost-%COMP%]   .content[_ngcontent-%COMP%], .tablet-landscape   [_nghost-%COMP%]   .content[_ngcontent-%COMP%]{grid-column:col-3/col-11}.laptop[_nghost-%COMP%]   .content[_ngcontent-%COMP%], .laptop   [_nghost-%COMP%]   .content[_ngcontent-%COMP%]{grid-column:col-5/col-11}.content[_ngcontent-%COMP%]   .list[_ngcontent-%COMP%]{margin:4px}.tablet-portrait[_nghost-%COMP%]   .content[_ngcontent-%COMP%]   .list[_ngcontent-%COMP%], .tablet-portrait   [_nghost-%COMP%]   .content[_ngcontent-%COMP%]   .list[_ngcontent-%COMP%]{margin:32px 0}.content[_ngcontent-%COMP%]   .empty-prompt[_ngcontent-%COMP%]{position:absolute;left:50%;top:50%;transform:translate(-50%) translateY(-50%)}.tablet-portrait[_nghost-%COMP%]   .actions[_ngcontent-%COMP%], .tablet-portrait   [_nghost-%COMP%]   .actions[_ngcontent-%COMP%]{position:absolute;top:16px;right:0}.tablet-landscape[_nghost-%COMP%]   .actions[_ngcontent-%COMP%], .tablet-landscape   [_nghost-%COMP%]   .actions[_ngcontent-%COMP%]{position:initial;grid-row:1;grid-column:col-12;padding:16px 0}"],data:{animation:[Pt("host-entrance",[rt(":enter",[ce(Ke)])]),Pt("host-mailboxChange",[rt(":increment",[Ve([qe.apply("y","forward"),ce(Ke)])]),rt(":decrement",[Ve([qe.apply("y","backward"),ce(Ke)])])])]},changeDetection:0})})(),o})();var Uo=["listLayoutNode"],Qo=["detailLayoutNode"];function Yo(o,i){if(o&1&&h(0,"rpl-mail-detail-layout",5,6),o&2){let r=i.ngIf,t=f().ngIf;l("mailbox",t)("mail",r)}}function qo(o,i){if(o&1&&(w(0),h(1,"rpl-mail-list-layout",2,3),d(3,Yo,2,2,"rpl-mail-detail-layout",4),v(4,"async"),R()),o&2){let r=i.ngIf,t=f(2);c(1),l("mailbox",r),c(2),l("ngIf",P(4,2,t.mail$))}}function zo(o,i){if(o&1&&(w(0),d(1,qo,5,4,"ng-container",1),v(2,"async"),R()),o&2){let r=f();c(1),l("ngIf",P(2,1,r.mailbox$))}}var Nn=(()=>{let i=class{constructor(){this.router=s(Ui),this.route=s(de),this.mailRepo=s(mt),this.mailboxRepo=s(K),this.hostNode=s(Qt),this.layoutSnapper=s(Ai),this.layoutAnimator=s(Ei),this.viewContainer=s(It),this.toggleMailReadStatus=U(Pe),this.mailId$=this.route.params.pipe(_(t=>t.mailId)),this.mail$=this.mailId$.pipe(M(t=>t?this.mailRepo.retrieve(t):et(null)),Mt(1)),this.mailboxName$=this.route.params.pipe(_(t=>t.mailboxName)),this.mailbox$=this.mailboxName$.pipe(M(t=>Object.values(lt).includes(t)?et(t):this.mailboxRepo.queryOne(e=>e.name===t).pipe(x(Boolean)))),this.listLayoutSnapshots=new Qe,this.detailLayoutSnapshots=new Qe,this.destroy$=new L,s(Qt,{self:!0}).identifyAs("mails")}ngAfterViewInit(){this.router.events.pipe(it(this.destroy$),x(t=>t instanceof Hi)).subscribe(()=>{this.updateSnapshots()}),this.mail$.pipe(Ee(),x(([t,e])=>!t&&!!e),M(()=>this.initiateListToDetailLayoutAnimation()),M(()=>this.mail$.pipe(N(),x(Boolean),x(t=>!t.isRead),M(t=>this.toggleMailReadStatus({mail:t,to:"read"}))))).subscribe(),this.mail$.pipe(Ee(),x(([t,e])=>!!t&&!e),_(([t])=>t),M(t=>this.initiateDetailToListLayoutAnimation(t))).subscribe()}ngOnDestroy(){this.destroy$.emit()}updateSnapshots(){this.listLayoutSnapshots=this.layoutSnapper.snapshotTree(this.listLayoutNode,{measure:!0}),this.detailLayoutNode&&(this.detailLayoutSnapshots=this.layoutSnapper.snapshotTree(this.detailLayoutNode,{measure:!0}))}initiateListToDetailLayoutAnimation(){return Te(this,null,function*(){yield Jt(ke()),yield this.layoutAnimator.animate({root:this.hostNode,from:this.listLayoutSnapshots,duration:250,easing:gt.STANDARD_CURVE,estimation:!0})})}initiateDetailToListLayoutAnimation(t){return Te(this,null,function*(){let e=this.listLayoutSnapshots.get(`mail-${t.id}`);if(!e)return;let n=An,a=this.viewContainer.createComponent(n);a.setInput("mail",t);let m=a.location.nativeElement;m.style.position="fixed",m.style.top=e.boundingBox.top+"px",m.style.left=e.boundingBox.left+"px",m.style.width=e.boundingBox.width()+"px",m.style.height=e.boundingBox.height()+"px",yield Jt(ke());let S=yield Jt(a.instance.node$);S.identifyAs(`mail-${t.id}`),S.attach(this.hostNode),this.listLayoutNode.deactivate(),yield this.layoutAnimator.animate({root:this.hostNode,from:this.detailLayoutSnapshots,duration:250,easing:gt.STANDARD_CURVE,estimation:!0}),S.detach(),a.destroy(),this.listLayoutNode.activate()})}},o=i;return(()=>{i.\u0275fac=function(e){return new(e||i)}})(),(()=>{i.\u0275cmp=g({type:i,selectors:[["rpl-mails"]],viewQuery:function(e,n){if(e&1&&(A(Uo,5),A(Qo,5)),e&2){let a;O(a=T())&&(n.listLayoutNode=a.first),O(a=T())&&(n.detailLayoutNode=a.first)}},features:[ii([F])],decls:1,vars:0,consts:[[4,"lpjAnimationScope"],[4,"ngIf"],["lpjNode","list-layout",3,"mailbox"],["listLayoutNode","lpjNode"],["lpjNode","detail-layout",3,"mailbox","mail",4,"ngIf"],["lpjNode","detail-layout",3,"mailbox","mail"],["detailLayoutNode","lpjNode"]],template:function(e,n){e&1&&d(0,zo,3,3,"ng-container",0)},dependencies:[D,F,Fi,H,Fn,Ln,$],styles:["[_nghost-%COMP%]{display:contents}"],changeDetection:0})})(),o})();var Xo=o=>{let i=o.params.mailboxName;return Object.values(lt).includes(i)?!0:s(K).queryOne(t=>t.name===o.params.mailboxName).pipe(_(Boolean),N())},Wo=[{path:"mailboxes/:mailboxName/mails",canActivate:[Xo],title:o=>o.params.mailboxName,children:[{matcher:o=>o.length===0?{consumed:o,posParams:{}}:o.length===1?{consumed:o,posParams:{mailId:o[0]}}:null,component:Nn}]}],jn=(()=>{let i=class{},o=i;return(()=>{i.\u0275fac=function(e){return new(e||i)}})(),(()=>{i.\u0275mod=dt({type:i})})(),(()=>{i.\u0275inj=ut({imports:[Ye.forChild(Wo),Ye]})})(),o})();var Tc=(()=>{let i=class{},o=i;return(()=>{i.\u0275fac=function(e){return new(e||i)}})(),(()=>{i.\u0275mod=dt({type:i})})(),(()=>{i.\u0275inj=ut({imports:[Y,jn,ue,Xi,dn,Gi,Ut,pe,$i,Vi,ge,Rt,Ce]})})(),o})();export{Tc as MailsModule};
