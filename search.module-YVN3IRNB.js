import{a as ve,b as Me,c as xe}from"./chunk-FXSVUPEG.js";import{b as T}from"./chunk-VDY3TAVN.js";import"./chunk-CAKSPPV6.js";import{d as C,e as H}from"./chunk-NDVG3ABE.js";import{b as _e}from"./chunk-N53OVHMM.js";import{c as ce,e as me,f as de,g as pe}from"./chunk-MO5QYGRS.js";import{a as te,b as P,d as ie}from"./chunk-DZA5LO2U.js";import{a as he,b as ue,c as fe,d as ge}from"./chunk-R6VSRYIY.js";import"./chunk-2JTZSRJ6.js";import{a as ne,d as oe,e as re,f as se,g as ae,i as le}from"./chunk-NKPKU52J.js";import{A as B,Aa as m,Ab as W,Bb as w,Ca as a,Da as l,Ea as c,Fa as _,Ga as v,Gb as S,H as O,Ha as M,Hb as Y,Ja as Z,Jc as G,La as D,N as $,Na as d,Pc as q,Qc as J,Ra as U,V as h,Va as x,Wa as y,X as g,Y as R,Z as u,da as z,dd as F,e as L,ea as V,eb as p,ed as X,fb as f,fd as K,gb as A,gd as Q,hd as ee,m as I,o as j,ra as r,td as b,ud as k}from"./chunk-3QVC2YGB.js";import"./chunk-OIPWLAE3.js";var N=(()=>{let e=class{},t=e;return(()=>{e.\u0275fac=function(i){return new(i||e)}})(),(()=>{e.\u0275mod=u({type:e})})(),(()=>{e.\u0275inj=h({})})(),t})();var ye=(()=>{let e=class{},t=e;return(()=>{e.\u0275fac=function(i){return new(i||e)}})(),(()=>{e.\u0275mod=u({type:e})})(),(()=>{e.\u0275inj=h({providers:[q],imports:[N,C,G,N,C]})})(),t})();function Fe(t,e){if(t&1&&(l(0,"div",6)(1,"span"),x(2),c(),x(3," - "),l(4,"span"),x(5),p(6,"readableDate"),c()()),t&2){let o=e.ngIf,n=d(2).$implicit,i;r(2),y((i=o.name)!==null&&i!==void 0?i:o.email),r(3),y(f(6,2,n.sentAt))}}function be(t,e){if(t&1&&(l(0,"a",4),_(1,"mat-icon",5),l(2,"div",6),x(3),c(),m(4,Fe,7,4,"div",7),p(5,"async"),p(6,"resolveRef"),c()),t&2){let o=e.ngIf,n=d().$implicit,i=d(4);U("routerLink","/mailboxes/",o.name,"/mails/",n.id,""),r(3),y(n.subject),r(1),a("ngIf",f(5,4,A(6,6,n.sender,i.contactRepo)))}}function Te(t,e){if(t&1&&(v(0),m(1,be,7,9,"a",3),p(2,"async"),p(3,"resolveRef"),M()),t&2){let o=e.$implicit,n=d(4);r(1),a("ngIf",o.mailbox&&f(2,1,A(3,3,o.mailbox,n.mailboxRepo)))}}function He(t,e){if(t&1&&(v(0),l(1,"div",2),x(2),c(),m(3,Te,4,6,"ng-container",1),M()),t&2){let o=d().$implicit;r(2),y(o.name),r(1),a("ngForOf",o.items)}}function De(t,e){if(t&1&&(v(0),m(1,He,4,2,"ng-container",0),M()),t&2){let o=e.$implicit;r(1),a("ngIf",o.items.length)}}function Ae(t,e){if(t&1&&(l(0,"mat-nav-list"),m(1,De,2,1,"ng-container",1),c()),t&2){let o=e.ngIf;r(1),a("ngForOf",o)}}var Ce=(()=>{let e=class{set mails(n){this.mails$.next(n)}constructor(){this.contactRepo=g(te),this.mailboxRepo=g(fe),this.mails$=new L([])}ngOnInit(){this.mailsGroups$=this.mails$.pipe(I(n=>{let i={Yesterday:[],["This Week"]:[],Earlier:[]};return n.forEach(s=>{P().subtract(1,"day").isBefore(s.sentAt)?i.Yesterday.push(s):P().subtract(1,"week").isBefore(s.sentAt)?i["This Week"].push(s):i.Earlier.push(s)}),[{name:"Yesterday",items:i.Yesterday},{name:"This Week",items:i["This Week"]},{name:"Earlier",items:i.Earlier}]}))}},t=e;return(()=>{e.\u0275fac=function(i){return new(i||e)}})(),(()=>{e.\u0275cmp=R({type:e,selectors:[["rpl-search-result-list"]],inputs:{mails:"mails"},decls:2,vars:3,consts:[[4,"ngIf"],[4,"ngFor","ngForOf"],[1,"subheader"],["mat-list-item","",3,"routerLink",4,"ngIf"],["mat-list-item","",3,"routerLink"],["matListIcon","","fontSet","filled","fontIcon","schedule"],["matLine",""],["matLine","",4,"ngIf"]],template:function(i,s){i&1&&(m(0,Ae,2,1,"mat-nav-list",0),p(1,"async")),i&2&&a("ngIf",f(1,1,s.mailsGroups$))},dependencies:[W,w,b,F,ce,de,J,me,S,ve,xe],styles:[".subheader[_ngcontent-%COMP%]{margin:12px 20px;text-transform:uppercase}"],changeDetection:0})})(),t})();function Pe(t,e){if(t&1){let o=Z();v(0),l(1,"rpl-header",1)(2,"a",2),_(3,"mat-icon",3),c(),l(4,"input",4),D("ngModelChange",function(i){z(o);let s=d();return V(s.searchText$.next(i))}),c(),l(5,"button",5),_(6,"mat-icon",6),c()(),l(7,"rpl-scrollable-area",7),_(8,"rpl-search-result-list",8),c(),M()}if(t&2){let o=e.ngIf,n=d(),i;r(2),a("routerLink",(i=n.activeNavItem())==null?null:i.url),r(2),a("ngModel",n.searchText$.value),r(4),a("mails",o)}}var Ee=(()=>{let e=class{constructor(){this.navService=g(ge),this.mailRepo=g(_e),this.activeNavItem=ie(this.navService.activeItem$,{requireSync:!0}),this.searchText$=new L(""),this.mails$=j(this.searchText$.pipe(O()),this.searchText$.pipe(B(200))).pipe(I(n=>n.split(" ")),$(n=>this.mailRepo.query(({subject:i})=>!!i&&n.some(s=>i.toLowerCase().includes(s.toLowerCase())))))}},t=e;return(()=>{e.\u0275fac=function(i){return new(i||e)}})(),(()=>{e.\u0275cmp=R({type:e,selectors:[["rpl-search"]],decls:2,vars:3,consts:[[4,"ngIf"],["ngForm","",1,"search-bar"],["mat-icon-button","","matTooltip","Back",3,"routerLink"],["fontSet","filled","fontIcon","arrow_back"],["name","search","type","text","placeholder","Search emails",3,"ngModel","ngModelChange"],["mat-icon-button",""],["fontSet","filled","fontIcon","mic"],["rplLayoutContent","","data-route-animation-target","",1,"search-result"],[3,"mails"]],template:function(i,s){i&1&&(m(0,Pe,9,3,"ng-container",0),p(1,"async")),i&2&&a("ngIf",f(1,1,s.mails$))},dependencies:[w,ne,oe,re,ae,se,b,K,Q,F,he,T,Me,H,Ce,S],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;height:100%}.search-bar[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:0;flex-grow:1;font-size:18px;font-weight:400;line-height:24px;font-family:Work Sans,sans-serif;letter-spacing:normal}.search-result[_ngcontent-%COMP%]{height:0;flex-grow:1}"],changeDetection:0})})(),t})();var je=[{path:"",component:Ee,title:"Search",data:{animationId:"search"}}],Le=(()=>{let e=class{},t=e;return(()=>{e.\u0275fac=function(i){return new(i||e)}})(),(()=>{e.\u0275mod=u({type:e})})(),(()=>{e.\u0275inj=h({imports:[k.forChild(je),k]})})(),t})();var Kt=(()=>{let e=class{},t=e;return(()=>{e.\u0275fac=function(i){return new(i||e)}})(),(()=>{e.\u0275mod=u({type:e})})(),(()=>{e.\u0275inj=h({imports:[Y,le,Le,ee,X,C,ye,pe,ue,T,H]})})(),t})();export{Kt as SearchModule};
