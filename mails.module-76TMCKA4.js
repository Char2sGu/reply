import{b as Mi,c as yi,d as vi,e as Be,f as Ii,g as Pi,i as Fi,j as Bi,k as ji,l as $i}from"./chunk-KJC4PF6B.js";import{a as me,b as pe,d as ue}from"./chunk-SCW2PD66.js";import{b as Pt}from"./chunk-2SKRDM35.js";import{c as Vi}from"./chunk-JWYHAYBW.js";import{a as le,b as Xi,c as ce,d as Zi}from"./chunk-GQLKKIYV.js";import{a as Si,b as je,c as Di,d as $t,e as wi,f as Ti,g as k,h as Oi,i as Ai,j as Ri,k as E,l as Ei,o as Ve,q as It}from"./chunk-3XARSZJN.js";import{a as Wi}from"./chunk-MVUL6ZIM.js";import{b as Ji,c as F,d as Ht}from"./chunk-LJ7UDTCX.js";import{d as Yi,f as qi,g as zi}from"./chunk-IJYCWCJA.js";import"./chunk-C6VMUQFT.js";import{a as Y,b as Gi,c as Ki}from"./chunk-EFASKN6N.js";import{b as pi,f as ui,i as oe,l as ke,m as Vt,n as it,p as N}from"./chunk-HDMEYBD3.js";import"./chunk-IKTP4ODH.js";import{$ as Zt,Ab as Bt,Ca as c,Cb as ct,Cc as mi,D as Ge,Da as Te,Ea as y,Ec as vt,F as Gt,Fb as ii,Fc as Ct,Ga as J,Gc as Ne,Gd as T,H as ut,Ha as We,Hb as Re,Hc as Q,Ia as G,Ib as ni,Ic as Fe,Ja as d,Jb as ne,Jc as tt,Ka as Jt,Kb as w,Kc as di,La as s,Ma as p,Mc as ae,N as De,Na as u,Nc as fi,Oa as f,Oc as hi,Pa as P,Pb as L,Pd as Hi,Q as we,Qa as S,Qb as Z,Qc as mt,Ra as Ze,Sa as lt,Sc as re,Sd as se,Tc as gi,U as Xt,Ua as O,Vc as _i,W as Wt,Wa as h,Wd as Qi,X as z,Xa as Nt,Xd as xt,Y as K,Ya as _t,Yb as oi,Yd as $e,Za as X,Zd as Ui,_ as Xe,a as qt,ab as Mt,c as Pe,ca as dt,cb as b,cc as ai,cd as bt,d as pt,da as at,db as W,dc as Ee,dd as jt,e as ze,eb as H,f as nt,fa as m,g as Se,ga as _,ha as rt,hb as Ke,ia as kt,ib as te,ja as ft,jb as ee,kb as Je,l as Lt,lb as ti,md as U,n as zt,na as $,nb as M,nd as Ci,oa as V,ob as v,od as et,p as g,pa as Kt,pb as Oe,pc as ri,pd as bi,q as j,qa as ht,qb as D,qd as xi,rb as ei,sb as Ae,sc as si,ta as st,tb as yt,tc as li,td as Li,ub as x,vb as A,vc as Le,vd as ki,wb as ie,wd as Ni,x as ot,xb as I,xc as ci,yb as Ft,z as R,za as gt}from"./chunk-KBDKS3MK.js";import{a as qe,j as Yt}from"./chunk-3J24ZBPC.js";var jn=["mat-menu-item",""];function $n(o,i){o&1&&(Kt(),p(0,"svg",3),f(1,"polygon",4),u())}var Vn=[[["mat-icon"],["","matMenuItemIcon",""]],"*"],Hn=["mat-icon, [matMenuItemIcon]","*"];var de=new st("MAT_MENU_PANEL"),Qn=_i(gi(class{})),Dt=(()=>{let i=class extends Qn{constructor(t,e,n,a,l){super(),this._elementRef=t,this._document=e,this._focusMonitor=n,this._parentMenu=a,this._changeDetectorRef=l,this.role="menuitem",this._hovered=new pt,this._focused=new pt,this._highlighted=!1,this._triggersSubmenu=!1,a?.addItem?.(this)}focus(t,e){this._focusMonitor&&t?this._focusMonitor.focusVia(this._getHostElement(),t,e):this._getHostElement().focus(e),this._focused.next(this)}ngAfterViewInit(){this._focusMonitor&&this._focusMonitor.monitor(this._elementRef,!1)}ngOnDestroy(){this._focusMonitor&&this._focusMonitor.stopMonitoring(this._elementRef),this._parentMenu&&this._parentMenu.removeItem&&this._parentMenu.removeItem(this),this._hovered.complete(),this._focused.complete()}_getTabIndex(){return this.disabled?"-1":"0"}_getHostElement(){return this._elementRef.nativeElement}_checkDisabled(t){this.disabled&&(t.preventDefault(),t.stopPropagation())}_handleMouseEnter(){this._hovered.next(this)}getLabel(){let t=this._elementRef.nativeElement.cloneNode(!0),e=t.querySelectorAll("mat-icon, .material-icons");for(let n=0;n<e.length;n++)e[n].remove();return t.textContent?.trim()||""}_setHighlighted(t){this._highlighted=t,this._changeDetectorRef?.markForCheck()}_setTriggersSubmenu(t){this._triggersSubmenu=t,this._changeDetectorRef?.markForCheck()}_hasFocus(){return this._document&&this._document.activeElement===this._getHostElement()}},o=i;return(()=>{i.\u0275fac=function(e){return new(e||i)(y(gt),y(ii),y(Le),y(de,8),y(ct))}})(),(()=>{i.\u0275cmp=_({type:i,selectors:[["","mat-menu-item",""]],hostAttrs:[1,"mat-mdc-menu-item","mat-mdc-focus-indicator","mdc-list-item"],hostVars:8,hostBindings:function(e,n){e&1&&O("click",function(l){return n._checkDisabled(l)})("mouseenter",function(){return n._handleMouseEnter()}),e&2&&(G("role",n.role)("tabindex",n._getTabIndex())("aria-disabled",n.disabled)("disabled",n.disabled||null),Mt("mat-mdc-menu-item-highlighted",n._highlighted)("mat-mdc-menu-item-submenu-trigger",n._triggersSubmenu))},inputs:{disabled:"disabled",disableRipple:"disableRipple",role:"role"},exportAs:["matMenuItem"],features:[J],attrs:jn,ngContentSelectors:Hn,decls:5,vars:3,consts:[[1,"mdc-list-item__primary-text"],["matRipple","",1,"mat-mdc-menu-ripple",3,"matRippleDisabled","matRippleTrigger"],["class","mat-mdc-menu-submenu-icon","viewBox","0 0 5 10","focusable","false","aria-hidden","true",4,"ngIf"],["viewBox","0 0 5 10","focusable","false","aria-hidden","true",1,"mat-mdc-menu-submenu-icon"],["points","0,0 5,5 0,10"]],template:function(e,n){e&1&&(Nt(Vn),_t(0),p(1,"span",0),_t(2,1),u(),f(3,"div",1),d(4,$n,2,0,"svg",2)),e&2&&(c(3),s("matRippleDisabled",n.disableRipple||n.disabled)("matRippleTrigger",n._getHostElement()),c(1),s("ngIf",n._triggersSubmenu))},dependencies:[w,bt],encapsulation:2,changeDetection:0})})(),o})();var an=new st("MatMenuContent");var Qt={transformMenu:vt("transformMenu",[Fe("void",Q({opacity:0,transform:"scale(0.8)"})),tt("void => enter",Ct("120ms cubic-bezier(0, 0, 0.2, 1)",Q({opacity:1,transform:"scale(1)"}))),tt("* => void",Ct("100ms 25ms linear",Q({opacity:0})))]),fadeInItems:vt("fadeInItems",[Fe("showing",Q({opacity:1})),tt("void => *",[Q({opacity:0}),Ct("400ms 100ms cubic-bezier(0.55, 0, 0.55, 0.2)")])])},xa=Qt.fadeInItems,Ia=Qt.transformMenu,Un=0,He=new st("mat-menu-default-options",{providedIn:"root",factory:Yn});function Yn(){return{overlapTrigger:!1,xPosition:"after",yPosition:"below",backdropClass:"cdk-overlay-transparent-backdrop"}}var St=(()=>{let i=class{get xPosition(){return this._xPosition}set xPosition(t){this._xPosition=t,this.setPositionClasses()}get yPosition(){return this._yPosition}set yPosition(t){this._yPosition=t,this.setPositionClasses()}get overlapTrigger(){return this._overlapTrigger}set overlapTrigger(t){this._overlapTrigger=Ee(t)}get hasBackdrop(){return this._hasBackdrop}set hasBackdrop(t){this._hasBackdrop=Ee(t)}set panelClass(t){let e=this._previousPanelClass;e&&e.length&&e.split(" ").forEach(n=>{this._classList[n]=!1}),this._previousPanelClass=t,t&&t.length&&(t.split(" ").forEach(n=>{this._classList[n]=!0}),this._elementRef.nativeElement.className="")}get classList(){return this.panelClass}set classList(t){this.panelClass=t}constructor(t,e,n,a){this._elementRef=t,this._ngZone=e,this._changeDetectorRef=a,this._directDescendantItems=new ei,this._classList={},this._panelAnimationState="void",this._animationDone=new pt,this.closed=new D,this.close=this.closed,this.panelId=`mat-menu-panel-${Un++}`,this.overlayPanelClass=n.overlayPanelClass||"",this._xPosition=n.xPosition,this._yPosition=n.yPosition,this.backdropClass=n.backdropClass,this._overlapTrigger=n.overlapTrigger,this._hasBackdrop=n.hasBackdrop}ngOnInit(){this.setPositionClasses()}ngAfterContentInit(){this._updateDirectDescendants(),this._keyManager=new ri(this._directDescendantItems).withWrap().withTypeAhead().withHomeAndEnd(),this._keyManager.tabOut.subscribe(()=>this.closed.emit("tab")),this._directDescendantItems.changes.pipe(Wt(this._directDescendantItems),z(t=>ot(...t.map(e=>e._focused)))).subscribe(t=>this._keyManager.updateActiveItem(t)),this._directDescendantItems.changes.subscribe(t=>{let e=this._keyManager;if(this._panelAnimationState==="enter"&&e.activeItem?._hasFocus()){let n=t.toArray(),a=Math.max(0,Math.min(n.length-1,e.activeItemIndex||0));n[a]&&!n[a].disabled?e.setActiveItem(a):e.setNextItemActive()}})}ngOnDestroy(){this._keyManager?.destroy(),this._directDescendantItems.destroy(),this.closed.complete(),this._firstItemFocusSubscription?.unsubscribe()}_hovered(){return this._directDescendantItems.changes.pipe(Wt(this._directDescendantItems),z(e=>ot(...e.map(n=>n._hovered))))}addItem(t){}removeItem(t){}_handleKeydown(t){let e=t.keyCode,n=this._keyManager;switch(e){case 27:ai(t)||(t.preventDefault(),this.closed.emit("keydown"));break;case 37:this.parentMenu&&this.direction==="ltr"&&this.closed.emit("keydown");break;case 39:this.parentMenu&&this.direction==="rtl"&&this.closed.emit("keydown");break;default:(e===38||e===40)&&n.setFocusOrigin("keyboard"),n.onKeydown(t);return}t.stopPropagation()}focusFirstItem(t="program"){this._firstItemFocusSubscription?.unsubscribe(),this._firstItemFocusSubscription=this._ngZone.onStable.pipe(Gt(1)).subscribe(()=>{let e=null;if(this._directDescendantItems.length&&(e=this._directDescendantItems.first._getHostElement().closest('[role="menu"]')),!e||!e.contains(document.activeElement)){let n=this._keyManager;n.setFocusOrigin(t).setFirstItemActive(),!n.activeItem&&e&&e.focus()}})}resetActiveItem(){this._keyManager.setActiveItem(-1)}setElevation(t){let e=Math.min(this._baseElevation+t,24),n=`${this._elevationPrefix}${e}`,a=Object.keys(this._classList).find(l=>l.startsWith(this._elevationPrefix));(!a||a===this._previousElevation)&&(this._previousElevation&&(this._classList[this._previousElevation]=!1),this._classList[n]=!0,this._previousElevation=n)}setPositionClasses(t=this.xPosition,e=this.yPosition){let n=this._classList;n["mat-menu-before"]=t==="before",n["mat-menu-after"]=t==="after",n["mat-menu-above"]=e==="above",n["mat-menu-below"]=e==="below",this._changeDetectorRef?.markForCheck()}_startAnimation(){this._panelAnimationState="enter"}_resetAnimation(){this._panelAnimationState="void"}_onAnimationDone(t){this._animationDone.next(t),this._isAnimating=!1}_onAnimationStart(t){this._isAnimating=!0,t.toState==="enter"&&this._keyManager.activeItemIndex===0&&(t.element.scrollTop=0)}_updateDirectDescendants(){this._allItems.changes.pipe(Wt(this._allItems)).subscribe(t=>{this._directDescendantItems.reset(t.filter(e=>e._parentMenu===this)),this._directDescendantItems.notifyOnChanges()})}},o=i;return(()=>{i.\u0275fac=function(e){return new(e||i)(y(gt),y(Bt),y(He),y(ct))}})(),(()=>{i.\u0275dir=kt({type:i,contentQueries:function(e,n,a){if(e&1&&(ie(a,an,5),ie(a,Dt,5),ie(a,Dt,4)),e&2){let l;x(l=I())&&(n.lazyContent=l.first),x(l=I())&&(n._allItems=l),x(l=I())&&(n.items=l)}},viewQuery:function(e,n){if(e&1&&A(Ae,5),e&2){let a;x(a=I())&&(n.templateRef=a.first)}},inputs:{backdropClass:"backdropClass",ariaLabel:["aria-label","ariaLabel"],ariaLabelledby:["aria-labelledby","ariaLabelledby"],ariaDescribedby:["aria-describedby","ariaDescribedby"],xPosition:"xPosition",yPosition:"yPosition",overlapTrigger:"overlapTrigger",hasBackdrop:"hasBackdrop",panelClass:["class","panelClass"],classList:"classList"},outputs:{closed:"closed",close:"close"}})})(),o})();var rn=new st("mat-menu-scroll-strategy");function qn(o){return()=>o.scrollStrategies.reposition()}var sn={provide:rn,deps:[oe],useFactory:qn},tn=oi({passive:!0});var ln=(()=>{let i=class{get _deprecatedMatMenuTriggerFor(){return this.menu}set _deprecatedMatMenuTriggerFor(t){this.menu=t}get menu(){return this._menu}set menu(t){t!==this._menu&&(this._menu=t,this._menuCloseSubscription.unsubscribe(),t&&(this._parentMaterialMenu,this._menuCloseSubscription=t.close.subscribe(e=>{this._destroyMenu(e),(e==="click"||e==="tab")&&this._parentMaterialMenu&&this._parentMaterialMenu.closed.emit(e)})),this._menuItemInstance?._setTriggersSubmenu(this.triggersSubmenu()))}constructor(t,e,n,a,l,B,Tt,Ot,At){this._overlay=t,this._element=e,this._viewContainerRef=n,this._menuItemInstance=B,this._dir=Tt,this._focusMonitor=Ot,this._ngZone=At,this._overlayRef=null,this._menuOpen=!1,this._closingActionsSubscription=qt.EMPTY,this._hoverSubscription=qt.EMPTY,this._menuCloseSubscription=qt.EMPTY,this._changeDetectorRef=m(ct),this._handleTouchStart=Rt=>{li(Rt)||(this._openedBy="touch")},this._openedBy=void 0,this.restoreFocus=!0,this.menuOpened=new D,this.onMenuOpen=this.menuOpened,this.menuClosed=new D,this.onMenuClose=this.menuClosed,this._scrollStrategy=a,this._parentMaterialMenu=l instanceof St?l:void 0,e.nativeElement.addEventListener("touchstart",this._handleTouchStart,tn)}ngAfterContentInit(){this._handleHover()}ngOnDestroy(){this._overlayRef&&(this._overlayRef.dispose(),this._overlayRef=null),this._element.nativeElement.removeEventListener("touchstart",this._handleTouchStart,tn),this._menuCloseSubscription.unsubscribe(),this._closingActionsSubscription.unsubscribe(),this._hoverSubscription.unsubscribe()}get menuOpen(){return this._menuOpen}get dir(){return this._dir&&this._dir.value==="rtl"?"rtl":"ltr"}triggersSubmenu(){return!!(this._menuItemInstance&&this._parentMaterialMenu&&this.menu)}toggleMenu(){return this._menuOpen?this.closeMenu():this.openMenu()}openMenu(){let t=this.menu;if(this._menuOpen||!t)return;let e=this._createOverlay(t),n=e.getConfig(),a=n.positionStrategy;this._setPosition(t,a),n.hasBackdrop=t.hasBackdrop==null?!this.triggersSubmenu():t.hasBackdrop,e.attach(this._getPortal(t)),t.lazyContent&&t.lazyContent.attach(this.menuData),this._closingActionsSubscription=this._menuClosingActions().subscribe(()=>this.closeMenu()),this._initMenu(t),t instanceof St&&(t._startAnimation(),t._directDescendantItems.changes.pipe(K(t.close)).subscribe(()=>{a.withLockedPosition(!1).reapplyLastPosition(),a.withLockedPosition(!0)}))}closeMenu(){this.menu?.close.emit()}focus(t,e){this._focusMonitor&&t?this._focusMonitor.focusVia(this._element,t,e):this._element.nativeElement.focus(e)}updatePosition(){this._overlayRef?.updatePosition()}_destroyMenu(t){if(!this._overlayRef||!this.menuOpen)return;let e=this.menu;this._closingActionsSubscription.unsubscribe(),this._overlayRef.detach(),this.restoreFocus&&(t==="keydown"||!this._openedBy||!this.triggersSubmenu())&&this.focus(this._openedBy),this._openedBy=void 0,e instanceof St?(e._resetAnimation(),e.lazyContent?e._animationDone.pipe(R(n=>n.toState==="void"),Gt(1),K(e.lazyContent._attached)).subscribe({next:()=>e.lazyContent.detach(),complete:()=>this._setIsMenuOpen(!1)}):this._setIsMenuOpen(!1)):(this._setIsMenuOpen(!1),e?.lazyContent?.detach())}_initMenu(t){t.parentMenu=this.triggersSubmenu()?this._parentMaterialMenu:void 0,t.direction=this.dir,this._setMenuElevation(t),t.focusFirstItem(this._openedBy||"program"),this._setIsMenuOpen(!0)}_setMenuElevation(t){if(t.setElevation){let e=0,n=t.parentMenu;for(;n;)e++,n=n.parentMenu;t.setElevation(e)}}_setIsMenuOpen(t){t!==this._menuOpen&&(this._menuOpen=t,this._menuOpen?this.menuOpened.emit():this.menuClosed.emit(),this.triggersSubmenu()&&this._menuItemInstance._setHighlighted(t),this._changeDetectorRef.markForCheck())}_createOverlay(t){if(!this._overlayRef){let e=this._getOverlayConfig(t);this._subscribeToPositions(t,e.positionStrategy),this._overlayRef=this._overlay.create(e),this._overlayRef.keydownEvents().subscribe()}return this._overlayRef}_getOverlayConfig(t){return new ui({positionStrategy:this._overlay.position().flexibleConnectedTo(this._element).withLockedPosition().withGrowAfterOpen().withTransformOriginOn(".mat-menu-panel, .mat-mdc-menu-panel"),backdropClass:t.backdropClass||"cdk-overlay-transparent-backdrop",panelClass:t.overlayPanelClass,scrollStrategy:this._scrollStrategy(),direction:this._dir})}_subscribeToPositions(t,e){t.setPositionClasses&&e.positionChanges.subscribe(n=>{let a=n.connectionPair.overlayX==="start"?"after":"before",l=n.connectionPair.overlayY==="top"?"below":"above";this._ngZone?this._ngZone.run(()=>t.setPositionClasses(a,l)):t.setPositionClasses(a,l)})}_setPosition(t,e){let[n,a]=t.xPosition==="before"?["end","start"]:["start","end"],[l,B]=t.yPosition==="above"?["bottom","top"]:["top","bottom"],[Tt,Ot]=[l,B],[At,Rt]=[n,a],Et=0;if(this.triggersSubmenu()){if(Rt=n=t.xPosition==="before"?"start":"end",a=At=n==="end"?"start":"end",this._parentMaterialMenu){if(this._parentInnerPadding==null){let Ye=this._parentMaterialMenu.items.first;this._parentInnerPadding=Ye?Ye._getHostElement().offsetTop:0}Et=l==="bottom"?this._parentInnerPadding:-this._parentInnerPadding}}else t.overlapTrigger||(Tt=l==="top"?"bottom":"top",Ot=B==="top"?"bottom":"top");e.withPositions([{originX:n,originY:Tt,overlayX:At,overlayY:l,offsetY:Et},{originX:a,originY:Tt,overlayX:Rt,overlayY:l,offsetY:Et},{originX:n,originY:Ot,overlayX:At,overlayY:B,offsetY:-Et},{originX:a,originY:Ot,overlayX:Rt,overlayY:B,offsetY:-Et}])}_menuClosingActions(){let t=this._overlayRef.backdropClick(),e=this._overlayRef.detachments(),n=this._parentMaterialMenu?this._parentMaterialMenu.closed:Lt(),a=this._parentMaterialMenu?this._parentMaterialMenu._hovered().pipe(R(l=>l!==this._menuItemInstance),R(()=>this._menuOpen)):Lt();return ot(t,n,a,e)}_handleMousedown(t){si(t)||(this._openedBy=t.button===0?"mouse":void 0,this.triggersSubmenu()&&t.preventDefault())}_handleKeydown(t){let e=t.keyCode;(e===13||e===32)&&(this._openedBy="keyboard"),this.triggersSubmenu()&&(e===39&&this.dir==="ltr"||e===37&&this.dir==="rtl")&&(this._openedBy="keyboard",this.openMenu())}_handleClick(t){this.triggersSubmenu()?(t.stopPropagation(),this.openMenu()):this.toggleMenu()}_handleHover(){!this.triggersSubmenu()||!this._parentMaterialMenu||(this._hoverSubscription=this._parentMaterialMenu._hovered().pipe(R(t=>t===this._menuItemInstance&&!t.disabled),ut(0,Se)).subscribe(()=>{this._openedBy="mouse",this.menu instanceof St&&this.menu._isAnimating?this.menu._animationDone.pipe(Gt(1),ut(0,Se),K(this._parentMaterialMenu._hovered())).subscribe(()=>this.openMenu()):this.openMenu()}))}_getPortal(t){return(!this._portal||this._portal.templateRef!==t.templateRef)&&(this._portal=new pi(t.templateRef,this._viewContainerRef)),this._portal}},o=i;return(()=>{i.\u0275fac=function(e){return new(e||i)(y(oe),y(gt),y(yt),y(rn),y(de,8),y(Dt,10),y(ci,8),y(Le),y(Bt))}})(),(()=>{i.\u0275dir=kt({type:i,hostVars:3,hostBindings:function(e,n){e&1&&O("click",function(l){return n._handleClick(l)})("mousedown",function(l){return n._handleMousedown(l)})("keydown",function(l){return n._handleKeydown(l)}),e&2&&G("aria-haspopup",n.menu?"menu":null)("aria-expanded",n.menuOpen)("aria-controls",n.menuOpen?n.menu.panelId:null)},inputs:{_deprecatedMatMenuTriggerFor:["mat-menu-trigger-for","_deprecatedMatMenuTriggerFor"],menu:["matMenuTriggerFor","menu"],menuData:["matMenuTriggerData","menuData"],restoreFocus:["matMenuTriggerRestoreFocus","restoreFocus"]},outputs:{menuOpened:"menuOpened",onMenuOpen:"onMenuOpen",menuClosed:"menuClosed",onMenuClose:"onMenuClose"}})})(),o})();function zn(o,i){if(o&1){let r=lt();p(0,"div",0),O("keydown",function(e){$(r);let n=h();return V(n._handleKeydown(e))})("click",function(){$(r);let e=h();return V(e.closed.emit("click"))})("@transformMenu.start",function(e){$(r);let n=h();return V(n._onAnimationStart(e))})("@transformMenu.done",function(e){$(r);let n=h();return V(n._onAnimationDone(e))}),p(1,"div",1),_t(2),u()()}if(o&2){let r=h();s("id",r.panelId)("ngClass",r._classList)("@transformMenu",r._panelAnimationState),G("aria-label",r.ariaLabel||null)("aria-labelledby",r.ariaLabelledby||null)("aria-describedby",r.ariaDescribedby||null)}}var cn=["*"],Gn=["mat-menu-item",""];function Xn(o,i){o&1&&(Kt(),p(0,"svg",2),f(1,"polygon",3),u())}var fe=(()=>{let i=class extends St{constructor(t,e,n,a){super(t,e,n,a),this._elevationPrefix="mat-elevation-z",this._baseElevation=4}},o=i;return(()=>{i.\u0275fac=function(e){return new(e||i)(y(gt),y(Bt),y(He),y(ct))}})(),(()=>{i.\u0275cmp=_({type:i,selectors:[["mat-menu"]],hostAttrs:["ngSkipHydration",""],hostVars:3,hostBindings:function(e,n){e&2&&G("aria-label",null)("aria-labelledby",null)("aria-describedby",null)},exportAs:["matMenu"],features:[te([{provide:de,useExisting:i}]),J],ngContentSelectors:cn,decls:1,vars:0,consts:[["tabindex","-1","role","menu",1,"mat-menu-panel",3,"id","ngClass","keydown","click"],[1,"mat-menu-content"]],template:function(e,n){e&1&&(Nt(),d(0,zn,3,6,"ng-template"))},dependencies:[Re],styles:['mat-menu{display:none}.mat-menu-panel{min-width:112px;max-width:280px;overflow:auto;-webkit-overflow-scrolling:touch;max-height:calc(100vh - 48px);border-radius:4px;outline:0;min-height:64px;position:relative}.mat-menu-panel.ng-animating{pointer-events:none}.cdk-high-contrast-active .mat-menu-panel{outline:solid 1px}.mat-menu-content:not(:empty){padding-top:8px;padding-bottom:8px}.mat-menu-item{-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:rgba(0,0,0,0);white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:block;line-height:48px;height:48px;padding:0 16px;text-align:left;text-decoration:none;max-width:100%;position:relative}.mat-menu-item::-moz-focus-inner{border:0}.mat-menu-item[disabled]{cursor:default}[dir=rtl] .mat-menu-item{text-align:right}.mat-menu-item .mat-icon{margin-right:16px;vertical-align:middle}.mat-menu-item .mat-icon svg{vertical-align:top}[dir=rtl] .mat-menu-item .mat-icon{margin-left:16px;margin-right:0}.mat-menu-item[disabled]::after{display:block;position:absolute;content:"";top:0;left:0;bottom:0;right:0}.cdk-high-contrast-active .mat-menu-item{margin-top:1px}.mat-menu-item-submenu-trigger{padding-right:32px}[dir=rtl] .mat-menu-item-submenu-trigger{padding-right:16px;padding-left:32px}.mat-menu-submenu-icon{position:absolute;top:50%;right:16px;transform:translateY(-50%);width:5px;height:10px;fill:currentColor}[dir=rtl] .mat-menu-submenu-icon{right:auto;left:16px;transform:translateY(-50%) scaleX(-1)}.cdk-high-contrast-active .mat-menu-submenu-icon{fill:CanvasText}button.mat-menu-item{width:100%}.mat-menu-item .mat-menu-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}'],encapsulation:2,data:{animation:[Qt.transformMenu,Qt.fadeInItems]},changeDetection:0})})(),o})(),mn=(()=>{let i=class extends Dt{},o=i;return(()=>{i.\u0275fac=function(){let t;return function(n){return(t||(t=ht(i)))(n||i)}}()})(),(()=>{i.\u0275cmp=_({type:i,selectors:[["","mat-menu-item",""]],hostAttrs:[1,"mat-focus-indicator"],hostVars:20,hostBindings:function(e,n){e&2&&(G("role",n.role)("tabindex",n._getTabIndex())("aria-disabled",n.disabled.toString())("disabled",n.disabled||null),Mt("mat-menu-item",!0)("mat-menu-item-highlighted",n._highlighted)("mat-menu-item-submenu-trigger",n._triggersSubmenu)("mat-mdc-menu-item",!1)("mat-mdc-focus-indicator",!1)("mdc-list-item",!1)("mat-mdc-menu-item-highlighted",!1)("mat-mdc-menu-item-submenu-trigger",!1))},inputs:{disabled:"disabled",disableRipple:"disableRipple"},exportAs:["matMenuItem"],features:[te([{provide:Dt,useExisting:i}]),J],attrs:Gn,ngContentSelectors:cn,decls:3,vars:3,consts:[["matRipple","",1,"mat-menu-ripple",3,"matRippleDisabled","matRippleTrigger"],["class","mat-menu-submenu-icon","viewBox","0 0 5 10","focusable","false","aria-hidden","true",4,"ngIf"],["viewBox","0 0 5 10","focusable","false","aria-hidden","true",1,"mat-menu-submenu-icon"],["points","0,0 5,5 0,10"]],template:function(e,n){e&1&&(Nt(),_t(0),f(1,"div",0),d(2,Xn,2,0,"svg",1)),e&2&&(c(1),s("matRippleDisabled",n.disableRipple||n.disabled)("matRippleTrigger",n._getHostElement()),c(1),s("ngIf",n._triggersSubmenu))},dependencies:[w,bt],encapsulation:2,changeDetection:0})})(),o})(),pn=(()=>{let i=class extends ln{},o=i;return(()=>{i.\u0275fac=function(){let t;return function(n){return(t||(t=ht(i)))(n||i)}}()})(),(()=>{i.\u0275dir=kt({type:i,selectors:[["","mat-menu-trigger-for",""],["","matMenuTriggerFor",""]],hostAttrs:[1,"mat-menu-trigger"],exportAs:["matMenuTrigger"],features:[J]})})(),o})();var un=(()=>{let i=class{},o=i;return(()=>{i.\u0275fac=function(e){return new(e||i)}})(),(()=>{i.\u0275mod=rt({type:i})})(),(()=>{i.\u0275inj=at({providers:[sn],imports:[Z,re,jt,ke,mi,re]})})(),o})();var fn=(()=>{let i=class{transform(t,e){return t.sort((n,a)=>n.id===e?-1/0:a.id===e?1/0:n.name?a.name?n.name.localeCompare(a.name):-1:1)}},o=i;return(()=>{i.\u0275fac=function(e){return new(e||i)}})(),(()=>{i.\u0275pipe=ft({name:"contactSort",type:i,pure:!0,standalone:!0})})(),o})();var hn=(()=>{let i=class{transform(t,e){let a=(Array.isArray(t)?t:[t]).map(l=>l.id===e?"me":l.name??l.email);if(a.length){if(a.length===1)return a[0];if(a.length===2)return`${a[0]} and ${a[1]}`}else return"";return`${a.slice(0,-1).join(", ")}, and ${a.at(-1)}`}},o=i;return(()=>{i.\u0275fac=function(e){return new(e||i)}})(),(()=>{i.\u0275pipe=ft({name:"contactStringify",type:i,pure:!0,standalone:!0})})(),o})();var gn=(()=>{let i=class{transform(t){return t.snippet??this.generateSnippetFromContent(t.content)}generateSnippetFromContent(t){return t.replace(/\s+/gu," ").slice(0,100)}},o=i;return(()=>{i.\u0275fac=function(e){return new(e||i)}})(),(()=>{i.\u0275pipe=ft({name:"mailSnippet",type:i,pure:!0,standalone:!0})})(),o})();var Jn=["container"],he=(()=>{let i=class{set contentInput(t){this.content$.next(t)}set containerInput(t){this.container$.next(t)}constructor(){this.content$=new nt(1),this.container$=new nt(1),j([this.content$,this.container$]).subscribe(([t,e])=>{e.nativeElement.innerHTML=t})}},o=i;return(()=>{i.\u0275fac=function(e){return new(e||i)}})(),(()=>{i.\u0275cmp=_({type:i,selectors:[["rpl-html-renderer"]],viewQuery:function(e,n){if(e&1&&A(Jn,5),e&2){let a;x(a=I())&&(n.containerInput=a.first)}},inputs:{contentInput:["content","contentInput"]},standalone:!0,features:[ee],decls:2,vars:0,consts:[[1,"container"],["container",""]],template:function(e,n){e&1&&f(0,"div",0,1)},dependencies:[Z],styles:[`:host{display:contents}
`],encapsulation:3,changeDetection:0})})(),o})();function ao(o,i){if(o&1&&(P(0),p(1,"div",14),b(2),u(),S()),o&2){let r=h();c(2),W(r.mail.content)}}function ro(o,i){if(o&1&&(P(0),f(1,"rpl-html-renderer",15),S()),o&2){let r=h();c(1),s("content",r.mail.content)}}var Mn=(()=>{let i=class{},o=i;return(()=>{i.\u0275fac=function(e){return new(e||i)}})(),(()=>{i.\u0275cmp=_({type:i,selectors:[["rpl-mail"]],inputs:{user:"user",mail:"mail",sender:"sender",recipients:"recipients"},decls:26,vars:16,consts:[["rplLayoutContent",""],[1,"wrapper"],["lpjNode","",1,"title-line"],[1,"subject"],["mat-icon-button","","routerLink","..","matTooltip","Back"],["fontSet","filled","fontIcon","expand_more"],["lpjNode","",1,"info-line"],[1,"left-group"],[1,"mat-body-1"],[1,"mat-small"],[1,"right-group"],[3,"lpjNode","contact"],["lpjNode","",1,"content"],[4,"ngIf"],[1,"text"],[1,"html",3,"content"]],template:function(e,n){if(e&1&&(p(0,"rpl-scrollable-area",0)(1,"div",1)(2,"div",2)(3,"div",3),b(4),u(),p(5,"a",4),f(6,"mat-icon",5),u()(),p(7,"div",6)(8,"div",7)(9,"div",8)(10,"span"),b(11),u(),b(12," - "),p(13,"span"),b(14),M(15,"readableDate"),u()(),p(16,"div",9)(17,"span"),b(18),M(19,"contactStringify"),M(20,"contactSort"),u()()(),p(21,"div",10),f(22,"rpl-avatar",11),u()(),p(23,"div",12),d(24,ao,3,1,"ng-container",13),d(25,ro,2,1,"ng-container",13),u()()()),e&2){let a;c(4),H(" ",n.mail.subject," "),c(7),W((a=n.sender.name)!==null&&a!==void 0?a:n.sender.email),c(3),W(v(15,8,n.mail.sentAt)),c(4),H(" To ",Oe(19,10,Oe(20,13,n.recipients,n.user.id),n.user.id)," "),c(4),X("lpjNode","mail-",n.mail.id,"-avatar"),s("contact",n.sender),c(2),s("ngIf",n.mail.contentType==="plain-text"),c(1),s("ngIf",n.mail.contentType==="html")}},dependencies:[w,xt,bi,Y,U,E,k,Pt,pe,le,he,ue,fn,hn],styles:["[_nghost-%COMP%]{display:block;background-color:#fff}rpl-scrollable-area[_ngcontent-%COMP%]{height:100%}.wrapper[_ngcontent-%COMP%]{height:100%;padding:16px}.tablet-portrait[_nghost-%COMP%]   .wrapper[_ngcontent-%COMP%], .tablet-portrait   [_nghost-%COMP%]   .wrapper[_ngcontent-%COMP%]{padding:32px 16px}.title-line[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}.title-line[_ngcontent-%COMP%]   .subject[_ngcontent-%COMP%]{font-size:24px;font-weight:700;line-height:32px;font-family:Work Sans,sans-serif;letter-spacing:normal}.info-line[_ngcontent-%COMP%]{margin-top:8px;display:flex;align-items:center}.info-line[_ngcontent-%COMP%]   .left-group[_ngcontent-%COMP%]{flex-grow:1}.content[_ngcontent-%COMP%]{margin-top:16px}.content[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]{white-space:pre-line}"],changeDetection:0})})(),o})();var ye=Ni({source:"feature/mails",events:qe({},Ui({name:"openMoveMailDialog",params:ki(),events:{}}))});var yn=(()=>{let i=class{constructor(){this.store=m(T),this.moveMailButtonClick=new D,this.toggleMailReadStatusButtonClick=new D,this.moveMailButtonClick.subscribe(()=>{let t=ye.openMoveMailDialog;this.store.dispatch(t({mail:this.mail}))}),this.toggleMailReadStatusButtonClick.subscribe(()=>{let t=F.toggleMailReadStatus;this.store.dispatch(t({mail:this.mail}))})}},o=i;return(()=>{i.\u0275fac=function(e){return new(e||i)}})(),(()=>{i.\u0275cmp=_({type:i,selectors:[["rpl-mail-action-menu-def"]],viewQuery:function(e,n){if(e&1&&A(fe,5),e&2){let a;x(a=I())&&(n.menuRef=a.first)}},inputs:{mail:"mail",currentMailbox:"currentMailbox"},decls:5,vars:1,consts:[["mat-menu-item","",3,"click"]],template:function(e,n){e&1&&(p(0,"mat-menu")(1,"button",0),O("click",function(){return n.moveMailButtonClick.emit()}),b(2,"Move to..."),u(),p(3,"button",0),O("click",function(){return n.toggleMailReadStatusButtonClick.emit()}),b(4),u()()),e&2&&(c(4),H(" ",n.mail.isRead?"Mark as unread":"Mark as read"," "))},dependencies:[fe,mn],styles:["[_nghost-%COMP%]{display:contents}"],changeDetection:0})})(),o})();var ve=(()=>{let i=class{},o=i;return(()=>{i.\u0275fac=function(e){return new(e||i)}})(),(()=>{i.\u0275cmp=_({type:i,selectors:[["rpl-mail-action-menu-button"]],inputs:{mail:"mail",currentMailbox:"currentMailbox"},decls:4,vars:3,consts:[["mat-icon-button","","matTooltip","More actions",3,"matMenuTriggerFor"],["fontSet","filled","fontIcon","more_vert"],[3,"mail","currentMailbox"],["menuDef",""]],template:function(e,n){if(e&1&&(p(0,"button",0),f(1,"mat-icon",1),u(),f(2,"rpl-mail-action-menu-def",2,3)),e&2){let a=Jt(3);s("matMenuTriggerFor",a.menuRef),c(2),s("mail",n.mail)("currentMailbox",n.currentMailbox)}},dependencies:[et,Y,pn,U,yn],styles:["[_nghost-%COMP%]{display:inline-block;width:40px;height:40px}"],changeDetection:0})})(),o})();var Ce=(()=>{let i=class{constructor(){this.store=m(T),this.click=new D,this.click.subscribe(()=>{let t=F.toggleMailStarredStatus({mail:this.mail});this.store.dispatch(t)})}},o=i;return(()=>{i.\u0275fac=function(e){return new(e||i)}})(),(()=>{i.\u0275cmp=_({type:i,selectors:[["rpl-mail-star-button"]],inputs:{mail:"mail"},decls:2,vars:2,consts:[["mat-icon-button","",3,"color","matTooltip","click"],["svgIcon","star"]],template:function(e,n){e&1&&(p(0,"button",0),O("click",function(){return n.click.emit()}),f(1,"mat-icon",1),u()),e&2&&s("color",n.mail.isStarred?"accent":void 0)("matTooltip",n.mail.isStarred?"Mark as not starred":"Mark as starred")},dependencies:[et,Y,U],styles:["[_nghost-%COMP%]{display:inline-block;width:40px;height:40px}"],changeDetection:0})})(),o})();function co(o,i){if(o&1){let r=lt();p(0,"button",1),O("click",function(){$(r);let e=h();return V(e.click.emit())}),f(1,"mat-icon",2),u()}if(o&2){let r=i.ngIf;s("matTooltip",r==="delete"?"Delete permanently":"Move to Trash")}}var be=(()=>{let i=class{set mailInput(t){this.mail$.next(t)}constructor(){this.store=m(T),this.trashMailbox$=this.store.select(N.selectSystemMailboxesIndexedByName).pipe(g(t=>t[Vt.Trash])),this.mail$=new ze(null),this.click=new D,this.actionType$=j([this.trashMailbox$,this.mail$.pipe(R(Boolean))]).pipe(g(([t,e])=>e.mailbox===t.id),g(t=>t?"delete":"move-to-trash")),this.click.pipe(Zt(this.mail$.pipe(R(Boolean)),this.trashMailbox$,this.actionType$),Xe(([,t,e,n])=>{if(n==="delete")this.store.dispatch(F.deleteMail({mail:t}));else if(n==="move-to-trash"){let a=F.moveMailToMailbox,l=a({mail:t,mailbox:e});this.store.dispatch(l)}else throw new Error(`Unknown action: ${n}`)})).subscribe()}},o=i;return(()=>{i.\u0275fac=function(e){return new(e||i)}})(),(()=>{i.\u0275cmp=_({type:i,selectors:[["rpl-mail-delete-button"]],inputs:{mailInput:["mail","mailInput"]},decls:2,vars:3,consts:[["mat-icon-button","",3,"matTooltip","click",4,"ngIf"],["mat-icon-button","",3,"matTooltip","click"],["svgIcon","delete"]],template:function(e,n){e&1&&(d(0,co,2,1,"button",0),M(1,"async")),e&2&&s("ngIf",v(1,1,n.actionType$))},dependencies:[w,et,Y,U,L],styles:["[_nghost-%COMP%]{display:inline-block;width:40px;height:40px}"],changeDetection:0})})(),o})();var po=["anchor"];function uo(o,i){if(o&1&&(P(0),f(1,"rpl-mail-star-button",14)(2,"rpl-mail-delete-button",14)(3,"rpl-mail-action-menu-button",15),S()),o&2){let r=h(2);c(1),s("mail",r.mail),c(1),s("mail",r.mail),c(1),s("mail",r.mail)("currentMailbox",r.currentMailbox)}}function fo(o,i){if(o&1&&(p(0,"div",16),b(1),M(2,"mailSnippet"),u()),o&2){let r=h(2);c(1),W(v(2,1,r.mail))}}function ho(o,i){if(o&1&&(P(0),f(1,"div",1)(2,"div",2),p(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6)(7,"span"),b(8),u(),b(9," - "),p(10,"span"),b(11),M(12,"readableDate"),u()(),p(13,"div",7)(14,"a",8,9),b(16),u()()(),p(17,"div",10),O("click",function(t){return t.stopPropagation()}),d(18,uo,4,4,"ng-container",0),p(19,"button",11),f(20,"rpl-avatar",12),u()()(),d(21,fo,3,3,"div",13),u(),S()),o&2){let r=i.ngIf,t=h(),e,n;c(8),W((e=r.name)!==null&&e!==void 0?e:r.email),c(3),W(v(12,8,t.mail.sentAt)),c(3),X("routerLink","./",t.mail.id,""),c(2),W((n=t.mail.subject)!==null&&n!==void 0?n:"(no subject)"),c(2),s("ngIf",t.breakpoints()["tablet-portrait"]),c(1),X("lpjNode","mail-",t.mail.id,"-avatar"),c(1),s("contact",r),c(1),s("ngIf",!t.mail.isRead)}}var xe=(()=>{let i=class{constructor(){this.breakpoints=It()}get mailIsRead(){return this.mail.isRead}get mailIsStared(){return this.mail.isStarred}onClick(){this.anchorElementRef.nativeElement.click()}},o=i;return(()=>{i.\u0275fac=function(e){return new(e||i)}})(),(()=>{i.\u0275cmp=_({type:i,selectors:[["rpl-mail-card"]],viewQuery:function(e,n){if(e&1&&A(po,5),e&2){let a;x(a=I())&&(n.anchorElementRef=a.first)}},hostVars:4,hostBindings:function(e,n){e&1&&O("click",function(){return n.onClick()}),e&2&&Mt("read",n.mailIsRead)("starred",n.mailIsStared)},inputs:{mail:"mail",currentMailbox:"currentMailbox"},decls:3,vars:5,consts:[[4,"ngIf"],[1,"overlay"],["matRipple","",1,"ripple"],[1,"content"],[1,"headline"],["lpjNode","",1,"titles"],[1,"subtitle"],[1,"title"],[3,"routerLink"],["anchor",""],["lpjNode","",1,"actions",3,"click"],["mat-icon-button","","matTooltip","Show details",1,"avatar-button",3,"lpjNode"],[3,"contact"],["class","overview",4,"ngIf"],[3,"mail"],[3,"mail","currentMailbox"],[1,"overview"]],template:function(e,n){e&1&&(d(0,ho,22,10,"ng-container",0),M(1,"async"),M(2,"contactFromMailParticipant")),e&2&&s("ngIf",v(1,1,v(2,3,n.mail.sender)))},dependencies:[w,xt,et,Y,bt,E,k,le,Ce,be,ve,L,ue,gn,me],styles:["[_nghost-%COMP%]{display:block;position:relative;background-color:#f9aa33;cursor:pointer}.ripple[_ngcontent-%COMP%], .overlay[_ngcontent-%COMP%]{position:absolute;inset:0}.content[_ngcontent-%COMP%]   .overview[_ngcontent-%COMP%], .content[_ngcontent-%COMP%]   .headline[_ngcontent-%COMP%]   .titles[_ngcontent-%COMP%]   .subtitle[_ngcontent-%COMP%]{overflow:hidden;white-space:nowrap;text-overflow:ellipsis}.overlay[_ngcontent-%COMP%]{background-color:#000;opacity:0}[_nghost-%COMP%]:hover   .overlay[_ngcontent-%COMP%]{opacity:.04}.content[_ngcontent-%COMP%]{padding:16px;background-color:#fff}.tablet-portrait[_nghost-%COMP%]   .content[_ngcontent-%COMP%], .tablet-portrait   [_nghost-%COMP%]   .content[_ngcontent-%COMP%]{padding:24px}.starred[_nghost-%COMP%]   .content[_ngcontent-%COMP%]{border-top-left-radius:24px}.tablet-portrait   .starred[_nghost-%COMP%]   .content[_ngcontent-%COMP%]{border-top-left-radius:initial}.content[_ngcontent-%COMP%]   .headline[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.content[_ngcontent-%COMP%]   .headline[_ngcontent-%COMP%]   .titles[_ngcontent-%COMP%]{width:0;flex-grow:1;display:flex;flex-direction:column;gap:4px}.content[_ngcontent-%COMP%]   .headline[_ngcontent-%COMP%]   .titles[_ngcontent-%COMP%]   .subtitle[_ngcontent-%COMP%]{font-size:12px;font-weight:400;line-height:20px;font-family:Work Sans,sans-serif;letter-spacing:normal}.content[_ngcontent-%COMP%]   .headline[_ngcontent-%COMP%]   .titles[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-size:16px;font-weight:700;line-height:20px;font-family:Work Sans,sans-serif;letter-spacing:normal}.read[_nghost-%COMP%]   .content[_ngcontent-%COMP%]   .headline[_ngcontent-%COMP%]   .titles[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{color:#0000008a}.content[_ngcontent-%COMP%]   .headline[_ngcontent-%COMP%]   .titles[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:focus{text-decoration:underline}.content[_ngcontent-%COMP%]   .headline[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]{display:flex;gap:8px}.read[_nghost-%COMP%]   .content[_ngcontent-%COMP%]   .headline[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{color:#0000008a}[_nghost-%COMP%]:hover   .content[_ngcontent-%COMP%]   .headline[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   .avatar-button[_ngcontent-%COMP%]{background-color:#fff}.content[_ngcontent-%COMP%]   .overview[_ngcontent-%COMP%]{margin-top:8px;height:20px;white-space:pre}"],changeDetection:0})})(),o})();var In=(()=>{let i=class{constructor(){this.node$=new nt(1)}set nodeInput(t){this.node$.next(t)}},o=i;return(()=>{i.\u0275fac=function(e){return new(e||i)}})(),(()=>{i.\u0275cmp=_({type:i,selectors:[["rpl-mail-card-animation-presence"]],viewQuery:function(e,n){if(e&1&&A($t,5),e&2){let a;x(a=I())&&(n.nodeInput=a.first)}},inputs:{mail:"mail"},decls:1,vars:1,consts:[["lpjNode","",3,"mail"]],template:function(e,n){e&1&&f(0,"rpl-mail-card",0),e&2&&s("mail",n.mail)},dependencies:[E,k,xe],styles:["[_nghost-%COMP%]{display:block}rpl-mail-card[_ngcontent-%COMP%]{width:100%;height:100%}"],changeDetection:0})})(),o})();function go(o,i){if(o&1&&(P(0),f(1,"rpl-mail-card",2),S()),o&2){let r=i.$implicit,t=h();c(1),X("lpjNode","mail-",r.id,""),s("mail",r)("currentMailbox",t.currentMailbox)}}var _o=function(o){return{duration:250,easing:o}},Pn=(()=>{let i=class{constructor(){this.AnimationCurves=mt,this.mails=[],this.mailTracker=(t,e)=>e.id}},o=i;return(()=>{i.\u0275fac=function(e){return new(e||i)}})(),(()=>{i.\u0275cmp=_({type:i,selectors:[["rpl-mail-card-list"]],inputs:{mails:"mails",currentMailbox:"currentMailbox"},decls:2,vars:6,consts:[["lpjNode","mail-card-list",1,"content",3,"lpjAnimation","lpjAnimationTrigger"],[4,"ngFor","ngForOf","ngForTrackBy"],[3,"mail","currentMailbox","lpjNode"]],template:function(e,n){e&1&&(p(0,"div",0),d(1,go,2,3,"ng-container",1),u()),e&2&&(s("lpjAnimation",ti(4,_o,n.AnimationCurves.STANDARD_CURVE))("lpjAnimationTrigger",n.mails),c(1),s("ngForOf",n.mails)("ngForTrackBy",n.mailTracker))},dependencies:[ne,E,wi,k,Oi,Ai,Ri,xe],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;gap:4px}.content[_ngcontent-%COMP%]{display:contents}"],changeDetection:0})})(),o})();var wt=new st("POPUP_REF"),Ie=class{constructor(){this.popupRef=m(wt)}};function yo(o,i){if(o&1&&(p(0,"h2"),b(1),u()),o&2){let r=h(),t;c(1),H(" ",(t=r.popupRef.input.title)!==null&&t!==void 0?t:"Mailboxes",`
`)}}function vo(o,i){if(o&1){let r=lt();p(0,"button",2),O("click",function(){let n=$(r).$implicit,a=h();return a.popupRef.output(n),V(a.popupRef.close())}),b(1),u()}if(o&2){let r=i.$implicit;c(1),H(" ",r.name," ")}}var Sn=(()=>{let i=class extends Ie{constructor(){super(...arguments),this.store=m(T),this.mailboxes$=this.store.select(N.selectMailboxes).pipe(g(t=>{let e=this.popupRef.input.current;return e?t.query(n=>n.id!==e.id):t.all()}))}},o=i;return(()=>{i.\u0275fac=function(){let t;return function(n){return(t||(t=ht(i)))(n||i)}}()})(),(()=>{i.\u0275cmp=_({type:i,selectors:[["rpl-mailbox-selection-popup"]],features:[J],decls:4,vars:4,consts:[[4,"ngIf"],["mat-list-item","",3,"click",4,"ngFor","ngForOf"],["mat-list-item","",3,"click"]],template:function(e,n){e&1&&(d(0,yo,2,1,"h2",0),p(1,"mat-action-list"),d(2,vo,2,1,"button",1),M(3,"async"),u()),e&2&&(s("ngIf",n.popupRef.appearance==="dialog"),c(2),s("ngForOf",v(3,2,n.mailboxes$)))},dependencies:[ne,w,Yi,qi,L],styles:["[_nghost-%COMP%]{display:block}[data-appearance=dialog]   [_nghost-%COMP%]{width:240px}"],changeDetection:0})})(),o})();var Dn=(()=>{let i=class{fromDialogRef(t,e){let n=new D,a=n.pipe(K(e.afterClosed()));return{input:t.input,appearance:"dialog",event$:ot(e.afterClosed().pipe(g(()=>({type:"close"}))),e.afterOpened().pipe(g(()=>({type:"display"}))),a.pipe(g(l=>({type:"output",payload:l})))),output:l=>{n.emit(l)},close:()=>{e.close()}}}fromBottomSheetRef(t,e){let n=new pt;return{input:t.input,appearance:"bottom-sheet",event$:ot(e.afterDismissed().pipe(g(()=>({type:"close"}))),e.afterOpened().pipe(g(()=>({type:"display"}))),n.pipe(g(a=>({type:"output",payload:a})))),output:a=>{n.next(a)},close:()=>{n.complete(),e.dismiss()}}}},o=i;return(()=>{i.\u0275fac=function(e){return new(e||i)}})(),(()=>{i.\u0275prov=dt({token:i,factory:i.\u0275fac,providedIn:"root"})})(),o})();function Co(o,i){o&1&&Ze(0)}var Qe=(()=>{let i=class{constructor(){this.viewContainer=m(yt),this.context=m(Ii,{optional:!0})??m(Mi),this.dialogOrBottomSheetRef=m(Be,{optional:!0})??m(yi),this.popupRefFactory=m(Dn),this.popupRef=this.createPopupRef(),this.contentType=this.context.content,this.contentInjector=this.createContentInjector()}createContentInjector(){return Te.create({parent:this.viewContainer.injector,providers:[{provide:wt,useValue:this.popupRef}]})}createPopupRef(){return this.dialogOrBottomSheetRef instanceof Be?this.popupRefFactory.fromDialogRef(this.context,this.dialogOrBottomSheetRef):this.popupRefFactory.fromBottomSheetRef(this.context,this.dialogOrBottomSheetRef)}},o=i;return(()=>{i.\u0275fac=function(e){return new(e||i)}})(),(()=>{i.\u0275cmp=_({type:i,selectors:[["rpl-popup-container"]],hostVars:1,hostBindings:function(e,n){e&2&&G("data-appearance",n.popupRef.appearance)},standalone:!0,features:[ee],decls:1,vars:2,consts:[[4,"ngComponentOutlet","ngComponentOutletInjector"]],template:function(e,n){e&1&&d(0,Co,1,0,"ng-container",0),e&2&&s("ngComponentOutlet",n.contentType)("ngComponentOutletInjector",n.contentInjector)},dependencies:[Z,ni],styles:["[_nghost-%COMP%]{display:contents}"],changeDetection:0})})(),o})();var wn=(()=>{let i=class{constructor(){this.dialogService=m(Pi),this.bottomSheetService=m(vi),this.breakpoints=It()}popup(t,e){return this.breakpoints()["tablet-portrait"]?this.popupDialog(t,e):this.popupBottomSheet(t,e)}popupDialog(t,e){return this.dialogService.open(Qe,{data:{content:t,input:e}}).componentInstance.contentInjector.get(wt)}popupBottomSheet(t,e){return this.bottomSheetService.open(Qe,{data:{content:t,input:e}}).instance.contentInjector.get(wt)}},o=i;return(()=>{i.\u0275fac=function(e){return new(e||i)}})(),(()=>{i.\u0275prov=dt({token:i,factory:i.\u0275fac,providedIn:"root"})})(),o})();var Tn=(()=>{let i=class{constructor(){this.actions=m(Bi),this.store=m(T),this.popupService=m(wn),this.openMoveMailDialog=Fi(()=>this.actions.pipe(ji(ye.openMoveMailDialog),Zt(this.store.select(N.selectMailboxes)),Ge(([{mail:t},e])=>{let n=t.mailbox?e.retrieve(t.mailbox):void 0;return this.popupService.popupDialog(Sn,{title:"Move to",current:n}).event$.pipe(g(l=>l.type==="output"?l.payload:null),R(Boolean),g(l=>F.moveMailToMailbox({mail:t,mailbox:l})))})))}},o=i;return(()=>{i.\u0275fac=function(e){return new(e||i)}})(),(()=>{i.\u0275prov=dt({token:i,factory:i.\u0275fac})})(),o})();var bo=["replyIcon"],xo=["bottomActions"];function Io(o,i){if(o&1&&(P(0),f(1,"rpl-mail",3),S()),o&2){let r=i.ngIf,t=h().ngIf,e=h().ngIf,n=h();c(1),X("lpjNode","mail-",n.mail.id,""),s("user",e)("mail",n.mail)("sender",t)("recipients",r)}}var Po=function(){return[]};function So(o,i){if(o&1&&(P(0),d(1,Io,2,5,"ng-container",0),M(2,"async"),M(3,"contactFromMailParticipant"),S()),o&2){let r=h(2),t;c(1),s("ngIf",v(2,1,v(3,3,(t=r.mail.recipients)!==null&&t!==void 0?t:Je(5,Po))))}}function Do(o,i){if(o&1&&(P(0),d(1,So,4,6,"ng-container",0),M(2,"async"),M(3,"contactFromMailParticipant"),S()),o&2){let r=h();c(1),s("ngIf",v(2,1,v(3,3,r.mail.sender)))}}function wo(o,i){if(o&1&&f(0,"rpl-mail-star-button",4)(1,"rpl-mail-delete-button",5)(2,"rpl-mail-action-menu-button",6),o&2){let r=h();s("mail",r.mail),c(1),s("mail",r.mail),c(1),s("mail",r.mail)("currentMailbox",r.mailboxAsEntity)}}function To(o,i){o&1&&f(0,"mat-icon",7)}var On=(()=>{let i=class{ngAfterViewInit(){this.viewInit.emit(),this.viewInit.complete()}ngOnDestroy(){this.destroy.emit(),this.destroy.complete()}get mailboxAsEntity(){return typeof this.mailbox=="object"?this.mailbox:void 0}constructor(){this.store=m(T),this.route=m(se),this.bottomNavService=m(Wi),this.navFabService=m(Zi),this.user=this.store.selectSignal(Ji.selectCurrent),this.viewInit=new D,this.destroy=new D,this.viewInit.pipe(ut(0)).subscribe(()=>{this.bottomNavService.useActions(this.navBottomActionsTemplate),this.navFabService.useConfig({text:"Reply",icon:this.navFabIconTemplate,link:"/compose",linkParams:{reply:this.route.snapshot.params.mailId}})}),j([this.bottomNavService.actions$.pipe(De()),this.navFabService.config$.pipe(De()),this.destroy.pipe(ut(0))]).subscribe(([t,e])=>{this.bottomNavService.useActions(t),this.navFabService.useConfig(e)})}},o=i;return(()=>{i.\u0275fac=function(e){return new(e||i)}})(),(()=>{i.\u0275cmp=_({type:i,selectors:[["rpl-mail-detail-layout"]],viewQuery:function(e,n){if(e&1&&(A(bo,5),A(xo,5)),e&2){let a;x(a=I())&&(n.navFabIconTemplate=a.first),x(a=I())&&(n.navBottomActionsTemplate=a.first)}},inputs:{mail:"mail",mailbox:"mailbox"},decls:5,vars:1,consts:[[4,"ngIf"],["bottomActions",""],["replyIcon",""],["data-route-animation-target","",3,"user","mail","sender","recipients","lpjNode"],[3,"mail"],["routerLink","..",3,"mail"],[3,"mail","currentMailbox"],["svgIcon","reply"]],template:function(e,n){e&1&&(d(0,Do,4,5,"ng-container",0),d(1,wo,3,4,"ng-template",null,1,Ft),d(3,To,1,0,"ng-template",null,2,Ft)),e&2&&s("ngIf",n.user())},dependencies:[w,xt,U,E,k,Mn,Ce,be,ve,L,me],styles:["[_nghost-%COMP%]{display:contents}rpl-mail[_ngcontent-%COMP%]{grid-row:1;grid-column:margin-left/margin-right;height:calc(100% - 8px);padding:4px;z-index:1}.tablet-portrait[_nghost-%COMP%]   rpl-mail[_ngcontent-%COMP%], .tablet-portrait   [_nghost-%COMP%]   rpl-mail[_ngcontent-%COMP%]{grid-column:col-2/col-8}.tablet-landscape[_nghost-%COMP%]   rpl-mail[_ngcontent-%COMP%], .tablet-landscape   [_nghost-%COMP%]   rpl-mail[_ngcontent-%COMP%]{grid-column:col-2/col-12}.laptop[_nghost-%COMP%]   rpl-mail[_ngcontent-%COMP%], .laptop   [_nghost-%COMP%]   rpl-mail[_ngcontent-%COMP%]{grid-column:col-4/col-12}"],changeDetection:0})})(),o})();function Ao(o,i){if(o&1&&(f(0,"rpl-mail-card-list",6),M(1,"async")),o&2){let r=h().ngIf,t=h(3),e;s("mails",r)("currentMailbox",(e=v(1,2,t.mailboxAsEntity$))!==null&&e!==void 0?e:void 0)}}function Ro(o,i){if(o&1&&(p(0,"div",7),b(1),u()),o&2){let r=h(3).ngIf;c(1),H("Empty in ",r,"")}}function Eo(o,i){if(o&1&&(P(0),d(1,Ao,2,4,"rpl-mail-card-list",4),d(2,Ro,2,1,"ng-template",null,5,Ft),S()),o&2){let r=i.ngIf,t=Jt(3);c(1),s("ngIf",r.length)("ngIfElse",t)}}function Lo(o,i){if(o&1&&(p(0,"rpl-scrollable-area",3),d(1,Eo,4,2,"ng-container",0),M(2,"async"),u()),o&2){let r=h(2);c(1),s("ngIf",v(2,1,r.mails$))}}function ko(o,i){if(o&1&&(P(0),d(1,Lo,3,3,"rpl-scrollable-area",2),S()),o&2){let r=i.ngIf;c(1),s("rplReattachOnChange",r)}}function No(o,i){o&1&&(p(0,"div",8),f(1,"rpl-search-button"),u())}var Ue=di([fi(":enter rpl-mail-card",[Q({opacity:0}),Q({transform:"scale(92%)"}),hi(25,[Ct(`225ms ${mt.DECELERATION_CURVE}`),Q({opacity:1,transform:"scale(1)"})])],{optional:!0})]),An=(()=>{let i=class{constructor(){this.store=m(T),this.navService=m(Ki),this.breakpoints=It(),this.activeNavItemIndex=Li(this.navService.activeItemIndex$,{requireSync:!0}),this.mailbox$=new nt(1),this.mailboxName$=this.mailbox$.pipe(g(t=>typeof t=="string"?t:t.name)),this.mailboxAsEntity$=this.mailbox$.pipe(g(t=>typeof t=="string"?null:t)),this.mails$=this.mailbox$.pipe(z(t=>typeof t=="string"?this.queryVirtualMailboxMails(t):this.queryRegularMailboxMails(t)),g(t=>t.sort((e,n)=>n.sentAt.getTime()-e.sentAt.getTime())),Xt(1))}set mailbox(t){this.mailbox$.next(t)}queryVirtualMailboxMails(t){let e=this.store.select(Ht.selectMails);if(t===it.Starred)return j([e,this.store.select(N.selectSystemMailboxesIndexedByName)]).pipe(g(([n,a])=>n.query(l=>l.isStarred&&l.mailbox!==a[Vt.Trash].id&&l.mailbox!==a[Vt.Spam].id)));if(t===it.Sent)return e.pipe(g(n=>n.query(a=>a.type==="sent")));if(t===it.Drafts)return e.pipe(g(n=>n.query(a=>a.type==="draft")));throw new Error(`Invalid virtual mailbox: ${t}`)}queryRegularMailboxMails(t){return this.store.select(Ht.selectMails).pipe(g(e=>e.query(n=>n.mailbox===t.id)))}},o=i;return(()=>{i.\u0275fac=function(e){return new(e||i)}})(),(()=>{i.\u0275cmp=_({type:i,selectors:[["rpl-mail-list-layout"]],hostVars:2,hostBindings:function(e,n){e&2&&Ke("@host-entrance",void 0)("@host-mailboxChange",n.activeNavItemIndex())},inputs:{mailbox:"mailbox"},decls:3,vars:4,consts:[[4,"ngIf"],["class","actions",4,"ngIf"],["class","content","rplLayoutContent","","data-route-animation-target","",4,"rplReattachOnChange"],["rplLayoutContent","","data-route-animation-target","",1,"content"],["class","list",3,"mails","currentMailbox",4,"ngIf","ngIfElse"],["empty",""],[1,"list",3,"mails","currentMailbox"],[1,"empty-prompt"],[1,"actions"]],template:function(e,n){e&1&&(d(0,ko,2,1,"ng-container",0),M(1,"async"),d(2,No,2,0,"div",1)),e&2&&(s("ngIf",v(1,2,n.mailboxName$)),c(2),s("ngIf",n.breakpoints()["tablet-portrait"]))},dependencies:[w,ce,Pt,pe,Xi,Pn,L],styles:["[_nghost-%COMP%]{display:contents}.content[_ngcontent-%COMP%]{position:relative;grid-row:1;grid-column:margin-left/margin-right}.tablet-portrait[_nghost-%COMP%]   .content[_ngcontent-%COMP%], .tablet-portrait   [_nghost-%COMP%]   .content[_ngcontent-%COMP%]{grid-column:col-2/col-8}.tablet-landscape[_nghost-%COMP%]   .content[_ngcontent-%COMP%], .tablet-landscape   [_nghost-%COMP%]   .content[_ngcontent-%COMP%]{grid-column:col-3/col-11}.laptop[_nghost-%COMP%]   .content[_ngcontent-%COMP%], .laptop   [_nghost-%COMP%]   .content[_ngcontent-%COMP%]{grid-column:col-5/col-11}.content[_ngcontent-%COMP%]   .list[_ngcontent-%COMP%]{margin:4px}.tablet-portrait[_nghost-%COMP%]   .content[_ngcontent-%COMP%]   .list[_ngcontent-%COMP%], .tablet-portrait   [_nghost-%COMP%]   .content[_ngcontent-%COMP%]   .list[_ngcontent-%COMP%]{margin:32px 0}.content[_ngcontent-%COMP%]   .empty-prompt[_ngcontent-%COMP%]{position:absolute;left:50%;top:50%;transform:translate(-50%) translateY(-50%)}.tablet-portrait[_nghost-%COMP%]   .actions[_ngcontent-%COMP%], .tablet-portrait   [_nghost-%COMP%]   .actions[_ngcontent-%COMP%]{position:absolute;top:16px;right:0}.tablet-landscape[_nghost-%COMP%]   .actions[_ngcontent-%COMP%], .tablet-landscape   [_nghost-%COMP%]   .actions[_ngcontent-%COMP%]{position:initial;grid-row:1;grid-column:col-12;padding:16px 0}"],data:{animation:[vt("host-entrance",[tt(":enter",[ae(Ue)])]),vt("host-mailboxChange",[tt(":increment",[Ne([Ve.apply("y","forward"),ae(Ue)])]),tt(":decrement",[Ne([Ve.apply("y","backward"),ae(Ue)])])])]},changeDetection:0})})(),o})();var Bo=["listLayoutNode"],jo=["detailLayoutNode"];function $o(o,i){if(o&1&&f(0,"rpl-mail-detail-layout",5,6),o&2){let r=i.ngIf,t=h().ngIf;s("mailbox",t)("mail",r)}}function Vo(o,i){if(o&1&&(P(0),f(1,"rpl-mail-list-layout",2,3),d(3,$o,2,2,"rpl-mail-detail-layout",4),M(4,"async"),S()),o&2){let r=i.ngIf,t=h(2);c(1),s("mailbox",r),c(2),s("ngIf",v(4,2,t.mail$))}}function Ho(o,i){if(o&1&&(P(0),d(1,Vo,5,4,"ng-container",1),M(2,"async"),S()),o&2){let r=h();c(1),s("ngIf",v(2,1,r.mailbox$))}}var Rn=(()=>{let i=class{constructor(){this.store=m(T),this.router=m(Qi),this.route=m(se),this.hostNode=m($t),this.layoutSnapper=m(Si),this.layoutAnimator=m(Di),this.viewContainer=m(yt),this.mailId$=this.route.params.pipe(g(t=>t.mailId)),this.mail$=j([this.mailId$,this.store.select(Ht.selectMails)]).pipe(g(([t,e])=>t?e.retrieve(t):null),Xt(1)),this.mailboxName$=this.route.params.pipe(g(t=>t.mailboxName)),this.mailbox$=this.mailboxName$.pipe(z(t=>Object.values(it).includes(t)?Lt(t):this.store.select(N.selectMailboxes).pipe(g(e=>{let n=e.queryOne(a=>a.name===t);if(!n)throw new Error(`Missing mailbox ${t}`);return n})))),this.listLayoutSnapshots=new je,this.detailLayoutSnapshots=new je,this.destroy$=new D,m($t,{self:!0}).identifyAs("mails")}ngAfterViewInit(){this.router.events.pipe(K(this.destroy$),R(t=>t instanceof Hi)).subscribe(()=>{this.updateSnapshots()}),this.mail$.pipe(we(),g(([t,e])=>!t&&e?e:null),R(Boolean),z(t=>Yt(this,null,function*(){if(yield this.initiateListToDetailLayoutAnimation(),t.isRead)return;let e=F.toggleMailReadStatus({mail:t,to:"read"});this.store.dispatch(e)}))).subscribe(),this.mail$.pipe(we(),R(([t,e])=>!!t&&!e),g(([t])=>t),z(t=>this.initiateDetailToListLayoutAnimation(t))).subscribe()}ngOnDestroy(){this.destroy$.emit()}updateSnapshots(){this.listLayoutSnapshots=this.layoutSnapper.snapshotTree(this.listLayoutNode,{measure:!0}),this.detailLayoutNode&&(this.detailLayoutSnapshots=this.layoutSnapper.snapshotTree(this.detailLayoutNode,{measure:!0}))}initiateListToDetailLayoutAnimation(){return Yt(this,null,function*(){yield zt(Pe()),yield this.layoutAnimator.animate({root:this.hostNode,from:this.listLayoutSnapshots,duration:250,easing:mt.STANDARD_CURVE,estimation:!0})})}initiateDetailToListLayoutAnimation(t){return Yt(this,null,function*(){let e=this.listLayoutSnapshots.get(`mail-${t.id}`);if(!e)return;let n=In,a=this.viewContainer.createComponent(n);a.setInput("mail",t);let l=a.location.nativeElement;l.style.position="fixed",l.style.top=e.boundingBox.top+"px",l.style.left=e.boundingBox.left+"px",l.style.width=e.boundingBox.width()+"px",l.style.height=e.boundingBox.height()+"px",yield zt(Pe());let B=yield zt(a.instance.node$);B.identifyAs(`mail-${t.id}`),B.attach(this.hostNode),this.listLayoutNode.deactivate(),yield this.layoutAnimator.animate({root:this.hostNode,from:this.detailLayoutSnapshots,duration:250,easing:mt.STANDARD_CURVE,estimation:!0}),B.detach(),a.destroy(),this.listLayoutNode.activate()})}},o=i;return(()=>{i.\u0275fac=function(e){return new(e||i)}})(),(()=>{i.\u0275cmp=_({type:i,selectors:[["rpl-mails"]],viewQuery:function(e,n){if(e&1&&(A(Bo,5),A(jo,5)),e&2){let a;x(a=I())&&(n.listLayoutNode=a.first),x(a=I())&&(n.detailLayoutNode=a.first)}},features:[We([E])],decls:1,vars:0,consts:[[4,"lpjAnimationScope"],[4,"ngIf"],["lpjNode","list-layout",3,"mailbox"],["listLayoutNode","lpjNode"],["lpjNode","detail-layout",3,"mailbox","mail",4,"ngIf"],["lpjNode","detail-layout",3,"mailbox","mail"],["detailLayoutNode","lpjNode"]],template:function(e,n){e&1&&d(0,Ho,3,3,"ng-container",0)},dependencies:[w,E,Ti,k,An,On,L],styles:["[_nghost-%COMP%]{display:contents}"],changeDetection:0})})(),o})();var Uo=o=>{let i=m(T),r=o.params.mailboxName;return Object.values(it).includes(r)?!0:i.select(N.selectMailboxes).pipe(g(e=>!!e.queryOne(n=>n.name===r)))},Yo=[{path:"mailboxes/:mailboxName/mails",canActivate:[Uo],title:o=>o.params.mailboxName,children:[{matcher:o=>o.length===0?{consumed:o,posParams:{}}:o.length===1?{consumed:o,posParams:{mailId:o[0]}}:null,component:Rn}]}],En=(()=>{let i=class{},o=i;return(()=>{i.\u0275fac=function(e){return new(e||i)}})(),(()=>{i.\u0275mod=rt({type:i})})(),(()=>{i.\u0275inj=at({imports:[$e.forChild(Yo),$e]})})(),o})();var ac=(()=>{let i=class{},o=i;return(()=>{i.\u0275fac=function(e){return new(e||i)}})(),(()=>{i.\u0275mod=rt({type:i})})(),(()=>{i.\u0275inj=at({imports:[Z,En,$i.forFeature(Tn),xi,Gi,un,zi,jt,Ci,Ei,Vi,ce,Pt,he]})})(),o})();export{ac as MailsModule};
