"use strict";(self.webpackChunkreply=self.webpackChunkreply||[]).push([[890],{1890:(Rt,T,l)=>{l.r(T),l.d(T,{MailsModule:()=>wt});var s=l(6895),_=l(3238),h=l(7392),d=l(9818),r=l(4205),Q=l(4971),f=l(1012),w=l(7234),p=l(9132),C=l(4004),t=l(4650),R=l(5861),g=l(7340),M=l(6471),U=l(2722),Z=l(9300),D=l(4);function J(n,i){if(1&n&&(t.TgZ(0,"div",1),t._UZ(1,"router-outlet"),t.qZA()),2&n){const e=t.oxw();t.Q6J("@route",e.getChildRouteAnimationId())}}let O=(()=>{class n extends D.f{constructor(e,o,a){super(),this.router=e,this.layoutAnimator=o,this.layoutSnapper=a,this.layoutAnimationSnapshots=new M.R$,this.destroy$=new t.vpe}ngOnInit(){}ngAfterViewInit(){this.router.events.pipe((0,U.R)(this.destroy$),(0,Z.h)(e=>e instanceof p.OD)).subscribe(()=>{this.layoutAnimationSnapshots.merge(this.layoutSnapper.snapshotTree(this.layoutAnimationRoot))})}ngOnDestroy(){this.destroy$.emit()}animateLayout(e){var o=this;return(0,R.Z)(function*(){o.layoutAnimationRoot&&(yield o.layoutAnimator.animate({root:o.layoutAnimationRoot,from:o.layoutAnimationSnapshots,duration:e,easing:_.yN.STANDARD_CURVE,estimation:!0}),o.layoutAnimationSnapshots.clear())})()}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(p.F0),t.Y36(M.tN),t.Y36(M.mN))},n.\u0275cmp=t.Xpm({type:n,selectors:[["rpl-mails"]],viewQuery:function(e,o){if(1&e&&t.Gf(M.vt,5),2&e){let a;t.iGM(a=t.CRH())&&(o.layoutAnimationRoot=a.first)}},features:[t.qOj],decls:1,vars:0,consts:[["class","wrapper","lpjNode","",4,"lpjAnimationScope"],["lpjNode","",1,"wrapper"]],template:function(e,o){1&e&&t.YNc(0,J,2,1,"div",0)},dependencies:[p.lC,r.BM,r.rG,r.y3],styles:["[_nghost-%COMP%]{display:contents}.wrapper[_ngcontent-%COMP%]{display:contents}"],data:{animation:[(0,g.X$)("route",[(0,g.eR)("list => detail",[(0,g.IO)(":leave",[(0,g.jt)("500ms")])])])]},changeDetection:0}),n})();var v=l(8505),I=l(3900),x=l(9841),F=l(598),P=l(4386);let G=(()=>{class n{constructor(e){this.contactRepo=e,this.user$=this.contactRepo.retrieve("user")}}return n.\u0275fac=function(e){return new(e||n)(t.LFG(P.m))},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var y=l(1889);let L=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=t.Xpm({type:n,selectors:[["rpl-mail-avatar"]],inputs:{src:"src"},decls:1,vars:1,consts:[["alt","Avatar",3,"src"]],template:function(e,o){if(1&e&&t._UZ(0,"img",0),2&e){let a;t.Q6J("src",null!==(a=o.src)&&void 0!==a?a:"assets/avatar-express.png",t.LSH)}},styles:["[_nghost-%COMP%]{display:inline-block;width:40px;height:40px;border-radius:50%}img[_ngcontent-%COMP%]{width:inherit;height:inherit;border-radius:inherit}"],changeDetection:0}),n})();var z=l(1135),N=l(2831);let b=(()=>{class n extends t.vpe{}return n.\u0275fac=function(){let i;return function(o){return(i||(i=t.n5z(n)))(o||n)}}(),n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),S=(()=>{class n{constructor(e,o,a){this.route=e,this.mailRepo=o,this.listRefresh$=a,this.click$=new t.vpe,this.busy$=new z.X(!1)}ngOnInit(){this.click$.pipe((0,Z.h)(()=>!this.busy$.value),(0,v.b)(()=>this.busy$.next(!0)),(0,v.b)(()=>{this.mailRepo.update(this.mail.id,this.mail.isStarred?{isStarred:!1}:{isStarred:!0}),this.route.snapshot.params.mailboxName===N.T.Starred&&this.listRefresh$.emit()}),(0,v.b)(()=>this.busy$.next(!1))).subscribe()}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(p.gz),t.Y36(y.w),t.Y36(b))},n.\u0275cmp=t.Xpm({type:n,selectors:[["rpl-mail-star-button"]],inputs:{mail:"mail"},decls:3,vars:4,consts:[["mat-icon-button","",3,"disabled","color","click"],["svgIcon","star"]],template:function(e,o){1&e&&(t.TgZ(0,"button",0),t.NdJ("click",function(){return o.click$.emit()}),t.ALo(1,"async"),t._UZ(2,"mat-icon",1),t.qZA()),2&e&&t.Q6J("disabled",t.lcZ(1,2,o.busy$))("color",o.mail.isStarred?"accent":void 0)},dependencies:[d.eB,h.Hw,s.Ov],styles:["[_nghost-%COMP%]{display:inline-block;width:40px;height:40px}"],changeDetection:0}),n})(),$=(()=>{class n{constructor(e,o){this.mailRepo=e,this.listRefresh$=o,this.click$=new t.vpe}ngOnInit(){this.click$.subscribe(()=>{"Trash"===this.mail.mailboxName?this.mailRepo.delete(this.mail.id):this.mailRepo.update(this.mail.id,{mailboxName:"Trash"}),this.listRefresh$.emit()})}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(y.w),t.Y36(b))},n.\u0275cmp=t.Xpm({type:n,selectors:[["rpl-mail-delete-button"]],inputs:{mail:"mail"},decls:2,vars:0,consts:[["mat-icon-button","",3,"click"],["svgIcon","delete"]],template:function(e,o){1&e&&(t.TgZ(0,"button",0),t.NdJ("click",function(){return o.click$.emit()}),t._UZ(1,"mat-icon",1),t.qZA())},dependencies:[d.eB,h.Hw],styles:["[_nghost-%COMP%]{display:inline-block;width:40px;height:40px}"],changeDetection:0}),n})();var B=l(6752);let H=(()=>{class n{transform(e){return e.length?1===e.length?e[0]:2===e.length?`${e[0]} and ${e[1]}`:`${e.slice(0,-1).join(", ")}, and ${e.at(-1)}`:""}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275pipe=t.Yjl({name:"readableStrings",type:n,pure:!0,standalone:!0}),n})();const E=["replyIcon"],V=["bottomActions"];function X(n,i){if(1&n&&(t._UZ(0,"rpl-mail-star-button",15)(1,"rpl-mail-delete-button",16),t.TgZ(2,"button",17),t._UZ(3,"mat-icon",18),t.qZA()),2&n){const e=t.oxw(3).ngIf;t.Q6J("mail",e),t.xp6(1),t.Q6J("mail",e)}}const q=function(n){return{prev:n}};function K(n,i){if(1&n&&(t.ynx(0),t.TgZ(1,"div",2)(2,"div",3)(3,"h1",4),t._uU(4),t.qZA(),t.TgZ(5,"a",5),t._UZ(6,"mat-icon",6),t.qZA()(),t.TgZ(7,"div",7)(8,"div",8)(9,"div",9)(10,"span"),t._uU(11),t.qZA(),t._uU(12," - "),t.TgZ(13,"span"),t._uU(14),t.ALo(15,"readableDate"),t.qZA()(),t.TgZ(16,"div",10)(17,"span"),t._uU(18),t.ALo(19,"readableStrings"),t.qZA()()(),t.TgZ(20,"div",11),t._UZ(21,"rpl-mail-avatar",12),t.qZA()(),t.TgZ(22,"div",13),t._uU(23),t.qZA()(),t.YNc(24,X,4,2,"ng-template",null,14,t.W1O),t.BQk()),2&n){const e=i.ngIf,o=t.oxw().ngIf,a=t.oxw().ngIf;t.xp6(4),t.hij(" ",a.subject," "),t.xp6(1),t.Q6J("queryParams",t.VKq(12,q,a.id)),t.xp6(6),t.Oqu(o.name),t.xp6(3),t.Oqu(t.lcZ(15,8,a.sentAt)),t.xp6(4),t.hij("To ",t.lcZ(19,10,e),""),t.xp6(3),t.MGl("lpjNode","mail-",a.id,"-avatar"),t.Q6J("src",o.avatarUrl),t.xp6(2),t.Oqu(a.content)}}function W(n,i){if(1&n&&(t.ynx(0),t.YNc(1,K,26,14,"ng-container",0),t.ALo(2,"async"),t.BQk()),2&n){const e=t.oxw(2);t.xp6(1),t.Q6J("ngIf",t.lcZ(2,1,e.mailRecipientNames$))}}function tt(n,i){if(1&n&&(t.ynx(0),t.YNc(1,W,3,3,"ng-container",0),t.ALo(2,"async"),t.BQk()),2&n){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",t.lcZ(2,1,e.mailSender$))}}function nt(n,i){1&n&&t._UZ(0,"mat-icon",19)}let et=(()=>{class n{constructor(e,o,a,c,m,u){this.route=e,this.layoutContext=o,this.authenticator=a,this.mailRepo=c,this.contactRepo=m,this.changeDetector=u,this.navFabConfigBackup=this.layoutContext.navFabConfig,this.navBottomActionsBackup=this.layoutContext.navBottomActions}ngOnInit(){this.route.params.subscribe(e=>{this.mail$=this.mailRepo.retrieve(e.mailId).pipe((0,v.b)(c=>{c.isRead||this.mailRepo.update(c.id,{isRead:!0})})),this.mailSender$=this.mail$.pipe((0,I.w)(c=>this.contactRepo.retrieve(c.sender)));const a=this.mail$.pipe((0,I.w)(c=>(0,x.a)(c.recipients.map(m=>this.contactRepo.retrieve(m)))));this.mailRecipientNames$=(0,x.a)([a,this.authenticator.user$]).pipe((0,C.U)(([c,m])=>c.map(u=>u.id===m.id?"me":u.name).sort((u,j)=>"me"===u?-1/0:"me"===j?1/0:u.localeCompare(j)))),this.changeDetector.markForCheck()})}ngAfterViewInit(){this.layoutContext.navFabConfig={text:"Reply",icon:this.navFabIconTemplate,link:"/compose",linkParams:{reply:this.route.snapshot.params.mailId}},this.layoutContext.navBottomActions=this.navBottomActionsTemplate}ngOnDestroy(){this.layoutContext.navFabConfig=this.navFabConfigBackup,this.layoutContext.navBottomActions=this.navBottomActionsBackup}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(p.gz),t.Y36(F.V),t.Y36(G),t.Y36(y.w),t.Y36(P.m),t.Y36(t.sBO))},n.\u0275cmp=t.Xpm({type:n,selectors:[["rpl-mail"]],viewQuery:function(e,o){if(1&e&&(t.Gf(E,5),t.Gf(V,5)),2&e){let a;t.iGM(a=t.CRH())&&(o.navFabIconTemplate=a.first),t.iGM(a=t.CRH())&&(o.navBottomActionsTemplate=a.first)}},decls:4,vars:3,consts:[[4,"ngIf"],["replyIcon",""],[1,"wrapper"],["lpjNode","",1,"title-line"],[1,"mat-display-1"],["mat-icon-button","","routerLink","..",3,"queryParams"],["fontSet","filled","fontIcon","expand_more"],["lpjNode","",1,"info-line"],[1,"left-group"],[1,"mat-body-1"],[1,"mat-small"],[1,"right-group"],[3,"lpjNode","src"],["lpjNode","",1,"content"],["bottomActions",""],[3,"mail"],["routerLink","..",3,"mail"],["mat-icon-button",""],["fontSet","filled","fontIcon","more_vert"],["svgIcon","reply"]],template:function(e,o){1&e&&(t.YNc(0,tt,3,3,"ng-container",0),t.ALo(1,"async"),t.YNc(2,nt,1,0,"ng-template",null,1,t.W1O)),2&e&&t.Q6J("ngIf",t.lcZ(1,1,o.mail$))},dependencies:[s.O5,p.rH,d.eB,d.Nr,h.Hw,r.BM,r.y3,L,S,$,s.Ov,B.G,H],styles:["[_nghost-%COMP%]{display:block;background-color:#fff;overflow:hidden}.wrapper[_ngcontent-%COMP%]{height:100%;padding:16px}.tablet-portrait[_nghost-%COMP%]   .wrapper[_ngcontent-%COMP%], .tablet-portrait   [_nghost-%COMP%]   .wrapper[_ngcontent-%COMP%]{padding:32px 16px}.title-line[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}.title-line[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin-bottom:0}.info-line[_ngcontent-%COMP%]{margin-top:8px;display:flex;align-items:center}.info-line[_ngcontent-%COMP%]   .left-group[_ngcontent-%COMP%]{flex-grow:1}.content[_ngcontent-%COMP%]{margin-top:16px;white-space:pre-line}"],changeDetection:0}),n})(),ot=(()=>{class n{constructor(e,o){this.route=e,this.mailsComponent=o,this.mailId$=this.route.params.pipe((0,C.U)(a=>a.mailId))}ngOnInit(){}ngAfterViewInit(){this.mailsComponent.animateLayout(300)}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(p.gz),t.Y36(O))},n.\u0275cmp=t.Xpm({type:n,selectors:[["rpl-mail-detail-layout"]],decls:3,vars:3,consts:[[3,"lpjNode"]],template:function(e,o){1&e&&(t.TgZ(0,"rpl-content"),t._UZ(1,"rpl-mail",0),t.ALo(2,"async"),t.qZA()),2&e&&(t.xp6(1),t.MGl("lpjNode","mail-",t.lcZ(2,1,o.mailId$),""))},dependencies:[r.BM,r.y3,f.S,et,s.Ov],styles:["[_nghost-%COMP%]{display:contents}rpl-content[_ngcontent-%COMP%]{grid-row:1;grid-column:1/-1;z-index:1}.tablet-portrait[_nghost-%COMP%]   rpl-content[_ngcontent-%COMP%], .tablet-portrait   [_nghost-%COMP%]   rpl-content[_ngcontent-%COMP%]{grid-column:span 7/-2}.tablet-landscape[_nghost-%COMP%]   rpl-content[_ngcontent-%COMP%], .tablet-landscape   [_nghost-%COMP%]   rpl-content[_ngcontent-%COMP%]{grid-column:span 11/-2}.laptop[_nghost-%COMP%]   rpl-content[_ngcontent-%COMP%], .laptop   [_nghost-%COMP%]   rpl-content[_ngcontent-%COMP%]{grid-column:span 9/-2}rpl-mail[_ngcontent-%COMP%]{padding:4px;min-height:calc(100% - 8px)}"],changeDetection:0}),n})();var k=l(4193),it=l(2682),Y=l(2090);let at=(()=>{class n{constructor(e,o){this.viewContainer=e,this.templateRef=o,this.initialized=!1}set value(e){if(e!==this.valueCurrent){if(this.valueCurrent=e,!this.initialized)return this.viewContainer.createEmbeddedView(this.templateRef),void(this.initialized=!0);this.viewContainer.clear(),this.viewContainer.createEmbeddedView(this.templateRef)}}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(t.s_b),t.Y36(t.Rgc))},n.\u0275dir=t.lG2({type:n,selectors:[["","rplReattachOnChange",""]],inputs:{value:["rplReattachOnChange","value"]},standalone:!0}),n})();var lt=l(8675);const rt=["anchor"];function ct(n,i){if(1&n&&(t.ynx(0),t._UZ(1,"rpl-mail-star-button",14)(2,"rpl-mail-delete-button",14),t.TgZ(3,"button",15),t._UZ(4,"mat-icon",16),t.qZA(),t.BQk()),2&n){const e=t.oxw(3);t.xp6(1),t.Q6J("mail",e.mail),t.xp6(1),t.Q6J("mail",e.mail)}}function st(n,i){if(1&n&&(t.TgZ(0,"div",17),t._uU(1),t.qZA()),2&n){const e=t.oxw(3);t.xp6(1),t.Oqu(e.mail.content)}}function pt(n,i){if(1&n&&(t.ynx(0),t._UZ(1,"div",1)(2,"div",2),t.TgZ(3,"div",3)(4,"div",4)(5,"div",5)(6,"h5",6)(7,"span"),t._uU(8),t.qZA(),t._uU(9," - "),t.TgZ(10,"span"),t._uU(11),t.ALo(12,"readableDate"),t.qZA()(),t.TgZ(13,"h1",7)(14,"a",8,9),t._uU(16),t.qZA()()(),t.TgZ(17,"div",10),t.NdJ("click",function(o){return o.stopPropagation()}),t.YNc(18,ct,5,2,"ng-container",0),t.TgZ(19,"button",11),t._UZ(20,"rpl-mail-avatar",12),t.qZA()()(),t.YNc(21,st,2,1,"div",13),t.qZA(),t.BQk()),2&n){const e=i.ngIf,o=t.oxw().ngIf,a=t.oxw();t.xp6(8),t.Oqu(e.name),t.xp6(3),t.Oqu(t.lcZ(12,8,a.mail.sentAt)),t.xp6(3),t.MGl("routerLink","./",a.mail.id,""),t.xp6(2),t.Oqu(a.mail.subject),t.xp6(2),t.Q6J("ngIf",o["tablet-portrait"]),t.xp6(1),t.MGl("lpjNode","mail-",a.mail.id,"-avatar"),t.xp6(1),t.Q6J("src",e.avatarUrl),t.xp6(1),t.Q6J("ngIf",!a.mail.isRead)}}function mt(n,i){if(1&n&&(t.ynx(0),t.YNc(1,pt,22,10,"ng-container",0),t.ALo(2,"async"),t.BQk()),2&n){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",t.lcZ(2,1,e.mailSender$))}}let gt=(()=>{class n{get mailIsRead(){return this.mail.isRead}get mailIsStared(){return this.mail.isStarred}constructor(e,o){this.breakpointManager=e,this.contactRepo=o,this.breakpoints$=this.breakpointManager.breakpoints$}ngOnInit(){this.mailSender$=this.contactRepo.retrieve(this.mail.sender)}onClick(){this.anchorElementRef.nativeElement.click()}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(Y.p),t.Y36(P.m))},n.\u0275cmp=t.Xpm({type:n,selectors:[["rpl-mail-card"]],viewQuery:function(e,o){if(1&e&&t.Gf(rt,5),2&e){let a;t.iGM(a=t.CRH())&&(o.anchorElementRef=a.first)}},hostVars:4,hostBindings:function(e,o){1&e&&t.NdJ("click",function(){return o.onClick()}),2&e&&t.ekj("read",o.mailIsRead)("starred",o.mailIsStared)},inputs:{mail:"mail"},decls:2,vars:3,consts:[[4,"ngIf"],[1,"overlay"],["matRipple","",1,"ripple"],[1,"content"],[1,"headline"],["lpjNode","",1,"titles"],[1,"subtitle"],[1,"title"],[3,"routerLink"],["anchor",""],["lpjNode","",1,"actions",3,"click"],["mat-icon-button","",1,"avatar-button",3,"lpjNode"],[3,"src"],["class","overview",4,"ngIf"],[3,"mail"],["mat-icon-button",""],["fontSet","filled","fontIcon","more_vert"],[1,"overview"]],template:function(e,o){1&e&&(t.YNc(0,mt,3,3,"ng-container",0),t.ALo(1,"async")),2&e&&t.Q6J("ngIf",t.lcZ(1,1,o.breakpoints$))},dependencies:[s.O5,p.rH,d.eB,_.wG,h.Hw,r.BM,r.y3,L,S,$,s.Ov,B.G],styles:["[_nghost-%COMP%]{display:block;position:relative;background-color:#f9aa33;cursor:pointer}.ripple[_ngcontent-%COMP%], .overlay[_ngcontent-%COMP%]{position:absolute;inset:0}.content[_ngcontent-%COMP%]   .overview[_ngcontent-%COMP%], .content[_ngcontent-%COMP%]   .headline[_ngcontent-%COMP%]   .titles[_ngcontent-%COMP%]   .subtitle[_ngcontent-%COMP%]{overflow:hidden;white-space:nowrap;text-overflow:ellipsis}.overlay[_ngcontent-%COMP%]{background-color:#000;opacity:0}[_nghost-%COMP%]:hover   .overlay[_ngcontent-%COMP%]{opacity:.04}.content[_ngcontent-%COMP%]{padding:16px;background-color:#fff}.tablet-portrait[_nghost-%COMP%]   .content[_ngcontent-%COMP%], .tablet-portrait   [_nghost-%COMP%]   .content[_ngcontent-%COMP%]{padding:24px}.starred[_nghost-%COMP%]   .content[_ngcontent-%COMP%]{border-top-left-radius:24px}.tablet-portrait   .starred[_nghost-%COMP%]   .content[_ngcontent-%COMP%]{border-top-left-radius:initial}.content[_ngcontent-%COMP%]   .headline[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.content[_ngcontent-%COMP%]   .headline[_ngcontent-%COMP%]   .titles[_ngcontent-%COMP%]{width:0;flex-grow:1}.content[_ngcontent-%COMP%]   .headline[_ngcontent-%COMP%]   .titles[_ngcontent-%COMP%]   .subtitle[_ngcontent-%COMP%], .content[_ngcontent-%COMP%]   .headline[_ngcontent-%COMP%]   .titles[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{margin-bottom:0}.read[_nghost-%COMP%]   .content[_ngcontent-%COMP%]   .headline[_ngcontent-%COMP%]   .titles[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{color:#0000008a}.content[_ngcontent-%COMP%]   .headline[_ngcontent-%COMP%]   .titles[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:focus{text-decoration:underline}.content[_ngcontent-%COMP%]   .headline[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]{display:flex;gap:8px}.read[_nghost-%COMP%]   .content[_ngcontent-%COMP%]   .headline[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{color:#0000008a}[_nghost-%COMP%]:hover   .content[_ngcontent-%COMP%]   .headline[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   .avatar-button[_ngcontent-%COMP%]{background-color:#fff}.content[_ngcontent-%COMP%]   .overview[_ngcontent-%COMP%]{margin-top:8px;height:20px;white-space:pre}"],changeDetection:0}),n})();function ut(n,i){if(1&n&&(t._UZ(0,"rpl-mail-card",4),t.ALo(1,"async")),2&n){const e=i.$implicit,o=t.oxw(3);t.Udp("z-index",t.lcZ(1,4,o.mailPrevId$)===e.id?1:null),t.MGl("lpjNode","mail-",e.id,""),t.Q6J("mail",e)}}const dt=function(n){return{duration:225,easing:n}};function _t(n,i){if(1&n&&(t.TgZ(0,"div",2),t.YNc(1,ut,2,6,"rpl-mail-card",3),t.qZA()),2&n){const e=t.oxw().ngIf,o=t.oxw();t.Q6J("lpjAnimation",t.VKq(4,dt,o.AnimationCurves.STANDARD_CURVE))("lpjAnimationTrigger",e),t.xp6(1),t.Q6J("ngForOf",e)("ngForTrackBy",o.mailTracker)}}function ht(n,i){if(1&n&&(t.ynx(0),t.YNc(1,_t,2,6,"div",1),t.BQk()),2&n){const e=t.oxw();t.xp6(1),t.Q6J("lpjAnimationScope",e.animationScope)}}let Ct=(()=>{class n{constructor(e,o,a,c){this.route=e,this.mailRepo=o,this.changeDetector=a,this.refresh$=c,this.AnimationCurves=_.yN,this.mailTracker=(m,u)=>u.id,this.mailPrevId$=this.route.queryParams.pipe((0,C.U)(m=>m.prev))}ngOnInit(){(0,x.a)([this.route.params,this.refresh$.pipe((0,lt.O)(null))]).subscribe(([e])=>{const o=e.mailboxName;this.mails$=(o===N.T.Starred?this.mailRepo.listStarred():this.mailRepo.listByMailbox(o)).pipe((0,C.U)(a=>a.sort((c,m)=>m.sentAt.getTime()-c.sentAt.getTime()))),this.changeDetector.markForCheck()})}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(p.gz),t.Y36(y.w),t.Y36(t.sBO),t.Y36(b))},n.\u0275cmp=t.Xpm({type:n,selectors:[["rpl-mail-card-list"]],inputs:{animationScope:"animationScope"},decls:2,vars:3,consts:[[4,"ngIf"],["class","wrapper","lpjNode","",3,"lpjAnimation","lpjAnimationTrigger",4,"lpjAnimationScope"],["lpjNode","",1,"wrapper",3,"lpjAnimation","lpjAnimationTrigger"],[3,"mail","lpjNode","zIndex",4,"ngFor","ngForOf","ngForTrackBy"],[3,"mail","lpjNode"]],template:function(e,o){1&e&&(t.YNc(0,ht,2,1,"ng-container",0),t.ALo(1,"async")),2&e&&t.Q6J("ngIf",t.lcZ(1,1,o.mails$))},dependencies:[s.sg,s.O5,r.BM,r.CP,r.rG,r.y3,r.kf,r.ng,r.DT,gt,s.Ov],styles:["[_nghost-%COMP%]{display:block}.wrapper[_ngcontent-%COMP%]{height:100%;display:flex;flex-direction:column;gap:4px}"],changeDetection:0}),n})();function ft(n,i){if(1&n&&(t.TgZ(0,"div",9),t._uU(1),t.qZA()),2&n){const e=t.oxw(3).ngIf;t.xp6(1),t.hij(" Empty in ",e," ")}}function Mt(n,i){if(1&n&&(t.TgZ(0,"rpl-content",5),t._UZ(1,"rpl-mail-card-list",6,7),t.YNc(3,ft,2,1,"div",8),t.ALo(4,"async"),t.qZA()),2&n){const e=t.MAs(2),o=t.oxw().$implicit;let a;t.xp6(1),t.Q6J("animationScope",o),t.xp6(2),t.Q6J("ngIf",!(null!=(a=t.lcZ(4,2,e.mails$))&&a.length))}}const vt=function(n){return{duration:300,easing:n,estimation:!0}};function yt(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"div",3),t.NdJ("animationSettle",function(){const c=t.CHM(e).$implicit;return t.KtG(c.snapshots.clear())}),t.YNc(1,Mt,5,4,"rpl-content",4),t.qZA()}if(2&n){const e=t.oxw().ngIf,o=t.oxw().ngIf,a=t.oxw(2);t.Q6J("lpjAnimation",t.VKq(4,vt,a.AnimationCurves.STANDARD_CURVE))("lpjAnimationTrigger",e)("@content",o.latestMailboxIndex),t.xp6(1),t.Q6J("rplReattachOnChange",e)}}function Ot(n,i){1&n&&(t.TgZ(0,"div",10),t._UZ(1,"rpl-search-button"),t.qZA())}function xt(n,i){if(1&n&&(t.ynx(0),t.YNc(1,yt,2,6,"div",1),t.YNc(2,Ot,2,0,"div",2),t.BQk()),2&n){const e=t.oxw(2).ngIf;t.xp6(2),t.Q6J("ngIf",e["tablet-portrait"])}}function Pt(n,i){if(1&n&&(t.ynx(0),t.YNc(1,xt,3,1,"ng-container",0),t.ALo(2,"async"),t.BQk()),2&n){const e=t.oxw(2);t.xp6(1),t.Q6J("ngIf",t.lcZ(2,1,e.mailboxName$))}}function bt(n,i){if(1&n&&(t.ynx(0),t.YNc(1,Pt,3,3,"ng-container",0),t.ALo(2,"async"),t.BQk()),2&n){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",t.lcZ(2,1,e.navigationContext.value$))}}let A=0;const At=[{path:"",component:O,title:(()=>{class n{resolve(e){return e.params.mailboxName}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),children:[{path:"",component:(()=>{class n{constructor(e,o,a,c){this.navigationContext=e,this.route=o,this.breakpointManager=a,this.mailsComponent=c,this.AnimationCurves=_.yN,this.breakpoints$=this.breakpointManager.breakpoints$,this.mailboxName$=this.route.params.pipe((0,C.U)(m=>m.mailboxName))}ngOnInit(){}ngAfterViewInit(){var e=this;return(0,R.Z)(function*(){e.content.fakeScroll(A),yield e.mailsComponent.animateLayout(250),e.content.setScrollTop(A)})()}ngOnDestroy(){A=this.content.getScrollTop()}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(it.k),t.Y36(p.gz),t.Y36(Y.p),t.Y36(O))},n.\u0275cmp=t.Xpm({type:n,selectors:[["rpl-mail-list-layout"]],viewQuery:function(e,o){if(1&e&&t.Gf(f.S,5),2&e){let a;t.iGM(a=t.CRH())&&(o.content=a.first)}},decls:2,vars:3,consts:[[4,"ngIf"],["class","content-wrapper","lpjNode","",3,"lpjAnimation","lpjAnimationTrigger","animationSettle",4,"lpjAnimationScope"],["class","actions",4,"ngIf"],["lpjNode","",1,"content-wrapper",3,"lpjAnimation","lpjAnimationTrigger","animationSettle"],["class","content",4,"rplReattachOnChange"],[1,"content"],[1,"list",3,"animationScope"],["list",""],["class","empty-prompt",4,"ngIf"],[1,"empty-prompt"],[1,"actions"]],template:function(e,o){1&e&&(t.YNc(0,bt,3,3,"ng-container",0),t.ALo(1,"async")),2&e&&t.Q6J("ngIf",t.lcZ(1,1,o.breakpoints$))},dependencies:[s.O5,r.BM,r.CP,r.rG,r.y3,r.kf,r.ng,r.DT,w.P,f.S,at,Ct,s.Ov],styles:["[_nghost-%COMP%]{display:contents}.content-wrapper[_ngcontent-%COMP%]{position:relative;grid-row:1;grid-column:1/-1}.tablet-portrait[_nghost-%COMP%]   .content-wrapper[_ngcontent-%COMP%], .tablet-portrait   [_nghost-%COMP%]   .content-wrapper[_ngcontent-%COMP%]{grid-column:span 7/-2}.tablet-landscape[_nghost-%COMP%]   .content-wrapper[_ngcontent-%COMP%], .tablet-landscape   [_nghost-%COMP%]   .content-wrapper[_ngcontent-%COMP%]{grid-column:span 9/-3}.laptop[_nghost-%COMP%]   .content-wrapper[_ngcontent-%COMP%], .laptop   [_nghost-%COMP%]   .content-wrapper[_ngcontent-%COMP%]{grid-column:span 7/-3}.content-wrapper[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{position:relative;width:100%;height:100%}.content-wrapper[_ngcontent-%COMP%]   .list[_ngcontent-%COMP%]{margin:4px}.tablet-portrait[_nghost-%COMP%]   .content-wrapper[_ngcontent-%COMP%]   .list[_ngcontent-%COMP%], .tablet-portrait   [_nghost-%COMP%]   .content-wrapper[_ngcontent-%COMP%]   .list[_ngcontent-%COMP%]{margin:32px 0}.content-wrapper[_ngcontent-%COMP%]   .empty-prompt[_ngcontent-%COMP%]{position:absolute;left:50%;top:50%;transform:translate(-50%) translateY(-50%)}.tablet-portrait[_nghost-%COMP%]   .actions[_ngcontent-%COMP%], .tablet-portrait   [_nghost-%COMP%]   .actions[_ngcontent-%COMP%]{position:absolute;top:16px;right:0}.tablet-landscape[_nghost-%COMP%]   .actions[_ngcontent-%COMP%], .tablet-landscape   [_nghost-%COMP%]   .actions[_ngcontent-%COMP%]{position:initial;grid-row:1;grid-column:-3/-2;padding:16px 0}"],data:{animation:[(0,g.X$)("content",[(0,g.eR)(":increment",[(0,g.IO)(":leave",(0,g.oB)({position:"absolute"})),k.Pm.apply("y","forward")]),(0,g.eR)(":decrement",[(0,g.IO)(":leave",(0,g.oB)({position:"absolute"})),k.Pm.apply("y","backward")])])]},changeDetection:0}),n})(),data:{animationId:"list"}},{path:":mailId",component:ot,data:{animationId:"detail"}}]}];let Tt=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[p.Bz.forChild(At),p.Bz]}),n})(),wt=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[s.ez,Tt,d.yu,_.si,h.Ps,r.rE,Q.Cl,w.P,f.S]}),n})()}}]);